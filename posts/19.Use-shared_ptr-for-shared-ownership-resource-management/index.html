<!DOCTYPE html><html lang="ko" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="소유권 공유 자원 관리에는 shared_ptr를 사용하라" /><meta property="og:locale" content="ko" /><meta name="description" content="자동으로 작동하면서 모든 종류의 자원에 적용하며 그 시점을 예측할 수 있는(소멸자처럼) 자원 관리 시스템을 위한 것이 shared_ptr이다." /><meta property="og:description" content="자동으로 작동하면서 모든 종류의 자원에 적용하며 그 시점을 예측할 수 있는(소멸자처럼) 자원 관리 시스템을 위한 것이 shared_ptr이다." /><link rel="canonical" href="https://yjh9317.github.io/posts/19.Use-shared_ptr-for-shared-ownership-resource-management/" /><meta property="og:url" content="https://yjh9317.github.io/posts/19.Use-shared_ptr-for-shared-ownership-resource-management/" /><meta property="og:site_name" content="yjh9317" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-04-13T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="소유권 공유 자원 관리에는 shared_ptr를 사용하라" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-04-13T00:00:00+09:00","datePublished":"2024-04-13T00:00:00+09:00","description":"자동으로 작동하면서 모든 종류의 자원에 적용하며 그 시점을 예측할 수 있는(소멸자처럼) 자원 관리 시스템을 위한 것이 shared_ptr이다.","headline":"소유권 공유 자원 관리에는 shared_ptr를 사용하라","mainEntityOfPage":{"@type":"WebPage","@id":"https://yjh9317.github.io/posts/19.Use-shared_ptr-for-shared-ownership-resource-management/"},"url":"https://yjh9317.github.io/posts/19.Use-shared_ptr-for-shared-ownership-resource-management/"}</script><title>소유권 공유 자원 관리에는 shared_ptr를 사용하라 | yjh9317</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="yjh9317"><meta name="application-name" content="yjh9317"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> </a></div><div class="site-title mt-3"> <a href="/">yjh9317</a></div><div class="site-subtitle font-italic">코딩열심히하려는사람</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/yjh9317" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>소유권 공유 자원 관리에는 shared_ptr를 사용하라</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>소유권 공유 자원 관리에는 shared_ptr를 사용하라</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1712934000" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Apr 13, 2024 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">Yang jeong hyeon</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2131 words"> <em>11 min</em> read</span></div></div></div><div class="post-content"><ul><li>자동으로 작동하면서 모든 종류의 자원에 적용하며 그 시점을 예측할 수 있는(소멸자처럼) 자원 관리 시스템을 위한 것이 shared_ptr이다.</ul><h1 id="shared_ptr">shared_ptr</h1><ul><li><p>shared_ptr를 통한 객체의 수명은 객체에 접근한 shared_ptr들의 수명에 의해 결정된다.</p><li><p>객체가 가리키던 마지막 shared_ptr가 객체를 더이상 가리키게 되지 않는다면, shared_ptr는 자신이 가리키는 객체를 파괴한다.</p></ul><h2 id="참조-횟수reference-counter"><span class="mr-2">참조 횟수(reference counter)</span><a href="#참조-횟수reference-counter" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p>shared_ptr는 자신이 객체를 가리키는 최후의 공유 포인터임을 아는 방법은 바로 <code class="language-plaintext highlighter-rouge">참조 횟수</code>이다</p><li><p><code class="language-plaintext highlighter-rouge">참조 횟수는 그 자원이 가리키는 shared_ptr들의 개수에 해당한다</code></p><li><p>shared_ptr의 생성자가 참조횟수를 증가시키고, 소멸자는 감소시킨다</p><li><p>복사 대입 연산자는 증가,감소 둘 다 수행한다.</p><ul><li>sp1 = sp2 이런 식이면, sp1이 가리키던 참조 횟수는 감소하고 sp2가 가리키는 참조 횟수는 증가된다</ul><li><p><code class="language-plaintext highlighter-rouge">shared_ptr가 자원의 참조 횟수를 감소한 후, 그 횟수가 0이 되었다면 그 자원을 가리키는 shared_ptr가 없다는 뜻으로 그 자원을 파괴한다.</code></p></ul><h3 id="참조-횟수-관리-성능"><span class="mr-2">참조 횟수 관리 성능</span><a href="#참조-횟수-관리-성능" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p><code class="language-plaintext highlighter-rouge">shared_ptr의 크기는 raw 포인터의 두배이다</code></p><ul><li>내부적으로 자원을 가리키는 raw 포인터뿐만 아니라 자원의 참조 횟수를 가리키는 raw 포인터도 저장해야 하기 때문</ul><li><p><code class="language-plaintext highlighter-rouge">참조 횟수를 담을 메모리는 반드시 동적 할당 해야 한다.</code></p><ul><li>개념적으로 참조 횟수는 공유 포인터가 가리키는 객체에 연관되지만, 그 객체는 참조 횟수를 전혀 알지 못한다<li>따라서 객체는 참조 횟수를 담을 장소를 따로 마련하지 않는다.<li>항목 21에서 설명하지만, <code class="language-plaintext highlighter-rouge">make_shared</code>로 shared_ptr를 생성하면 동적할당 비용을 피할 수 있다.<li>다만 <code class="language-plaintext highlighter-rouge">make_shared</code>를 사용할 수 없는 상황도 존재한다`</ul><li><p>참조 횟수의 증감은 반드시 원자적 연산이어야 한다.</p><ul><li><code class="language-plaintext highlighter-rouge">여러 스레드가 참조 횟수를 동시에 읽고 쓰기 위함</code></ul></ul><p><br /></p><h2 id="shared_ptr의-생성자가-참조횟수를-증가시키지-않는-경우"><span class="mr-2">shared_ptr의 생성자가 참조횟수를 증가시키지 않는 경우</span><a href="#shared_ptr의-생성자가-참조횟수를-증가시키지-않는-경우" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p>그것은 바로 <code class="language-plaintext highlighter-rouge">이동 생성</code>이다</p><li><p>기존의 shared_ptr를 이동해서 새 shared_ptr를 생성하면 원본 shared_ptr는 nullptr이 된다</p><ul><li>즉, 새로운 shared_ptr의 수명이 시작되는 시점에서 기존 shared_ptr는 자원을 가리키지 않는 상태가 된다<li>이런 경우, 복사보다 이동이 빠르다</ul></ul><p><br /></p><h2 id="shared_ptr의-커스텀-삭제자"><span class="mr-2">shared_ptr의 커스텀 삭제자</span><a href="#shared_ptr의-커스텀-삭제자" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p>unique_ptr처럼 delete를 기본적인 자원 파괴 매커니즘으로 사용하고 있으며, 커스텀 삭제자를 지원한다</p><li><p>하지만 구체적인 방식은 다른데, <code class="language-plaintext highlighter-rouge">unique_ptr에서는 삭제자 형식이 스마트 포인터의 형식의 일부였지만, shared_ptr는 그렇지 않다</code></p></ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c1">// 커스텀 삭제자</span>
<span class="k">auto</span> <span class="n">logginDel</span> <span class="o">=</span> 
    <span class="p">[](</span><span class="n">Widget</span><span class="o">*</span> <span class="n">pw</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">makeLogEntry</span><span class="p">(</span><span class="n">pw</span><span class="p">)</span>           <span class="p">;</span>
        <span class="k">delete</span> <span class="n">pw</span><span class="p">;</span>
    <span class="p">};</span>

<span class="c1">// 삭제자 형식이 포인터 형식의 일부임</span>
<span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Widget</span><span class="p">,</span><span class="k">decltype</span><span class="p">(</span><span class="n">loggingDel</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">upw</span><span class="p">(</span><span class="k">new</span> <span class="n">Widget</span><span class="p">,</span> <span class="n">loggingDel</span><span class="p">);</span>

<span class="c1">// 삭제자 형식이 포인터 형식의 일부가 아님</span>
<span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span> <span class="n">spw</span><span class="p">(</span><span class="k">new</span> <span class="n">Widget</span><span class="p">,</span> <span class="n">loggingDel</span><span class="p">);</span>
</pre></table></code></div></div><ul><li>shared_ptr는 사용하는 커스텀 삭제자의 형식을 서로 다르게 해도, 같은 형식으로 사용할 수 있어서 그 형식의 객체를 담는 컨테이너 안에 넣을 수 있어서 설계적으로 유연하다</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c1">// 서로 다른 커스텀 삭제자</span>
<span class="k">auto</span> <span class="n">customDeleter1</span> <span class="o">=</span> <span class="p">[](</span><span class="n">Widget</span><span class="o">*</span> <span class="n">pw</span><span class="p">)</span> <span class="p">{...};</span>
<span class="k">auto</span> <span class="n">customDeleter2</span> <span class="o">=</span> <span class="p">[](</span><span class="n">Widget</span><span class="o">*</span> <span class="n">pw</span><span class="p">)</span> <span class="p">{...};</span>

<span class="c1">// 를 이용한 서로 다른 shared_ptr</span>
<span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span> <span class="n">pw1</span><span class="p">(</span><span class="k">new</span> <span class="n">Widget</span><span class="p">,</span> <span class="n">customDeleter1</span><span class="p">);</span>
<span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span> <span class="n">pw2</span><span class="p">(</span><span class="k">new</span> <span class="n">Widget</span><span class="p">,</span> <span class="n">customDeleter2</span><span class="p">);</span>

<span class="c1">// 를 담는 컨테이너</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;&gt;</span> <span class="n">vpw</span> <span class="p">{</span> <span class="n">pw1</span><span class="p">,</span> <span class="n">pw2</span> <span class="p">};</span>
</pre></table></code></div></div><ul><li><p>또다른 unique_ptr과의 차이점은 <code class="language-plaintext highlighter-rouge">커스텀 삭제자를 지정해도 shared_ptr 객체의 크기가 변하지 않는다</code></p><li><p>삭제자와 무관하게 shared_ptr의 크기는 항상 포인터 두 개 분량이다</p><li><p>하지만 함수 객체를 커스텀 삭제자로 사용할 수 있다는 점 + 함수 객체가 임의의 분량 자료를 담을 수 있다는 점을 생각하면, 커스텀 삭제자가 얼마든지 커질 수 있다는 결론이 나온다</p><li><p>그래서 shared_ptr이 임의의 크기의 삭제자를 추가적인 메모리 없이 지칭하는 비결은 무엇이냐 하면 사실 그런 것은 없다</p><ul><li>단, 그 메모리가 shared_ptr의 일부가 아닐 뿐이다</ul><li><p>추가 메모리는 힙에 할당되며, shared_ptr객체의 생성자가 shared_ptr의 커스텀 할당자 지원을 활용하는 경우에는 그 할당자가 관리하는 메모리가 쓰인다</p><li><p>shared_ptr객체가 자신이 가리키는 객체에 대한 참조횟수를 가리키는 포인터도 담는다고 했는데 사실 참조 횟수는 <code class="language-plaintext highlighter-rouge">제어 블록</code>이라 부르는 더 큰 자료구조의 일부이다</p></ul><p><br /></p><h2 id="제어-블록control-block"><span class="mr-2">제어 블록(Control Block)</span><a href="#제어-블록control-block" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p>shared_ptr가 관리하는 객체당 하나의 제어 블럭이 존재한다</p><li><p>이 안에는 <code class="language-plaintext highlighter-rouge">참조 횟수, 약한 횟수(항목 21), 커스텀 삭제자(사용했으면) 등 이 있다</code></p><li><p>객체의 제어 블록은 shared_ptr가 생성될 때 설정된다</p><li><p>제어블록의 생성 여부에 관해 다음과 같은 규칙을 유추할 수 있다.</p></ul><h3 id="제어-블록의-규칙"><span class="mr-2">제어 블록의 규칙</span><a href="#제어-블록의-규칙" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><code class="language-plaintext highlighter-rouge">make_shared는 항상 제어블록을 생성한다</code><ul><li>공유 포인터가 가리킬 객체를 새로 생성하므로, make_shared가 호출되는 시점에서 그 객체에 대한 제어 블록이 존재할 가능성은 전혀 없다</ul><li><code class="language-plaintext highlighter-rouge">고유 소유권 포인터(unique_ptr)로부터 shared_ptr 객체를 생성하면 제어 블록이 생성된다</code><ul><li>unique_ptr은 제어 블록을 사용하지 않아,그전에 이미 존재할 가능성은 없다.</ul><li><code class="language-plaintext highlighter-rouge">raw 포인터로 shared_ptr 생성자를 호출하면 제어 블록이 생성된다</code><ul><li><p>이미 제어 블록이 있는 객체로부터 shared_ptr를 생성하고 싶다면, raw 포인터가 아닌 shared_ptr나 weak_ptr를 생성자의 인수로 지정하면 된다.</p><li><p>shared_ptr나 weak_ptr를 받는 shared_ptr 생성자들은 새로운 제어 블록을 만들지 않는다</p></ul></ul><p><br /></p><h1 id="shared_ptr의-생성자에-raw-포인터를-사용하는-것은-피하자">shared_ptr의 생성자에 raw 포인터를 사용하는 것은 피하자</h1><ul><li><p>위의 규칙들에서 비롯되는 한가지 결과는, 하나의 raw 포인터로 여러 개의 shared_ptr를 생성하면 가리켜지는 객체에 여러 개의 제어 블록이 생성되어 미정의 행동이 된다.</p><li><p>제어 블록이 여러 개라는 것은 참조 횟수 또한 여러 개라는 것이며, 객체 또한 여러 번 파괴된다</p></ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">auto</span> <span class="n">pw</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Widget</span><span class="p">;</span>

<span class="c1">// 첫 번째 제어블록 생성</span>
<span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span> <span class="n">spw1</span><span class="p">(</span><span class="n">pw</span><span class="p">,</span> <span class="n">loggingDel</span><span class="p">);</span>

<span class="c1">// 두 번째 제어블록 생성</span>
<span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span> <span class="n">spw2</span><span class="p">(</span><span class="n">pw</span><span class="p">,</span> <span class="n">loggingDel</span><span class="p">);</span>
</pre></table></code></div></div><ul><li>이러한 잘못된 용법에서 배울 점은 두 가지가 있다.</ul><h3 id="배울-점"><span class="mr-2">배울 점</span><a href="#배울-점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p><code class="language-plaintext highlighter-rouge">shared_ptr의 생성자에 생 포인터를 넘겨 주는 것은 피하자</code></p><ul><li><p>대안은 <code class="language-plaintext highlighter-rouge">make_shared를 사용하자</code></p><li><p>커스텀 삭제자를 사용하는 경우 make_shared를 호출할 수 없는데, 이 경우 raw 포인터를 사용할 수 밖에 없다</p></ul><li><p><code class="language-plaintext highlighter-rouge">shared_ptr 생성자를 raw 포인터로 호출할 수 밖에 없는 상황에는 raw 포인터 변수를 거치지 말고 new의 결과로 직접 전달하자</code></p><ul><li>그러면 같은 raw 포인터로 다른 shared_ptr의 생성자에 사용하는 경우가 없어진다</ul></ul><p><br /></p><h1 id="결론">결론</h1><blockquote><p>이것만은 잊지 말자!</p><ul class="prompt-tip"><li><p>shared_ptr는 임의의 공유 자원의 수명을 편리하게 관리할 수 있는 수단을 제공한다</p><li><p>대체로 shared_ptr 객체는 그 크기가 unique_ptr 객체의 두배이며, 제어 블록에 관련된 추가 부담을 유발하며, 원자적 참조 횟수 조작을 요구한다</p><li><p>자원은 기본적으로 delete를 통해 파괴되지만, 커스텀 삭제자를 지원한다 삭제자 형식은 shared_ptr의 형식에 아무 영향도 끼치지 않는다</p><li><p>raw 포인터 형식의 변수로부터 shared_ptr를 생성하는 일은 피해야 한다.</p></ul></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/modern-effective-c/'>Modern Effective C++</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/modern-effective-c/" class="post-tag no-text-decoration" >modern effective c++</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%EC%86%8C%EC%9C%A0%EA%B6%8C+%EA%B3%B5%EC%9C%A0+%EC%9E%90%EC%9B%90+%EA%B4%80%EB%A6%AC%EC%97%90%EB%8A%94+shared_ptr%EB%A5%BC+%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC+-+yjh9317&url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F19.Use-shared_ptr-for-shared-ownership-resource-management%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%EC%86%8C%EC%9C%A0%EA%B6%8C+%EA%B3%B5%EC%9C%A0+%EC%9E%90%EC%9B%90+%EA%B4%80%EB%A6%AC%EC%97%90%EB%8A%94+shared_ptr%EB%A5%BC+%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC+-+yjh9317&u=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F19.Use-shared_ptr-for-shared-ownership-resource-management%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F19.Use-shared_ptr-for-shared-ownership-resource-management%2F&text=%EC%86%8C%EC%9C%A0%EA%B6%8C+%EA%B3%B5%EC%9C%A0+%EC%9E%90%EC%9B%90+%EA%B4%80%EB%A6%AC%EC%97%90%EB%8A%94+shared_ptr%EB%A5%BC+%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC+-+yjh9317" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Gameplay-Param/">GameplayTag Param</a><li><a href="/posts/Device/">Device</a><li><a href="/posts/SwapChain/">SwapChain</a><li><a href="/posts/VertexBuffer/">VertexBuffer</a><li><a href="/posts/IndexBuffer/">IndexBuffer</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/2.Understand-auto-type-deduction/"><div class="card-body"> <em class="small" data-ts="1705503600" data-df="ll" > Jan 18, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>auto의 형식 연역 규칙을 숙지하라</h3><div class="text-muted small"><p> auto와 템플릿 auto 형식은 한가지 예외만 빼면 템플릿과 똑같이 작동한다. auto 형식 연역과 템플릿 형식 연역 사이에는 직접적인 대응 관계가 존재한다. // 템플릿 template&amp;lt;typename T&amp;gt; void f(ParamType param); f(expr); auto를 이용한...</p></div></div></a></div><div class="card"> <a href="/posts/3.Understand-decltype/"><div class="card-body"> <em class="small" data-ts="1705762800" data-df="ll" > Jan 21, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>decltype의 작동 방식을 숙지하라</h3><div class="text-muted small"><p> decltype은 주어진 이름이나 표현식의 형식을 알려주는 키워드 하지만 가끔 예상밖의 결과를 제공 대부분의 경우 템플릿과 auto와 달리 decltype은 그대로의 결과를 도출한다. const int i = 0; // decltype(i)는 const int bool f(c...</p></div></div></a></div><div class="card"> <a href="/posts/4.Know-how-to-view-deduced-types/"><div class="card-body"> <em class="small" data-ts="1706022000" data-df="ll" > Jan 24, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>연역된 형식을 파악하는 방법을 알아두라.</h3><div class="text-muted small"><p> 형식 연역 결과를 직접 확인하는 수단은 필요한 시점에 따라 다르다. 이번 항목에선 3가지 시점으로 살펴본다. IDE 편집기 IDE 코드 편집기는 프로그램 개체(변수,매개변수,함수 등)을 마우스 커서에 올리면 개채 형식을 표현해준다. 이런 일이 가능하려면 코드가 어느정도 컴파일 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/Gameplay-Effects/" class="btn btn-outline-primary" prompt="Older"><p>Gameplay Effects</p></a> <a href="/posts/Control-Rig-%EA%B8%B0%EC%B4%88/" class="btn btn-outline-primary" prompt="Newer"><p>Control Rig 기초</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Yang jeong hyeon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
