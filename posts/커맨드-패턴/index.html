<!DOCTYPE html><html lang="ko" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="커맨드 패턴" /><meta property="og:locale" content="ko" /><meta name="description" content="커맨드 패턴" /><meta property="og:description" content="커맨드 패턴" /><link rel="canonical" href="https://yjh9317.github.io/posts/%EC%BB%A4%EB%A7%A8%EB%93%9C-%ED%8C%A8%ED%84%B4/" /><meta property="og:url" content="https://yjh9317.github.io/posts/%EC%BB%A4%EB%A7%A8%EB%93%9C-%ED%8C%A8%ED%84%B4/" /><meta property="og:site_name" content="yjh9317" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-06-05T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="커맨드 패턴" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-06-17T15:34:32+09:00","datePublished":"2023-06-05T00:00:00+09:00","description":"커맨드 패턴","headline":"커맨드 패턴","mainEntityOfPage":{"@type":"WebPage","@id":"https://yjh9317.github.io/posts/%EC%BB%A4%EB%A7%A8%EB%93%9C-%ED%8C%A8%ED%84%B4/"},"url":"https://yjh9317.github.io/posts/%EC%BB%A4%EB%A7%A8%EB%93%9C-%ED%8C%A8%ED%84%B4/"}</script><title>커맨드 패턴 | yjh9317</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="yjh9317"><meta name="application-name" content="yjh9317"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> </a></div><div class="site-title mt-3"> <a href="/">yjh9317</a></div><div class="site-subtitle font-italic">코딩열심히하려는사람</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/yjh9317" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>커맨드 패턴</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>커맨드 패턴</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1685890800" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 5, 2023 </em> </span> <span> Updated <em class="" data-ts="1750142072" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 17, 2025 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">Yang jeong hyeon</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1880 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><h1 id="커맨드-패턴">커맨드 패턴</h1><ul><li><p>player.Jump()처럼 객체의 메서드를 직접 호출하는 대신, ‘점프하라’는 요청(request) 또는 명령(command) 자체를 하나의 객체로 캡슐화하는 것이 <strong>커맨드 패턴(Command Pattern)</strong>의 핵심이다.</p><li><p>이렇게 요청을 객체로 만들면 어떤 장점이 있을까? 명령을 변수처럼 저장하거나, 큐에 쌓아두고 순서대로 실행하거나, 로그로 남기거나, 심지어 ‘실행 취소(Undo)’하는 것까지 가능해진다.</p><li><p>커맨드 패턴은 <code class="language-plaintext highlighter-rouge">요청을 호출하는 객체(Invoker)**와 **요청을 실제로 수행하는 객체(Receiver)를 분리하여, 시스템의 유연성을 크게 향상시키는 행위 디자인 패턴</code>이다.</p></ul><h2 id="시나리오-유연한-플레이어-입력-시스템-만들기"><span class="mr-2">시나리오: 유연한 플레이어 입력 시스템 만들기</span><a href="#시나리오-유연한-플레이어-입력-시스템-만들기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>게임에서 플레이어의 키보드 입력을 처리하는 상황을 생각해보자. W, A, S, D 키로 캐릭터를 움직이고, Space 바로 점프하게 만들어야 한다.</ul><h3 id="1-수신자receiver-정의"><span class="mr-2">1. 수신자(Receiver) 정의</span><a href="#1-수신자receiver-정의" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>먼저, 실제 동작을 수행할 GameActor 클래스를 정의한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="c1">// 실제 동작을 수행하는 수신자</span>
<span class="k">class</span> <span class="nc">GameActor</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">Jump</span><span class="p">()</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"점프!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="kt">void</span> <span class="n">Fire</span><span class="p">()</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"발사!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
    <span class="kt">void</span> <span class="n">Move</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span> <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"이동: ("</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="s">")"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="2-문제점-경직된-if-else-구조"><span class="mr-2">2. 문제점: 경직된 if-else 구조</span><a href="#2-문제점-경직된-if-else-구조" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>커맨드 패턴이 없다면, 입력 처리 로직은 보통 거대한 if-else 또는 switch 문으로 구현된다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1">// 안티 패턴: 입력과 액션이 강하게 결합됨</span>
<span class="kt">void</span> <span class="nf">HandleInput</span><span class="p">(</span><span class="n">GameActor</span><span class="o">&amp;</span> <span class="n">actor</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">IsKeyPressed</span><span class="p">(</span><span class="n">KeyCode</span><span class="o">::</span><span class="n">SPACE</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">actor</span><span class="p">.</span><span class="n">Jump</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">IsKeyPressed</span><span class="p">(</span><span class="n">KeyCode</span><span class="o">::</span><span class="n">CONTROL</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">actor</span><span class="p">.</span><span class="n">Fire</span><span class="p">();</span>
    <span class="p">}</span> <span class="c1">// ... 키가 늘어날수록 복잡해짐</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li>이 코드는 키보드와 GameActor의 동작이 강하게 결합되어 있다. 키 바인딩을 바꾸거나, 게임패드를 지원하거나, AI가 캐릭터를 조종하게 하려면 이 코드를 전부 수정해야 한다. 매우 비효율적이고 확장성이 떨어진다.</ul><h2 id="커맨드-패턴-구현"><span class="mr-2">커맨드 패턴 구현</span><a href="#커맨드-패턴-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>이 문제를 해결하기 위해, 각 행동을 ‘커맨드 객체’로 캡슐화한다.</ul><h3 id="1-command-인터페이스-정의"><span class="mr-2">1. Command 인터페이스 정의</span><a href="#1-command-인터페이스-정의" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>모든 커맨드 객체가 따를 공통 인터페이스를 정의한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c1">// 모든 커맨드의 기본 인터페이스</span>
<span class="k">class</span> <span class="nc">ICommand</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">ICommand</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Execute</span><span class="p">(</span><span class="n">GameActor</span><span class="o">&amp;</span> <span class="n">actor</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="2-구체적인-커맨드concrete-command-구현"><span class="mr-2">2. 구체적인 커맨드(Concrete Command) 구현</span><a href="#2-구체적인-커맨드concrete-command-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>이제 각 행동을 별도의 커맨드 클래스로 구현한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">JumpCommand</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ICommand</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">Execute</span><span class="p">(</span><span class="n">GameActor</span><span class="o">&amp;</span> <span class="n">actor</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">actor</span><span class="p">.</span><span class="n">Jump</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">FireCommand</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ICommand</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">Execute</span><span class="p">(</span><span class="n">GameActor</span><span class="o">&amp;</span> <span class="n">actor</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">actor</span><span class="p">.</span><span class="n">Fire</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">MoveCommand</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ICommand</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">MoveCommand</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">)</span> <span class="o">:</span> <span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">y</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="p">{}</span>
    <span class="kt">void</span> <span class="n">Execute</span><span class="p">(</span><span class="n">GameActor</span><span class="o">&amp;</span> <span class="n">actor</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">actor</span><span class="p">.</span><span class="n">Move</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="3-호출자invoker-구현"><span class="mr-2">3. 호출자(Invoker) 구현</span><a href="#3-호출자invoker-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>InputHandler는 이제 어떤 키가 눌렸을 때 어떤 커맨드를 실행할지만을 책임진다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;map&gt;</span><span class="cp">
</span>
<span class="c1">// 키 입력을 받아 커맨드를 실행시키는 호출자</span>
<span class="k">class</span> <span class="nc">InputHandler</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">map</span><span class="o">&lt;</span><span class="n">KeyCode</span><span class="p">,</span> <span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ICommand</span><span class="o">&gt;&gt;</span> <span class="n">keyBindings</span><span class="p">;</span>

<span class="nl">public:</span>
    <span class="n">InputHandler</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 게임 시작 시 키 바인딩 설정</span>
        <span class="n">keyBindings</span><span class="p">[</span><span class="n">KeyCode</span><span class="o">::</span><span class="n">SPACE</span><span class="p">]</span> <span class="o">=</span> <span class="n">make_unique</span><span class="o">&lt;</span><span class="n">JumpCommand</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="n">keyBindings</span><span class="p">[</span><span class="n">KeyCode</span><span class="o">::</span><span class="n">CONTROL</span><span class="p">]</span> <span class="o">=</span> <span class="n">make_unique</span><span class="o">&lt;</span><span class="n">FireCommand</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="n">keyBindings</span><span class="p">[</span><span class="n">KeyCode</span><span class="o">::</span><span class="n">W</span><span class="p">]</span> <span class="o">=</span> <span class="n">make_unique</span><span class="o">&lt;</span><span class="n">MoveCommand</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="n">keyBindings</span><span class="p">[</span><span class="n">KeyCode</span><span class="o">::</span><span class="n">S</span><span class="p">]</span> <span class="o">=</span> <span class="n">make_unique</span><span class="o">&lt;</span><span class="n">MoveCommand</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">);</span>
        <span class="c1">// ...</span>
    <span class="p">}</span>

    <span class="c1">// 입력을 처리하여 해당하는 커맨드를 실행</span>
    <span class="n">ICommand</span><span class="o">*</span> <span class="n">HandleInput</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="k">const</span><span class="o">&amp;</span> <span class="p">[</span><span class="n">key</span><span class="p">,</span> <span class="n">command</span><span class="p">]</span> <span class="o">:</span> <span class="n">keyBindings</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">IsKeyPressed</span><span class="p">(</span><span class="n">key</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">return</span> <span class="n">command</span><span class="p">.</span><span class="n">get</span><span class="p">();</span> <span class="c1">// 실행할 커맨드를 반환</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">nullptr</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="4-개선된-게임-루프"><span class="mr-2">4. 개선된 게임 루프</span><a href="#4-개선된-게임-루프" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>이제 게임 루프는 매우 간결해진다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">GameActor</span> <span class="n">player</span><span class="p">;</span>
    <span class="n">InputHandler</span> <span class="n">inputHandler</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// 게임 루프</span>
        <span class="n">ICommand</span><span class="o">*</span> <span class="n">command</span> <span class="o">=</span> <span class="n">inputHandler</span><span class="p">.</span><span class="n">HandleInput</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">command</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">command</span><span class="o">-&gt;</span><span class="n">Execute</span><span class="p">(</span><span class="n">player</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li>이제 키 바인딩을 바꾸려면 InputHandler의 생성자만 수정하면 된다.<li>AI를 만들고 싶다면, InputHandler와 똑같이 커맨드 객체를 생성하여 Execute를 호출하기만 하면 된다.<li>입력 소스와 캐릭터의 실제 행동이 완벽하게 분리되었다.</ul><h2 id="실행-취소undo-기능-추가하기"><span class="mr-2">실행 취소(Undo) 기능 추가하기</span><a href="#실행-취소undo-기능-추가하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>커맨드 패턴의 가장 강력한 활용 사례 중 하나는 ‘실행 취소’ 기능이다.<li>턴제 전략 게임에서 유닛을 움직였다가 취소하는 상황을 생각해보자.</ul><h3 id="1-command-인터페이스에-undo-메서드를-추가한다"><span class="mr-2">1. Command 인터페이스에 Undo 메서드를 추가한다.</span><a href="#1-command-인터페이스에-undo-메서드를-추가한다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">ICommand</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">ICommand</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Execute</span><span class="p">(</span><span class="n">GameActor</span><span class="o">&amp;</span> <span class="n">actor</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Undo</span><span class="p">(</span><span class="n">GameActor</span><span class="o">&amp;</span> <span class="n">actor</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="2movecommand를-undo가-가능하도록-수정한다"><span class="mr-2">2.MoveCommand를 Undo가 가능하도록 수정한다.</span><a href="#2movecommand를-undo가-가능하도록-수정한다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>Undo를 하려면 ‘이전 상태’를 알아야 한다. 따라서 MoveCommand는 이동한 거리를 기억해야 한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">MoveCommand</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ICommand</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="kt">float</span> <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">;</span> <span class="c1">// 이동한 거리</span>
<span class="nl">public:</span>
    <span class="n">MoveCommand</span><span class="p">(</span><span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">)</span> <span class="o">:</span> <span class="n">dx</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">dy</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="p">{}</span>

    <span class="kt">void</span> <span class="n">Execute</span><span class="p">(</span><span class="n">GameActor</span><span class="o">&amp;</span> <span class="n">actor</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">actor</span><span class="p">.</span><span class="n">Move</span><span class="p">(</span><span class="n">dx</span><span class="p">,</span> <span class="n">dy</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">Undo</span><span class="p">(</span><span class="n">GameActor</span><span class="o">&amp;</span> <span class="n">actor</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
        <span class="c1">// 정반대 방향으로 이동하여 원상복구</span>
        <span class="n">actor</span><span class="p">.</span><span class="n">Move</span><span class="p">(</span><span class="o">-</span><span class="n">dx</span><span class="p">,</span> <span class="o">-</span><span class="n">dy</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="3-커맨드-기록command-history-관리-실행된-커맨드들을-스택stack에-저장해두고-실행-취소-요청이-오면-스택에서-가장-마지막-커맨드를-꺼내-undo를-호출한다"><span class="mr-2">3. 커맨드 기록(Command History) 관리 실행된 커맨드들을 스택(stack)에 저장해두고, ‘실행 취소’ 요청이 오면 스택에서 가장 마지막 커맨드를 꺼내 Undo를 호출한다.</span><a href="#3-커맨드-기록command-history-관리-실행된-커맨드들을-스택stack에-저장해두고-실행-취소-요청이-오면-스택에서-가장-마지막-커맨드를-꺼내-undo를-호출한다" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ICommand</span><span class="o">&gt;&gt;</span> <span class="n">commandHistory</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">ExecuteAndStore</span><span class="p">(</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ICommand</span><span class="o">&gt;</span> <span class="n">command</span><span class="p">,</span> <span class="n">GameActor</span><span class="o">&amp;</span> <span class="n">actor</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">command</span><span class="o">-&gt;</span><span class="n">Execute</span><span class="p">(</span><span class="n">actor</span><span class="p">);</span>
    <span class="n">commandHistory</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">command</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">UndoLastCommand</span><span class="p">(</span><span class="n">GameActor</span><span class="o">&amp;</span> <span class="n">actor</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">commandHistory</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
        <span class="n">commandHistory</span><span class="p">.</span><span class="n">back</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Undo</span><span class="p">(</span><span class="n">actor</span><span class="p">);</span>
        <span class="n">commandHistory</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li>이제 ExecuteAndStore와 UndoLastCommand 함수를 이용해 무한한 실행 취소/다시 실행(Redo) 기능을 구현할 수 있다.</ul><h1 id="요약">요약</h1><ul><li>커맨드 패턴은 <strong>‘무엇’</strong>을 할 것인지(커맨드 객체)와 ‘누가’ 할 것인지(수신자 객체)를 분리하여, ‘언제’, ‘어떻게’ 할 것인지(호출자 객체)를 자유롭게 결정할 수 있게 한다.<li>구성 요소:<ul><li><code class="language-plaintext highlighter-rouge">Command</code>: 모든 커맨드의 공통 인터페이스. (ICommand)<li><code class="language-plaintext highlighter-rouge">ConcreteCommand</code>: 실제 요청을 캡슐화한 객체. (JumpCommand, MoveCommand)<li><code class="language-plaintext highlighter-rouge">Receiver</code>: 요청을 실제로 수행하는 객체. (GameActor)<li><code class="language-plaintext highlighter-rouge">Invoker</code>: 커맨드를 실행시키는 객체. (InputHandler)</ul></ul><h2 id="장점"><span class="mr-2">장점</span><a href="#장점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p><code class="language-plaintext highlighter-rouge">요청자와 수행자의 분리</code>: 두 객체 간의 결합도를 낮춰 시스템을 유연하게 만든다.</p><li><p><code class="language-plaintext highlighter-rouge">커맨드의 객체화</code>: 커맨드를 큐에 저장(액션 시퀀싱), 로그로 기록(리플레이), 네트워크로 전송하는 등 다양하게 활용할 수 있다.</p><li><p><code class="language-plaintext highlighter-rouge">Undo/Redo 기능 구현</code>: 커맨드에 Undo 로직을 추가하여 실행 취소/다시 실행 기능을 쉽게 구현할 수 있다.</p><li><p><code class="language-plaintext highlighter-rouge">확장성</code>: 새로운 커맨드를 추가할 때 기존 코드를 수정할 필요 없이 새로운 ICommand 구현체만 만들면 된다.</p><li><p>이 패턴은 플레이어 입력 처리, AI 행동 결정, UI 버튼 이벤트, 매크로 및 리플레이 시스템, 턴제 게임의 행동 이력 관리 등 게임 개발의 수많은 영역에서 핵심적인 역할을 한다.</p></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4/'>디자인 패턴</a>, <a href='/categories/%ED%96%89%ED%83%9C-%ED%8C%A8%ED%84%B4/'>행태 패턴</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/design-pattern/" class="post-tag no-text-decoration" >design pattern</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%EC%BB%A4%EB%A7%A8%EB%93%9C+%ED%8C%A8%ED%84%B4+-+yjh9317&url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EC%25BB%25A4%25EB%25A7%25A8%25EB%2593%259C-%25ED%258C%25A8%25ED%2584%25B4%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%EC%BB%A4%EB%A7%A8%EB%93%9C+%ED%8C%A8%ED%84%B4+-+yjh9317&u=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EC%25BB%25A4%25EB%25A7%25A8%25EB%2593%259C-%25ED%258C%25A8%25ED%2584%25B4%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EC%25BB%25A4%25EB%25A7%25A8%25EB%2593%259C-%25ED%258C%25A8%25ED%2584%25B4%2F&text=%EC%BB%A4%EB%A7%A8%EB%93%9C+%ED%8C%A8%ED%84%B4+-+yjh9317" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Gameplay-Param/">GameplayTag Param</a><li><a href="/posts/Device/">Device</a><li><a href="/posts/SwapChain/">SwapChain</a><li><a href="/posts/VertexBuffer/">VertexBuffer</a><li><a href="/posts/IndexBuffer/">IndexBuffer</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%EC%B1%85%EC%9E%84-%EC%82%AC%EC%8A%AC-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1685631600" data-df="ll" > Jun 2, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>책임 사슬 패턴</h3><div class="text-muted small"><p> 책임 사슬 패턴 요청을 처리할 수 있는 객체들의 사슬(chain)을 만들어, 요청이 처리될 때까지 이 사슬을 따라 객체들이 차례대로 요청을 확인하게 만드는 행위 디자인 패턴이다. 요청을 보낸 객체(Sender)는 어떤 객체가 그 요청을 처리할지 알 필요가 없다. 요청은 사슬의 첫 번째 객체에게 전달되고, 해당 객체는 요청을 처...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%9D%B8%ED%84%B0%ED%94%84%EB%A6%AC%ED%84%B0-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1686150000" data-df="ll" > Jun 8, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>인터프리터 패턴</h3><div class="text-muted small"><p> 인터프리터 패턴 특정 ‘언어’에 대한 문법을 정의하고, 그 언어로 작성된 문장을 해석(interpret)하는 해석기를 제공하는 행위 디자인 패턴 쉽게 말해, 우리가 직접 정의한 간단한 규칙이나 언어를 이해하고 실행하는 엔진을 만드는 방법이다. 게임 개발에서는 NPC의 행동을 정의하는 간단한 스크립트, 퀘스트의 완료...</p></div></div></a></div><div class="card"> <a href="/posts/%EB%B0%98%EB%B3%B5%EC%9E%90-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1686582000" data-df="ll" > Jun 13, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>반복자 패턴</h3><div class="text-muted small"><p> 반복자 패턴 컬렉션(배열, 리스트, 트리 등)의 내부 구조를 외부에 노출하지 않으면서, 그 요소들을 순차적으로 접근할 수 있는 방법을 제공하는 행위 디자인 패턴 for 루프를 사용해 std::vector의 모든 요소를 출력하는 것이 바로 이 패턴의 가장 흔한 예다. 반복자 패턴의 핵심은, 데이터 구조가 어떻게 생겼는지(배열...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EC%B1%85%EC%9E%84-%EC%82%AC%EC%8A%AC-%ED%8C%A8%ED%84%B4/" class="btn btn-outline-primary" prompt="Older"><p>책임 사슬 패턴</p></a> <a href="/posts/%EC%9D%B8%ED%84%B0%ED%94%84%EB%A6%AC%ED%84%B0-%ED%8C%A8%ED%84%B4/" class="btn btn-outline-primary" prompt="Newer"><p>인터프리터 패턴</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Yang jeong hyeon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
