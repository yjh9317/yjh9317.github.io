<!DOCTYPE html><html lang="ko" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="가능하면 항상 constexpr을 사용하라" /><meta property="og:locale" content="ko" /><meta name="description" content="constexpr을 객체에 적용했을 때에는 본질적으로 const의 강화 버전처럼 작용하지만, 함수에 적용했을 때에는 상당히 다른 의미로 작용한다." /><meta property="og:description" content="constexpr을 객체에 적용했을 때에는 본질적으로 const의 강화 버전처럼 작용하지만, 함수에 적용했을 때에는 상당히 다른 의미로 작용한다." /><link rel="canonical" href="https://yjh9317.github.io/posts/15.Use-constexpr-whenever-possible/" /><meta property="og:url" content="https://yjh9317.github.io/posts/15.Use-constexpr-whenever-possible/" /><meta property="og:site_name" content="yjh9317" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-03-24T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="가능하면 항상 constexpr을 사용하라" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-04-09T02:11:35+09:00","datePublished":"2024-03-24T00:00:00+09:00","description":"constexpr을 객체에 적용했을 때에는 본질적으로 const의 강화 버전처럼 작용하지만, 함수에 적용했을 때에는 상당히 다른 의미로 작용한다.","headline":"가능하면 항상 constexpr을 사용하라","mainEntityOfPage":{"@type":"WebPage","@id":"https://yjh9317.github.io/posts/15.Use-constexpr-whenever-possible/"},"url":"https://yjh9317.github.io/posts/15.Use-constexpr-whenever-possible/"}</script><title>가능하면 항상 constexpr을 사용하라 | yjh9317</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="yjh9317"><meta name="application-name" content="yjh9317"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> </a></div><div class="site-title mt-3"> <a href="/">yjh9317</a></div><div class="site-subtitle font-italic">코딩열심히하려는사람</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/yjh9317" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>가능하면 항상 constexpr을 사용하라</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>가능하면 항상 constexpr을 사용하라</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1711206000" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Mar 24, 2024 </em> </span> <span> Updated <em class="" data-ts="1712596295" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Apr 9, 2024 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">Yang jeong hyeon</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1692 words"> <em>9 min</em> read</span></div></div></div><div class="post-content"><ul><li>constexpr을 객체에 적용했을 때에는 본질적으로 const의 강화 버전처럼 작용하지만, 함수에 적용했을 때에는 상당히 다른 의미로 작용한다.</ul><h1 id="constexpr-개념">constexpr 개념</h1><ul><li><p><code class="language-plaintext highlighter-rouge">constexpr은 어떠한 값이 단지 상수일 뿐만 아니라 컴파일 시점에 알려진다는 점을 나타낸다.</code></p><li><p>그러나 개념만 이해하면 constexpr을 함수에 적용할 때 상황이 미묘해지기 때문에 부족하다.</p><li><p>결론부터 말하면, <code class="language-plaintext highlighter-rouge">constexpr 함수의 결과가 const가 아닐 수 있다는 점과 컴파일 시점에서 알려지지 않을 수 있다는 점은 constexpr의 장점이다.</code></p></ul><p><br /></p><h1 id="constexpr-객체의-경우">constexpr 객체의 경우</h1><ul><li><p>constexpr이 적용된 객체는 실제로 const이며, 값은 실제로 컴파일 시점에서 알려진다.</p><li><p>컴파일 시점에 알려지는 값들에는 특별한 권한이 있는데, 그 중 하나는 <code class="language-plaintext highlighter-rouge">읽기 전용 메모리에 배치될 수 있다.</code></p><ul><li>이 점은 내장형 시스템 개발자에게 중요할 수 있다.</ul><li><p>상수이자 컴파일 시점에서 알려진 정수 값을 C++에서 <code class="language-plaintext highlighter-rouge">정수 상수 표현식(integral constant expression)</code>이 요구되는 문맥에서 사용할 수 있다는 것이다.</p></ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="c1">// constexpr의 경우</span>
<span class="kt">int</span> <span class="n">sz</span><span class="p">;</span>                         <span class="c1">// non-constexpr 변수</span>
<span class="k">constexpr</span> <span class="k">auto</span> <span class="n">arraySize1</span> <span class="o">=</span> <span class="n">sz</span><span class="p">;</span> <span class="c1">// 오류</span>
<span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">sz</span><span class="o">&gt;</span> <span class="n">data1</span><span class="p">;</span>      <span class="c1">// 오류</span>

<span class="k">constexpr</span> <span class="k">auto</span> <span class="n">arraySize2</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>     <span class="c1">// 통과,10은 컴파일 시점 상수</span>
<span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">arraySize2</span><span class="o">&gt;</span> <span class="n">data2</span><span class="p">;</span>  <span class="c1">// 통과</span>

<span class="c1">// const의 경우</span>
<span class="kt">int</span> <span class="n">sz</span><span class="p">;</span>
<span class="k">const</span> <span class="k">auto</span> <span class="n">arraySize</span> <span class="o">=</span> <span class="n">sz</span><span class="p">;</span>       <span class="c1">// 통과</span>
<span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">arraySize</span><span class="o">&gt;</span> <span class="n">data</span><span class="p">;</span> <span class="c1">// 오류, 컴파일 시점에 알려지지 않음</span>
</pre></table></code></div></div><ul><li>간단히 말해, <code class="language-plaintext highlighter-rouge">모든 constexpr 객체는 const이지만, 모든 const 객체가 constexpr인 것은 아니다.</code></ul><p><br /></p><h2 id="constexpr-함수"><span class="mr-2">constexpr 함수</span><a href="#constexpr-함수" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p>constexpr 객체의 사용에 있어 constexpr 함수가 관여하면 좀 더 흥미로워 진다.</p><li><p>constexpr 함수에 대한 관점은 아래와 같다.</p></ul><div class="language-yaml highlighter-rouge"><div class="code-header"> <span data-label-text="YAML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="s">1.  컴파일 시점 상수를 요구하는 문맥에 constexpr 함수를 사용할 수 있다.</span>
    <span class="s">그런 문맥에서, 만일 constexpr 함수에 넘겨주는 인수의 값이 컴파일 시점에서</span>
    <span class="s">알려진다면, 함수의 결과는 컴파일 도중에 계산된다.</span> 
    <span class="s">알려지지 않는다면 컴파일이 거부된다.</span>

<span class="s">2.  컴파일 시점에서 알려지지 않는 하나 이상의 값들로 constexpr 함수를 호출하면</span>
    <span class="s">함수는 보통의 함수처럼 작동한다. 즉, 그 결과는 실행시점에서 계산된다.</span>
    <span class="s">이는 같은 연산을 수행하는 함수를 두 버전(컴파일 상수버전과 일반 버전)을</span>
    <span class="s">나누어서 구현할 필요가 없음을 뜻하고 constexpr함수를 두 가지 용도로 사용하면 된다.</span>
</pre></table></code></div></div><ul><li>만약 컴파일을 위해 constexpr 버전의 pow값이 필요하다고 가정한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">constexpr</span>
<span class="kt">int</span> <span class="n">pow</span><span class="p">(</span><span class="kt">int</span> <span class="n">base</span><span class="p">,</span> <span class="kt">int</span> <span class="n">exp</span><span class="p">)</span> <span class="k">noexcept</span> <span class="c1">// 예외 X</span>
<span class="p">{</span>
  <span class="p">...</span>
<span class="p">}</span>

<span class="k">constexpr</span> <span class="k">auto</span> <span class="n">numConds</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>  <span class="c1">// 조건 개수</span>

<span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="n">pow</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="n">numConds</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">results</span><span class="p">;</span> <span class="c1">// 3^numConds개 요소를 담음</span>
</pre></table></code></div></div><ul><li><p>pow 앞에 constexpr이 있다고 하여 반드시 const값을 돌려주는 것이 아니라 그 constexpr은 오직 base와 exp가 컴파일 시점 상수일 때만 pow의 결과를 컴파일 시점 상수로 사용할 수 있다는 뜻이다.</p><ul><li>즉, <code class="language-plaintext highlighter-rouge">매개변수도 constexpr이여야 결과도 constexpr이다.</code></ul></ul><p><br /></p><h2 id="런타임-상황의-constexpr"><span class="mr-2">런타임 상황의 constexpr</span><a href="#런타임-상황의-constexpr" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>만약 매개 변수가 컴파일 시점 상수가 아니라면 pow의 결과도 런타임에서 계산될 수 있다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">auto</span> <span class="n">base</span> <span class="o">=</span> <span class="n">readFromDB</span><span class="p">(</span><span class="s">"base"</span><span class="p">);</span>
<span class="k">auto</span> <span class="n">exp</span> <span class="o">=</span> <span class="n">readFromDB</span><span class="p">(</span><span class="s">"exponent"</span><span class="p">);</span>

<span class="k">auto</span> <span class="n">baseToExp</span> <span class="o">=</span> <span class="n">pow</span><span class="p">(</span><span class="n">base</span><span class="p">,</span> <span class="n">exp</span><span class="p">);</span>  <span class="c1">// 런타임에서 pow함수 호출</span>
</pre></table></code></div></div><ul><li><p>constexpr 함수는 컴파일 시점 값들로 호출했을 때 반드시 컴파일 시점 결과를 산출할 수 있어야 하므로, 구현에 제약이 따른다.</p><li><p>하지만 C++11과 C++14의 제약이 조금 다르다.</p></ul><h3 id="c11"><span class="mr-2">C++11</span><a href="#c11" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>C++11에서 constexpr 함수는 실행 가능 문장이 “많아야” 하나이고 보통의 경우 그 문장은 return이다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">constexpr</span> <span class="kt">int</span> <span class="nf">pow</span><span class="p">(</span><span class="kt">int</span> <span class="n">base</span><span class="p">,</span> <span class="kt">int</span> <span class="n">exp</span><span class="p">)</span> <span class="k">noexcept</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span><span class="n">exp</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="n">base</span> <span class="o">*</span> <span class="n">pow</span><span class="p">(</span><span class="n">base</span><span class="p">,</span><span class="n">exp</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="c14"><span class="mr-2">C++14</span><a href="#c14" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>하지만 C++14에서는 constexpr 함수에 대한 제약이 상당히 느슨해져서 다음과 같은 구현이 허용된다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">constexpr</span> <span class="kt">int</span> <span class="n">pow</span><span class="p">(</span><span class="kt">int</span> <span class="n">base</span><span class="p">,</span> <span class="kt">int</span> <span class="n">exp</span><span class="p">)</span> <span class="k">noexcept</span>
<span class="p">{</span>
  <span class="k">auto</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span> <span class="n">exp</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="n">result</span> <span class="o">*=</span> <span class="n">base</span><span class="p">;</span>

  <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><h3 id="리터럴-형식"><span class="mr-2">리터럴 형식</span><a href="#리터럴-형식" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p><code class="language-plaintext highlighter-rouge">constexpr 함수는 반드시 리터럴 형식을 받고 돌려주어야 한다.</code></p><li><p>C++11에서 void를 제외한 모든 내장 형식이 리터럴 형식이고, 사용자 형식도 적절하게 사용하면 리터럴 형식으로 만들 수 있다.</p></ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Point</span><span class="p">{</span>
<span class="nl">public:</span>
  <span class="c1">// 생성자</span>
  <span class="k">constexpr</span> <span class="n">Point</span><span class="p">(</span><span class="kt">double</span> <span class="n">xVal</span><span class="p">,</span><span class="kt">double</span> <span class="n">yVal</span><span class="p">)</span> <span class="k">noexcept</span>
  <span class="o">:</span> <span class="n">x</span><span class="p">(</span><span class="n">xVal</span><span class="p">),</span> <span class="n">y</span><span class="p">(</span><span class="n">yVal</span><span class="p">)</span> <span class="p">{}</span>

  <span class="c1">// 함수</span>
  <span class="k">constexpr</span> <span class="kt">double</span> <span class="n">xValue</span><span class="p">()</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="p">{</span> <span class="k">return</span> <span class="n">x</span><span class="p">;</span> <span class="p">}</span>
  <span class="k">constexpr</span> <span class="kt">double</span> <span class="n">yValue</span><span class="p">()</span> <span class="k">const</span> <span class="k">noexcept</span> <span class="p">{</span> <span class="k">return</span> <span class="n">y</span><span class="p">;</span> <span class="p">}</span>

<span class="nl">private:</span>
  <span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
<span class="p">};</span>
</pre></table></code></div></div><ul><li><p>생성자를 constexpr로 선언할 수 있는 이유는 인수들이 컴파일 시점에 알려진다면 생성된 Point 객체의 자료 멤버들 값도 컴파일 시점에서 알려질 수 있기 때문이다.</p><li><p>결과적으로, Point의 Get함수들은 다른 constexpr 객체를 초기화하는 constexpr 함수를 작성하는 것이 간능하다</p></ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">constexpr</span> <span class="n">Point</span> <span class="n">midpoint</span><span class="p">(</span><span class="k">const</span> <span class="n">Point</span><span class="o">&amp;</span> <span class="n">p1</span><span class="p">,</span> <span class="k">const</span> <span class="n">Point</span><span class="o">&amp;</span> <span class="n">p2</span><span class="p">)</span> <span class="k">noexcept</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span> <span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="n">xValue</span><span class="p">()</span> <span class="o">+</span> <span class="n">p2</span><span class="p">.</span><span class="n">xValue</span><span class="p">())</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span>
            <span class="p">(</span><span class="n">p1</span><span class="p">.</span><span class="n">yValue</span><span class="p">()</span> <span class="o">+</span> <span class="n">p2</span><span class="p">.</span><span class="n">yValue</span><span class="p">())</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">};</span>
<span class="p">}</span>

<span class="k">constexpr</span> <span class="k">auto</span> <span class="n">mid</span> <span class="o">=</span> <span class="n">midpoint</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span><span class="n">p2</span><span class="p">);</span>
</pre></table></code></div></div><p><br /></p><h1 id="constepxr는-객체나-함수의-인터페이스의-일부">constepxr는 객체나 함수의 인터페이스의 일부</h1><ul><li><p>constexpr을 지정한다는 것은 <code class="language-plaintext highlighter-rouge">이 함수(또는 객체)를 C++이 상수 표현식을 요구하는 문맥에서 사용할 수 있음</code>을 의미하는 것이다.</p><li><p>어떤 객체나 함수를 constexpr로 선언한다면, 클라이언트는 그런 문맥으로 사용할 것이다.</p><li><p>나중에 바꾸면 미정의 행동이 되어버리기 때문에 가능한 한 항상 constexpr을 최대한 오래 유지하라는 의미이다.</p></ul><p><br /></p><h1 id="결론"><strong>결론</strong></h1><blockquote><p>이것만은 잊지 말자!</p><ul class="prompt-tip"><li><p>constexpr 객체는 const이며, 컴파일 도중에 알려지는 값들로 초기화한다</p><li><p>constexpr 함수는 그 값이 컴파일 도중에 알려지는 인수들로 호출하는 경우 컴파일 시점 결과를 산출한다</p><li><p>constexpr 객체나 함수는 non-constexpr 객체,함수보다 광범위한 문맥에서 사용할 수 있다</p><li><p>constexpr은 객체나 함수의 인터페이스의 일부이다.</p></ul></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/modern-effective-c/'>Modern Effective C++</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/modern-effective-c/" class="post-tag no-text-decoration" >modern effective c++</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%EA%B0%80%EB%8A%A5%ED%95%98%EB%A9%B4+%ED%95%AD%EC%83%81+constexpr%EC%9D%84+%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC+-+yjh9317&url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F15.Use-constexpr-whenever-possible%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%EA%B0%80%EB%8A%A5%ED%95%98%EB%A9%B4+%ED%95%AD%EC%83%81+constexpr%EC%9D%84+%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC+-+yjh9317&u=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F15.Use-constexpr-whenever-possible%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F15.Use-constexpr-whenever-possible%2F&text=%EA%B0%80%EB%8A%A5%ED%95%98%EB%A9%B4+%ED%95%AD%EC%83%81+constexpr%EC%9D%84+%EC%82%AC%EC%9A%A9%ED%95%98%EB%9D%BC+-+yjh9317" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Gameplay-Param/">GameplayTag Param</a><li><a href="/posts/Device/">Device</a><li><a href="/posts/SwapChain/">SwapChain</a><li><a href="/posts/VertexBuffer/">VertexBuffer</a><li><a href="/posts/IndexBuffer/">IndexBuffer</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/2.Understand-auto-type-deduction/"><div class="card-body"> <em class="small" data-ts="1705503600" data-df="ll" > Jan 18, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>auto의 형식 연역 규칙을 숙지하라</h3><div class="text-muted small"><p> auto와 템플릿 auto 형식은 한가지 예외만 빼면 템플릿과 똑같이 작동한다. auto 형식 연역과 템플릿 형식 연역 사이에는 직접적인 대응 관계가 존재한다. // 템플릿 template&amp;lt;typename T&amp;gt; void f(ParamType param); f(expr); auto를 이용한...</p></div></div></a></div><div class="card"> <a href="/posts/3.Understand-decltype/"><div class="card-body"> <em class="small" data-ts="1705762800" data-df="ll" > Jan 21, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>decltype의 작동 방식을 숙지하라</h3><div class="text-muted small"><p> decltype은 주어진 이름이나 표현식의 형식을 알려주는 키워드 하지만 가끔 예상밖의 결과를 제공 대부분의 경우 템플릿과 auto와 달리 decltype은 그대로의 결과를 도출한다. const int i = 0; // decltype(i)는 const int bool f(c...</p></div></div></a></div><div class="card"> <a href="/posts/4.Know-how-to-view-deduced-types/"><div class="card-body"> <em class="small" data-ts="1706022000" data-df="ll" > Jan 24, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>연역된 형식을 파악하는 방법을 알아두라.</h3><div class="text-muted small"><p> 형식 연역 결과를 직접 확인하는 수단은 필요한 시점에 따라 다르다. 이번 항목에선 3가지 시점으로 살펴본다. IDE 편집기 IDE 코드 편집기는 프로그램 개체(변수,매개변수,함수 등)을 마우스 커서에 올리면 개채 형식을 표현해준다. 이런 일이 가능하려면 코드가 어느정도 컴파일 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/14.Declare-functions-noexcept-if-they-won-t-emit-exceptions/" class="btn btn-outline-primary" prompt="Older"><p>예외를 방출하지 않을 함수는 noexcept로 선언하라</p></a> <a href="/posts/Niagara-&&-Emitter/" class="btn btn-outline-primary" prompt="Newer"><p>Niagara && Emitter</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Yang jeong hyeon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
