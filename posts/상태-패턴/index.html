<!DOCTYPE html><html lang="ko" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="상태 패턴" /><meta property="og:locale" content="ko" /><meta name="description" content="상태 패턴" /><meta property="og:description" content="상태 패턴" /><link rel="canonical" href="https://yjh9317.github.io/posts/%EC%83%81%ED%83%9C-%ED%8C%A8%ED%84%B4/" /><meta property="og:url" content="https://yjh9317.github.io/posts/%EC%83%81%ED%83%9C-%ED%8C%A8%ED%84%B4/" /><meta property="og:site_name" content="yjh9317" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-06-29T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="상태 패턴" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-06-17T15:34:32+09:00","datePublished":"2023-06-29T00:00:00+09:00","description":"상태 패턴","headline":"상태 패턴","mainEntityOfPage":{"@type":"WebPage","@id":"https://yjh9317.github.io/posts/%EC%83%81%ED%83%9C-%ED%8C%A8%ED%84%B4/"},"url":"https://yjh9317.github.io/posts/%EC%83%81%ED%83%9C-%ED%8C%A8%ED%84%B4/"}</script><title>상태 패턴 | yjh9317</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="yjh9317"><meta name="application-name" content="yjh9317"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> </a></div><div class="site-title mt-3"> <a href="/">yjh9317</a></div><div class="site-subtitle font-italic">코딩열심히하려는사람</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/yjh9317" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>상태 패턴</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>상태 패턴</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1687964400" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 29, 2023 </em> </span> <span> Updated <em class="" data-ts="1750142072" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 17, 2025 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">Yang jeong hyeon</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2099 words"> <em>11 min</em> read</span></div></div></div><div class="post-content"><h1 id="상태-패턴">상태 패턴</h1><ul><li><p>객체의 내부 <strong>상태(State)</strong>가 바뀜에 따라, 객체의 <strong>행동(Behavior)</strong>이 마치 클래스가 바뀐 것처럼 달라지게 하는 행위 디자인 패턴</p><li>if-else나 switch 문으로 상태에 따른 모든 행동을 분기 처리하는 복잡한 조건문을 피하고, 상태 자체를 객체로 캡슐화하는 것이 이 패턴의 핵심이다.<li><p>객체는 현재 자신의 상태를 나타내는 ‘상태 객체’를 참조하며, 실제 행동은 이 상태 객체에 위임한다.</p><li>게임 개발에서는 캐릭터나 몬스터의 AI, 플레이어의 조작 상태(서있기, 달리기, 점프 등), 게임의 국면(메뉴, 플레이 중, 게임 오버) 등을 관리하는 <strong>상태 머신(Finite State Machine, FSM)</strong>을 구현할 때 이 패턴이 핵심적인 역할을 한다.</ul><h2 id="시나리오-간단한-몬스터-ai-구현하기"><span class="mr-2">시나리오: 간단한 몬스터 AI 구현하기</span><a href="#시나리오-간단한-몬스터-ai-구현하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p>순찰(Patrol), 추격(Chase), 공격(Attack) 세 가지 상태를 가지는 간단한 몬스터 AI를 구현해야 한다.</p><ul><li>순찰: 평소에는 정해진 경로를 따라 순찰한다.<li>추격: 플레이어가 일정 거리 안에 들어오면 플레이어를 쫓아간다.<li>공격: 플레이어가 공격 범위 안에 들어오면 공격한다.</ul></ul><h3 id="문제점-복잡한-조건문"><span class="mr-2">문제점: 복잡한 조건문</span><a href="#문제점-복잡한-조건문" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>상태 패턴이 없다면, Monster의 Update() 메서드는 수많은 if-else 문으로 가득 차게 된다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="c1">// 안티 패턴: 모든 상태 로직이 하나의 메서드에 얽혀있음</span>
<span class="kt">void</span> <span class="n">Monster</span><span class="o">::</span><span class="n">Update</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">float</span> <span class="n">distance_to_player</span> <span class="o">=</span> <span class="n">GetDistanceToPlayer</span><span class="p">();</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">distance_to_player</span> <span class="o">&gt;</span> <span class="n">SIGHT_RANGE</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 순찰 로직...</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">distance_to_player</span> <span class="o">&gt;</span> <span class="n">ATTACK_RANGE</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 추격 로직...</span>
        <span class="c1">// 만약 체력이 20% 이하면 도망가는 로직 추가? if (health &lt; 0.2f) ...</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// 공격 로직...</span>
    <span class="p">}</span>
    <span class="c1">// ... 새로운 상태 '도망'이 추가되면 이 코드는 더욱 끔찍해진다.</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li>이 코드는 새로운 상태가 추가되거나 상태 전환 조건이 복잡해질수록 가독성과 유지보수성이 급격히 떨어진다.</ul><h2 id="해결책-1-간단한-상태-머신-enum과-switch문"><span class="mr-2">해결책 1: 간단한 상태 머신 (Enum과 Switch문)</span><a href="#해결책-1-간단한-상태-머신-enum과-switch문" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>게임 개발 현장에서 가장 흔히 사용되는 간단한 상태 머신 구현 방식이다.</ul><h3 id="1-상태state와-몬스터context-정의"><span class="mr-2">1. 상태(State)와 몬스터(Context) 정의</span><a href="#1-상태state와-몬스터context-정의" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>먼저 몬스터가 가질 수 있는 상태들을 enum class로 명확하게 정의한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">enum</span> <span class="k">class</span> <span class="nc">AIState</span> <span class="p">{</span>
    <span class="n">Patrolling</span><span class="p">,</span>
    <span class="n">Chasing</span><span class="p">,</span>
    <span class="n">Attacking</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">Monster</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">AIState</span> <span class="n">current_state</span> <span class="o">=</span> <span class="n">AIState</span><span class="o">::</span><span class="n">Patrolling</span><span class="p">;</span>

    <span class="c1">// 각 상태에 해당하는 행동 메서드</span>
    <span class="kt">void</span> <span class="n">UpdatePatrol</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"[순찰] 어슬렁거린다."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="c1">// 플레이어가 시야에 들어오면 추격 상태로 전환</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">IsPlayerInSight</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"플레이어 발견! 추격 시작!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">AIState</span><span class="o">::</span><span class="n">Chasing</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">UpdateChase</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"[추격] 플레이어를 향해 달려간다."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="c1">// 플레이어가 공격 범위에 들어오면 공격 상태로 전환</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">IsPlayerInAttackRange</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"공격 범위에 들어왔다! 공격!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">AIState</span><span class="o">::</span><span class="n">Attacking</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="c1">// 플레이어가 시야에서 벗어나면 순찰 상태로 복귀</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">IsPlayerInSight</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"플레이어를 놓쳤다. 순찰로 복귀."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">AIState</span><span class="o">::</span><span class="n">Patrolling</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">UpdateAttack</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* 공격 로직 및 상태 전환 */</span> <span class="p">}</span>

<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">Update</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 현재 상태에 따라 적절한 행동 메서드를 호출</span>
        <span class="k">switch</span> <span class="p">(</span><span class="n">current_state</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">case</span> <span class="n">AIState</span><span class="o">::</span><span class="n">Patrolling</span><span class="p">:</span> <span class="n">UpdatePatrol</span><span class="p">();</span> <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="n">AIState</span><span class="o">::</span><span class="n">Chasing</span><span class="p">:</span>    <span class="n">UpdateChase</span><span class="p">();</span>  <span class="k">break</span><span class="p">;</span>
            <span class="k">case</span> <span class="n">AIState</span><span class="o">::</span><span class="n">Attacking</span><span class="p">:</span>  <span class="n">UpdateAttack</span><span class="p">();</span> <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// 예시를 위한 더미 함수</span>
    <span class="kt">bool</span> <span class="n">IsPlayerInSight</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> <span class="p">}</span>
    <span class="kt">bool</span> <span class="n">IsPlayerInAttackRange</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><ul><li>Update() 메서드는 더 이상 복잡한 조건문 대신, 현재 상태(current_state)에 따라 적절한 Update…() 메서드를 호출하는 깔끔한 switch문으로 바뀐다.<li>상태에 따른 행동과 상태 전환 로직이 각 Update…() 메서드 안에 캡슐화되어 이전보다 훨씬 구조화된 코드가 되었다.</ul><h2 id="해결책-2-클래스-기반-상태-패턴-gof-방식"><span class="mr-2">해결책 2: 클래스 기반 상태 패턴 (GoF 방식)</span><a href="#해결책-2-클래스-기반-상태-패턴-gof-방식" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>상태가 더 복잡해지고, 각 상태가 고유한 데이터와 복잡한 로직을 가져야 할 때는 각 상태를 별도의 클래스로 만드는 것이 더 효과적이다.<li>이것이 디자인 패턴의 교과서(GoF)에서 제안하는 방식이다.</ul><h3 id="1-상태state-인터페이스와-구체적인-상태-클래스-정의"><span class="mr-2">1. 상태(State) 인터페이스와 구체적인 상태 클래스 정의</span><a href="#1-상태state-인터페이스와-구체적인-상태-클래스-정의" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>모든 상태 클래스가 구현해야 할 공통 인터페이스 IState를 정의한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">Monster</span><span class="p">;</span> <span class="c1">// 전방 선언</span>

<span class="c1">// 상태의 공통 인터페이스</span>
<span class="k">class</span> <span class="nc">IState</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">IState</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
    <span class="c1">// 이 상태에 진입할 때 호출될 메서드</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Enter</span><span class="p">(</span><span class="n">Monster</span><span class="o">&amp;</span> <span class="n">monster</span><span class="p">)</span> <span class="p">{}</span>
    <span class="c1">// 매 프레임 실행될 메서드</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Execute</span><span class="p">(</span><span class="n">Monster</span><span class="o">&amp;</span> <span class="n">monster</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="c1">// 이 상태를 떠날 때 호출될 메서드</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Exit</span><span class="p">(</span><span class="n">Monster</span><span class="o">&amp;</span> <span class="n">monster</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">};</span>
</pre></table></code></div></div><ul><li>이제 각 AI 상태를 이 인터페이스를 구현하는 별도의 클래스로 만든다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="c1">// 구체적인 상태 클래스들</span>
<span class="k">class</span> <span class="nc">PatrolState</span> <span class="o">:</span> <span class="k">public</span> <span class="n">IState</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">Execute</span><span class="p">(</span><span class="n">Monster</span><span class="o">&amp;</span> <span class="n">monster</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"[순찰] 어슬렁거린다."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">monster</span><span class="p">.</span><span class="n">IsPlayerInSight</span><span class="p">())</span> <span class="p">{</span>
            <span class="c1">// 몬스터에게 상태를 변경하라고 요청한다.</span>
            <span class="n">monster</span><span class="p">.</span><span class="n">ChangeState</span><span class="p">(</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">ChaseState</span><span class="o">&gt;</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">ChaseState</span> <span class="o">:</span> <span class="k">public</span> <span class="n">IState</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">Enter</span><span class="p">(</span><span class="n">Monster</span><span class="o">&amp;</span> <span class="n">monster</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"플레이어 발견! 추격 시작!"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">Execute</span><span class="p">(</span><span class="n">Monster</span><span class="o">&amp;</span> <span class="n">monster</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"[추격] 플레이어를 향해 달려간다."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">monster</span><span class="p">.</span><span class="n">IsPlayerInSight</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">monster</span><span class="p">.</span><span class="n">ChangeState</span><span class="p">(</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">PatrolState</span><span class="o">&gt;</span><span class="p">());</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><ul><li><ol><li>컨텍스트(Context) 클래스 수정</ol><li>Monster 클래스는 이제 상태를 나타내는 enum 대신, 현재 상태 객체에 대한 포인터를 가진다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="c1">// 컨텍스트 클래스: 현재 상태를 관리하고, 행동을 상태 객체에 위임한다.</span>
<span class="k">class</span> <span class="nc">Monster</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">IState</span><span class="o">&gt;</span> <span class="n">current_state</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">Monster</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 초기 상태를 설정한다.</span>
        <span class="n">current_state</span> <span class="o">=</span> <span class="n">make_unique</span><span class="o">&lt;</span><span class="n">PatrolState</span><span class="o">&gt;</span><span class="p">();</span>
        <span class="n">current_state</span><span class="o">-&gt;</span><span class="n">Enter</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>
    
    <span class="kt">void</span> <span class="n">ChangeState</span><span class="p">(</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">IState</span><span class="o">&gt;</span> <span class="n">new_state</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">current_state</span><span class="o">-&gt;</span><span class="n">Exit</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>
        <span class="n">current_state</span> <span class="o">=</span> <span class="n">move</span><span class="p">(</span><span class="n">new_state</span><span class="p">);</span>
        <span class="n">current_state</span><span class="o">-&gt;</span><span class="n">Enter</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">Update</span><span class="p">()</span> <span class="p">{</span>
        <span class="c1">// 모든 행동을 현재 상태 객체에 위임한다.</span>
        <span class="n">current_state</span><span class="o">-&gt;</span><span class="n">Execute</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// 더미 함수</span>
    <span class="kt">bool</span> <span class="n">IsPlayerInSight</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span> <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><ul><li>이제 Monster의 Update() 메서드는 current_state-&gt;Execute(*this); 단 한 줄로 극도로 단순해졌다.<li>모든 복잡한 로직은 각 …State 클래스 내부로 완전히 캡슐화되었다. 새로운 상태 ‘도망(FleeState)’을 추가하고 싶다면, IState를 상속받는 FleeState 클래스 하나만 새로 만들면 되며, 기존 코드는 전혀 수정할 필요가 없다.<li>이는 <strong>개방-폐쇄 원칙(OCP)</strong>을 잘 따르는 구조다.</ul><h1 id="요약">요약</h1><ul><li><p>상태 패턴은 객체가 자신의 내부 상태에 따라 행동을 바꾸도록 하는 패턴으로, 복잡한 조건 분기문을 효과적으로 대체한다.</p><li><p>enum과 switch를 이용한 간단한 상태 머신: 구현이 쉽고 직관적이어서 간단한 상태 관리에 매우 효과적이다. 하지만 상태가 많아지고 복잡해지면 관리하기 어려워질 수 있다.</p><li><p>클래스 기반의 상태 패턴: 각 상태를 별도의 클래스로 캡슐화하여, 상태별 행동과 데이터를 완벽하게 분리한다. 이는 복잡한 상태를 가진 객체를 설계할 때 확장성과 유지보수성을 크게 향상시킨다.</p><li><p>어떤 방식을 선택할지는 시스템의 복잡도에 따라 다르지만, 두 방식 모두 상태에 따른 객체의 행동을 체계적으로 구성하여 코드의 품질을 높이는 강력한 도구다.</p></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4/'>디자인 패턴</a>, <a href='/categories/%ED%96%89%ED%83%9C-%ED%8C%A8%ED%84%B4/'>행태 패턴</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/design-pattern/" class="post-tag no-text-decoration" >design pattern</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%EC%83%81%ED%83%9C+%ED%8C%A8%ED%84%B4+-+yjh9317&url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EC%2583%2581%25ED%2583%259C-%25ED%258C%25A8%25ED%2584%25B4%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%EC%83%81%ED%83%9C+%ED%8C%A8%ED%84%B4+-+yjh9317&u=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EC%2583%2581%25ED%2583%259C-%25ED%258C%25A8%25ED%2584%25B4%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EC%2583%2581%25ED%2583%259C-%25ED%258C%25A8%25ED%2584%25B4%2F&text=%EC%83%81%ED%83%9C+%ED%8C%A8%ED%84%B4+-+yjh9317" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Gameplay-Param/">GameplayTag Param</a><li><a href="/posts/Device/">Device</a><li><a href="/posts/SwapChain/">SwapChain</a><li><a href="/posts/VertexBuffer/">VertexBuffer</a><li><a href="/posts/IndexBuffer/">IndexBuffer</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%EC%B1%85%EC%9E%84-%EC%82%AC%EC%8A%AC-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1685631600" data-df="ll" > Jun 2, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>책임 사슬 패턴</h3><div class="text-muted small"><p> 책임 사슬 패턴 요청을 처리할 수 있는 객체들의 사슬(chain)을 만들어, 요청이 처리될 때까지 이 사슬을 따라 객체들이 차례대로 요청을 확인하게 만드는 행위 디자인 패턴이다. 요청을 보낸 객체(Sender)는 어떤 객체가 그 요청을 처리할지 알 필요가 없다. 요청은 사슬의 첫 번째 객체에게 전달되고, 해당 객체는 요청을 처...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%BB%A4%EB%A7%A8%EB%93%9C-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1685890800" data-df="ll" > Jun 5, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>커맨드 패턴</h3><div class="text-muted small"><p> 커맨드 패턴 player.Jump()처럼 객체의 메서드를 직접 호출하는 대신, ‘점프하라’는 요청(request) 또는 명령(command) 자체를 하나의 객체로 캡슐화하는 것이 커맨드 패턴(Command Pattern)의 핵심이다. 이렇게 요청을 객체로 만들면 어떤 장점이 있을까? 명령을 변수처럼 저장하거나, 큐에 ...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%9D%B8%ED%84%B0%ED%94%84%EB%A6%AC%ED%84%B0-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1686150000" data-df="ll" > Jun 8, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>인터프리터 패턴</h3><div class="text-muted small"><p> 인터프리터 패턴 특정 ‘언어’에 대한 문법을 정의하고, 그 언어로 작성된 문장을 해석(interpret)하는 해석기를 제공하는 행위 디자인 패턴 쉽게 말해, 우리가 직접 정의한 간단한 규칙이나 언어를 이해하고 실행하는 엔진을 만드는 방법이다. 게임 개발에서는 NPC의 행동을 정의하는 간단한 스크립트, 퀘스트의 완료...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EA%B4%80%EC%B0%B0%EC%9E%90-%ED%8C%A8%ED%84%B4/" class="btn btn-outline-primary" prompt="Older"><p>관찰자 패턴</p></a> <a href="/posts/Actor-&&-Pawn-&&-Character/" class="btn btn-outline-primary" prompt="Newer"><p>Actor && Pawn && Character</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Yang jeong hyeon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
