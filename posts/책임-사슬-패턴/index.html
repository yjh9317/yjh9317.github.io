<!DOCTYPE html><html lang="ko" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="책임 사슬 패턴" /><meta property="og:locale" content="ko" /><meta name="description" content="책임 사슬 패턴" /><meta property="og:description" content="책임 사슬 패턴" /><link rel="canonical" href="https://yjh9317.github.io/posts/%EC%B1%85%EC%9E%84-%EC%82%AC%EC%8A%AC-%ED%8C%A8%ED%84%B4/" /><meta property="og:url" content="https://yjh9317.github.io/posts/%EC%B1%85%EC%9E%84-%EC%82%AC%EC%8A%AC-%ED%8C%A8%ED%84%B4/" /><meta property="og:site_name" content="yjh9317" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-06-02T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="책임 사슬 패턴" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-06-17T15:34:32+09:00","datePublished":"2023-06-02T00:00:00+09:00","description":"책임 사슬 패턴","headline":"책임 사슬 패턴","mainEntityOfPage":{"@type":"WebPage","@id":"https://yjh9317.github.io/posts/%EC%B1%85%EC%9E%84-%EC%82%AC%EC%8A%AC-%ED%8C%A8%ED%84%B4/"},"url":"https://yjh9317.github.io/posts/%EC%B1%85%EC%9E%84-%EC%82%AC%EC%8A%AC-%ED%8C%A8%ED%84%B4/"}</script><title>책임 사슬 패턴 | yjh9317</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="yjh9317"><meta name="application-name" content="yjh9317"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> </a></div><div class="site-title mt-3"> <a href="/">yjh9317</a></div><div class="site-subtitle font-italic">코딩열심히하려는사람</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/yjh9317" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>책임 사슬 패턴</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>책임 사슬 패턴</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1685631600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 2, 2023 </em> </span> <span> Updated <em class="" data-ts="1750142072" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 17, 2025 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">Yang jeong hyeon</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2357 words"> <em>13 min</em> read</span></div></div></div><div class="post-content"><h1 id="책임-사슬-패턴">책임 사슬 패턴</h1><ul><li><p><code class="language-plaintext highlighter-rouge">요청을 처리할 수 있는 객체들의 사슬(chain)을 만들어, 요청이 처리될 때까지 이 사슬을 따라 객체들이 차례대로 요청을 확인하게 만드는 행위 디자인 패턴</code>이다.</p><li>요청을 보낸 객체(Sender)는 어떤 객체가 그 요청을 처리할지 알 필요가 없다. 요청은 사슬의 첫 번째 객체에게 전달되고, 해당 객체는 요청을 처리하거나, 처리하지 못할 경우 사슬의 다음 객체에게 요청을 넘긴다.<li><p>이 과정을 요청이 처리되거나 사슬의 끝에 도달할 때까지 반복한다.</p><li>이 패턴의 핵심 목표는 요청을 보내는 쪽과 요청을 처리하는 쪽의 결합도를 낮추는 것이다.<li>이를 통해 여러 객체에게 요청을 처리할 기회를 유연하게 제공할 수 있다.</ul><h2 id="시나리오-게임-캐릭터의-버프와-디버프-시스템"><span class="mr-2">시나리오: 게임 캐릭터의 버프와 디버프 시스템</span><a href="#시나리오-게임-캐릭터의-버프와-디버프-시스템" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>게임 캐릭터가 다양한 버프(buff)와 디버프(debuff) 효과를 받는 시스템을 구현해야 한다.<li><p>예를 들어, ‘공격력 2배’ 버프와 ‘방어력 증가’ 버프가 동시에 적용될 수 있어야 하고, 특정 저주에 걸리면 모든 버프 효과가 무시되어야 한다.</p><li>먼저, 기본적인 Creature 클래스를 정의한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">struct</span> <span class="nc">Creature</span>
<span class="p">{</span>
    <span class="n">string</span> <span class="n">name</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">attack</span><span class="p">,</span> <span class="n">defense</span><span class="p">;</span>

    <span class="n">Creature</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">,</span> <span class="kt">int</span> <span class="n">attack</span><span class="p">,</span> <span class="kt">int</span> <span class="n">defense</span><span class="p">)</span>
        <span class="o">:</span> <span class="n">name</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="n">attack</span><span class="p">(</span><span class="n">attack</span><span class="p">),</span> <span class="n">defense</span><span class="p">(</span><span class="n">defense</span><span class="p">)</span> <span class="p">{}</span>

    <span class="k">friend</span> <span class="n">ostream</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">&lt;&lt;</span><span class="p">(</span><span class="n">ostream</span><span class="o">&amp;</span> <span class="n">os</span><span class="p">,</span> <span class="k">const</span> <span class="n">Creature</span><span class="o">&amp;</span> <span class="n">obj</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">os</span> <span class="o">&lt;&lt;</span> <span class="s">"Name: "</span> <span class="o">&lt;&lt;</span> <span class="n">obj</span><span class="p">.</span><span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">", Attack: "</span> <span class="o">&lt;&lt;</span> <span class="n">obj</span><span class="p">.</span><span class="n">attack</span> 
                  <span class="o">&lt;&lt;</span> <span class="s">", Defense: "</span> <span class="o">&lt;&lt;</span> <span class="n">obj</span><span class="p">.</span><span class="n">defense</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><ul><li>이 Creature의 능력치를 어떻게 동적으로, 그리고 여러 효과를 중첩하여 변경할 수 있을까?</ul><h2 id="방법-1-포인터-체인-the-pointer-chain"><span class="mr-2">방법 1: 포인터 체인 (The Pointer Chain)</span><a href="#방법-1-포인터-체인-the-pointer-chain" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>가장 고전적이고 단순한 책임 사슬 구현은 처리기(Handler)들을 연결 리스트(linked list) 형태로 구성하는 것이다.</ul><h3 id="1-처리기handler-기본-클래스-정의"><span class="mr-2">1. 처리기(Handler) 기본 클래스 정의</span><a href="#1-처리기handler-기본-클래스-정의" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>모든 능력치 변경 효과(Modifier)의 기반이 될 추상 클래스를 정의한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="c1">// 모든 능력치 변경 효과의 기본 클래스 (처리기의 기본 인터페이스)</span>
<span class="k">class</span> <span class="nc">CreatureModifier</span> <span class="p">{</span>
<span class="nl">protected:</span>
    <span class="n">Creature</span><span class="o">&amp;</span> <span class="n">creature</span><span class="p">;</span>
    <span class="n">CreatureModifier</span><span class="o">*</span> <span class="n">next</span> <span class="o">=</span> <span class="nb">nullptr</span><span class="p">;</span> <span class="c1">// 사슬의 다음 처리기를 가리키는 포인터</span>

<span class="nl">public:</span>
    <span class="k">explicit</span> <span class="n">CreatureModifier</span><span class="p">(</span><span class="n">Creature</span><span class="o">&amp;</span> <span class="n">creature</span><span class="p">)</span> <span class="o">:</span> <span class="n">creature</span><span class="p">(</span><span class="n">creature</span><span class="p">)</span> <span class="p">{}</span>

    <span class="c1">// 사슬에 새로운 처리기를 추가하는 메서드</span>
    <span class="kt">void</span> <span class="n">Add</span><span class="p">(</span><span class="n">CreatureModifier</span><span class="o">*</span> <span class="n">modifier</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">next</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">next</span><span class="o">-&gt;</span><span class="n">Add</span><span class="p">(</span><span class="n">modifier</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">next</span> <span class="o">=</span> <span class="n">modifier</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// 요청을 처리하는 가상 함수. 기본적으로 다음 처리기에게 요청을 넘긴다.</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Handle</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">next</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">next</span><span class="o">-&gt;</span><span class="n">Handle</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="2-구체적인-처리기concrete-handler-구현"><span class="mr-2">2. 구체적인 처리기(Concrete Handler) 구현</span><a href="#2-구체적인-처리기concrete-handler-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>이제 실제 버프 효과들을 구현한다.<li>각 효과는 자신의 로직을 수행한 후, 명시적으로 다음 처리기를 호출해야 한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre><span class="c1">// 공격력을 2배로 만드는 처리기</span>
<span class="k">class</span> <span class="nc">DoubleAttackModifier</span> <span class="o">:</span> <span class="k">public</span> <span class="n">CreatureModifier</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">explicit</span> <span class="n">DoubleAttackModifier</span><span class="p">(</span><span class="n">Creature</span><span class="o">&amp;</span> <span class="n">creature</span><span class="p">)</span> <span class="o">:</span> <span class="n">CreatureModifier</span><span class="p">(</span><span class="n">creature</span><span class="p">)</span> <span class="p">{}</span>

    <span class="kt">void</span> <span class="n">Handle</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">creature</span><span class="p">.</span><span class="n">attack</span> <span class="o">*=</span> <span class="mi">2</span><span class="p">;</span>
        <span class="c1">// 다음 처리기에게 요청 전달</span>
        <span class="n">CreatureModifier</span><span class="o">::</span><span class="n">Handle</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 방어력을 1 증가시키는 처리기</span>
<span class="k">class</span> <span class="nc">IncreaseDefenseModifier</span> <span class="o">:</span> <span class="k">public</span> <span class="n">CreatureModifier</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">explicit</span> <span class="n">IncreaseDefenseModifier</span><span class="p">(</span><span class="n">Creature</span><span class="o">&amp;</span> <span class="n">creature</span><span class="p">)</span> <span class="o">:</span> <span class="n">CreatureModifier</span><span class="p">(</span><span class="n">creature</span><span class="p">)</span> <span class="p">{}</span>

    <span class="kt">void</span> <span class="n">Handle</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">creature</span><span class="p">.</span><span class="n">defense</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="c1">// 다음 처리기에게 요청 전달</span>
        <span class="n">CreatureModifier</span><span class="o">::</span><span class="n">Handle</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 모든 보너스를 막는 처리기 (사슬을 끊는 역할)</span>
<span class="k">class</span> <span class="nc">NoBonusesModifier</span> <span class="o">:</span> <span class="k">public</span> <span class="n">CreatureModifier</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">explicit</span> <span class="n">NoBonusesModifier</span><span class="p">(</span><span class="n">Creature</span><span class="o">&amp;</span> <span class="n">creature</span><span class="p">)</span> <span class="o">:</span> <span class="n">CreatureModifier</span><span class="p">(</span><span class="n">creature</span><span class="p">)</span> <span class="p">{}</span>

    <span class="kt">void</span> <span class="n">Handle</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="c1">// 아무것도 하지 않고, 다음 처리기를 호출하지도 않는다.</span>
        <span class="c1">// 여기서 사슬이 중단된다.</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="3-사용법-및-한계"><span class="mr-2">3. 사용법 및 한계</span><a href="#3-사용법-및-한계" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>클라이언트 코드에서 이 처리기들을 수동으로 연결하여 사슬을 구성하고 실행한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Creature</span> <span class="n">goblin</span><span class="p">{</span><span class="s">"Goblin"</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">};</span>
    <span class="n">CreatureModifier</span> <span class="n">root</span><span class="p">{</span><span class="n">goblin</span><span class="p">};</span> <span class="c1">// 사슬의 시작점</span>

    <span class="n">DoubleAttackModifier</span> <span class="n">double_attack</span><span class="p">{</span><span class="n">goblin</span><span class="p">};</span>
    <span class="n">IncreaseDefenseModifier</span> <span class="n">increase_defense</span><span class="p">{</span><span class="n">goblin</span><span class="p">};</span>

    <span class="n">root</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="o">&amp;</span><span class="n">double_attack</span><span class="p">);</span>
    <span class="n">root</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="o">&amp;</span><span class="n">increase_defense</span><span class="p">);</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"적용 전: "</span> <span class="o">&lt;&lt;</span> <span class="n">goblin</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="n">root</span><span class="p">.</span><span class="n">Handle</span><span class="p">();</span> <span class="c1">// 사슬 전체를 실행</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"적용 후: "</span> <span class="o">&lt;&lt;</span> <span class="n">goblin</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li><p>이 방식은 책임 사슬의 기본 개념을 잘 보여주지만, 몇 가지 한계가 있다.</p><ul><li>능력치 변경이 영구적이다. 버프가 사라졌을 때 원래 값으로 되돌리기 어렵다.<li>사슬의 중간에 있는 효과를 제거하거나 순서를 바꾸는 것이 복잡하다.<li>모든 처리기가 Creature의 내부 상태를 직접 수정하므로, 결합도가 여전히 높다.</ul></ul><h2 id="방법-2-브로커-체인-the-broker-chain"><span class="mr-2">방법 2: 브로커 체인 (The Broker Chain)</span><a href="#방법-2-브로커-체인-the-broker-chain" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>더 유연하고 강력한 방법은 이벤트 브로커(Event Broker) 또는 <strong>중재자(Mediator)</strong>를 사용하는 것이다. 이는 옵저버 패턴과 중재자 패턴을 결합한 형태다.</ul><h3 id="1-이벤트-브로커와-질의query-객체-정의"><span class="mr-2">1. 이벤트 브로커와 질의(Query) 객체 정의</span><a href="#1-이벤트-브로커와-질의query-객체-정의" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>모든 능력치 ‘조회’ 요청을 중계하는 중앙 허브(Game)와, 요청의 내용을 담는 Query 객체를 정의한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;boost/signals2.hpp&gt;</span><span class="c1"> // C#의 event와 유사한 시그널/슬롯 라이브러리</span><span class="cp">
</span>
<span class="k">struct</span> <span class="nc">Query</span> <span class="p">{</span>
    <span class="n">string</span> <span class="n">creature_name</span><span class="p">;</span>
    <span class="k">enum</span> <span class="k">class</span> <span class="nc">Argument</span> <span class="p">{</span> <span class="n">attack</span><span class="p">,</span> <span class="n">defense</span> <span class="p">}</span> <span class="n">argument</span><span class="p">;</span>
    <span class="kt">int</span><span class="o">&amp;</span> <span class="n">result</span><span class="p">;</span> <span class="c1">// 조회 결과를 담을 참조</span>
<span class="p">};</span>

<span class="c1">// 이벤트 브로커 역할을 하는 중재자</span>
<span class="k">struct</span> <span class="nc">Game</span> <span class="p">{</span>
    <span class="n">boost</span><span class="o">::</span><span class="n">signals2</span><span class="o">::</span><span class="n">signal</span><span class="o">&lt;</span><span class="kt">void</span><span class="p">(</span><span class="n">Query</span><span class="o">&amp;</span><span class="p">)</span><span class="o">&gt;</span> <span class="n">queries</span><span class="p">;</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="2-똑똑한-creature-클래스-재정의"><span class="mr-2">2. ‘똑똑한’ Creature 클래스 재정의</span><a href="#2-똑똑한-creature-클래스-재정의" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>Creature는 이제 자신의 능력치를 직접 반환하지 않는다. 대신, 이벤트 브로커에게 “내 최종 공격력은 몇인가요?”라고 <strong>질의(Query)</strong>한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Creature</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">Game</span><span class="o">&amp;</span> <span class="n">game</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">base_attack</span><span class="p">,</span> <span class="n">base_defense</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">string</span> <span class="n">name</span><span class="p">;</span>
    <span class="c1">// ... 생성자 ...</span>

    <span class="kt">int</span> <span class="n">GetAttack</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">Query</span> <span class="n">q</span><span class="p">{</span><span class="n">name</span><span class="p">,</span> <span class="n">Query</span><span class="o">::</span><span class="n">Argument</span><span class="o">::</span><span class="n">attack</span><span class="p">,</span> <span class="n">base_attack</span><span class="p">};</span>
        <span class="n">game</span><span class="p">.</span><span class="n">queries</span><span class="p">(</span><span class="n">q</span><span class="p">);</span> <span class="c1">// 브로커에게 질의를 보낸다.</span>
        <span class="k">return</span> <span class="n">q</span><span class="p">.</span><span class="n">result</span><span class="p">;</span> <span class="c1">// 모든 버프가 적용된 최종 결과를 받는다.</span>
    <span class="p">}</span>
    <span class="c1">// ... GetDefense()도 유사하게 구현 ...</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="3-raii를-이용한-스코프-기반-처리기"><span class="mr-2">3. RAII를 이용한 스코프 기반 처리기</span><a href="#3-raii를-이용한-스코프-기반-처리기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>이제 능력치 변경 효과들은 Creature를 직접 수정하는 대신, Game의 queries 시그널을 ‘구독’한다.<li>그리고 자신의 수명이 다하면 자동으로 구독을 ‘해지’한다(RAII 패턴).</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="c1">// RAII를 활용한 스코프 기반 처리기</span>
<span class="k">class</span> <span class="nc">CreatureModifier</span> <span class="p">{</span>
<span class="nl">protected:</span>
    <span class="n">Game</span><span class="o">&amp;</span> <span class="n">game</span><span class="p">;</span>
    <span class="n">Creature</span><span class="o">&amp;</span> <span class="n">creature</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">CreatureModifier</span><span class="p">(</span><span class="n">Game</span><span class="o">&amp;</span> <span class="n">game</span><span class="p">,</span> <span class="n">Creature</span><span class="o">&amp;</span> <span class="n">creature</span><span class="p">)</span> <span class="o">:</span> <span class="n">game</span><span class="p">(</span><span class="n">game</span><span class="p">),</span> <span class="n">creature</span><span class="p">(</span><span class="n">creature</span><span class="p">)</span> <span class="p">{}</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">CreatureModifier</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">DoubleAttackModifier</span> <span class="o">:</span> <span class="k">public</span> <span class="n">CreatureModifier</span> <span class="p">{</span>
    <span class="n">boost</span><span class="o">::</span><span class="n">signals2</span><span class="o">::</span><span class="n">connection</span> <span class="n">conn</span><span class="p">;</span> <span class="c1">// 시그널 연결을 관리하는 커넥션 객체</span>
<span class="nl">public:</span>
    <span class="n">DoubleAttackModifier</span><span class="p">(</span><span class="n">Game</span><span class="o">&amp;</span> <span class="n">game</span><span class="p">,</span> <span class="n">Creature</span><span class="o">&amp;</span> <span class="n">creature</span><span class="p">)</span> <span class="o">:</span> <span class="n">CreatureModifier</span><span class="p">(</span><span class="n">game</span><span class="p">,</span> <span class="n">creature</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 생성 시, queries 시그널에 처리 로직(람다)을 연결한다.</span>
        <span class="n">conn</span> <span class="o">=</span> <span class="n">game</span><span class="p">.</span><span class="n">queries</span><span class="p">.</span><span class="n">connect</span><span class="p">([</span><span class="o">&amp;</span><span class="p">](</span><span class="n">Query</span><span class="o">&amp;</span> <span class="n">q</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">q</span><span class="p">.</span><span class="n">creature_name</span> <span class="o">==</span> <span class="n">creature</span><span class="p">.</span><span class="n">name</span> <span class="o">&amp;&amp;</span> <span class="n">q</span><span class="p">.</span><span class="n">argument</span> <span class="o">==</span> <span class="n">Query</span><span class="o">::</span><span class="n">Argument</span><span class="o">::</span><span class="n">attack</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">q</span><span class="p">.</span><span class="n">result</span> <span class="o">*=</span> <span class="mi">2</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
    <span class="c1">// 소멸 시, conn 객체가 자동으로 파괴되면서 시그널 연결이 해제된다.</span>
    <span class="o">~</span><span class="n">DoubleAttackModifier</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">conn</span><span class="p">.</span><span class="n">disconnect</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><ul><li>이 처리기는 Creature의 상태를 직접 바꾸지 않는다. 단지 Game을 통해 전달되는 Query의 result 값만 수정할 뿐이다.</ul><h3 id="4-사용법-및-장점"><span class="mr-2">4. 사용법 및 장점</span><a href="#4-사용법-및-장점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>이제 버프 적용이 매우 직관적이고 안전해진다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">Game</span> <span class="n">game</span><span class="p">;</span>
    <span class="n">Creature</span> <span class="n">goblin</span><span class="p">{</span><span class="n">game</span><span class="p">,</span> <span class="s">"Goblin"</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">};</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">goblin</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="c1">// 공격력 2</span>

    <span class="p">{</span>
        <span class="c1">// 이 스코프 안에서만 DoubleAttackModifier가 활성화된다.</span>
        <span class="n">DoubleAttackModifier</span> <span class="n">dam</span><span class="p">{</span><span class="n">game</span><span class="p">,</span> <span class="n">goblin</span><span class="p">};</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">goblin</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="c1">// GetAttack() 호출 시 버프가 적용되어 공격력 4</span>
    <span class="p">}</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">goblin</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span> <span class="c1">// 스코프를 벗어나 modifier가 파괴되었으므로 공격력 2</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li>이 방식은 버프/디버프가 일시적이고, 여러 효과가 서로를 모른 채 독립적으로 적용되며, 적용 순서에 크게 구애받지 않는 게임 시스템을 구축하는 데 매우 효과적이다.</ul><h1 id="요약">요약</h1><ul><li><p>책임 사슬 패턴은 요청을 보내는 객체와 이를 처리하는 객체들 간의 결합도를 낮추는 데 목적이 있다.</p><li><p>포인터 체인은 가장 기본적인 구현으로, 처리 순서가 명확한 파이프라인 구조에 적합하다.</p><li><p>브로커 체인은 중재자와 옵저버 패턴을 결합한 고급 구현으로, 여러 처리기가 독립적으로, 그리고 일시적으로 요청에 영향을 미치는 동적인 시스템(예: 게임의 버프 시스템)에 매우 강력한 해결책을 제공한다.</p><li><p>이 패턴을 통해 각 처리기는 자신의 책임에만 집중할 수 있게 되어 <strong>단일 책임 원칙(SRP)</strong>을 만족시키고, 새로운 처리기를 추가하거나 순서를 변경하는 것이 자유로워져 시스템의 유연성과 확장성을 크게 향상시킬 수 있다.</p></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4/'>디자인 패턴</a>, <a href='/categories/%ED%96%89%ED%83%9C-%ED%8C%A8%ED%84%B4/'>행태 패턴</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/design-pattern/" class="post-tag no-text-decoration" >design pattern</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%EC%B1%85%EC%9E%84+%EC%82%AC%EC%8A%AC+%ED%8C%A8%ED%84%B4+-+yjh9317&url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EC%25B1%2585%25EC%259E%2584-%25EC%2582%25AC%25EC%258A%25AC-%25ED%258C%25A8%25ED%2584%25B4%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%EC%B1%85%EC%9E%84+%EC%82%AC%EC%8A%AC+%ED%8C%A8%ED%84%B4+-+yjh9317&u=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EC%25B1%2585%25EC%259E%2584-%25EC%2582%25AC%25EC%258A%25AC-%25ED%258C%25A8%25ED%2584%25B4%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EC%25B1%2585%25EC%259E%2584-%25EC%2582%25AC%25EC%258A%25AC-%25ED%258C%25A8%25ED%2584%25B4%2F&text=%EC%B1%85%EC%9E%84+%EC%82%AC%EC%8A%AC+%ED%8C%A8%ED%84%B4+-+yjh9317" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Gameplay-Param/">GameplayTag Param</a><li><a href="/posts/Device/">Device</a><li><a href="/posts/SwapChain/">SwapChain</a><li><a href="/posts/VertexBuffer/">VertexBuffer</a><li><a href="/posts/IndexBuffer/">IndexBuffer</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%EC%BB%A4%EB%A7%A8%EB%93%9C-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1685890800" data-df="ll" > Jun 5, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>커맨드 패턴</h3><div class="text-muted small"><p> 커맨드 패턴 player.Jump()처럼 객체의 메서드를 직접 호출하는 대신, ‘점프하라’는 요청(request) 또는 명령(command) 자체를 하나의 객체로 캡슐화하는 것이 커맨드 패턴(Command Pattern)의 핵심이다. 이렇게 요청을 객체로 만들면 어떤 장점이 있을까? 명령을 변수처럼 저장하거나, 큐에 ...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%9D%B8%ED%84%B0%ED%94%84%EB%A6%AC%ED%84%B0-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1686150000" data-df="ll" > Jun 8, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>인터프리터 패턴</h3><div class="text-muted small"><p> 인터프리터 패턴 특정 ‘언어’에 대한 문법을 정의하고, 그 언어로 작성된 문장을 해석(interpret)하는 해석기를 제공하는 행위 디자인 패턴 쉽게 말해, 우리가 직접 정의한 간단한 규칙이나 언어를 이해하고 실행하는 엔진을 만드는 방법이다. 게임 개발에서는 NPC의 행동을 정의하는 간단한 스크립트, 퀘스트의 완료...</p></div></div></a></div><div class="card"> <a href="/posts/%EB%B0%98%EB%B3%B5%EC%9E%90-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1686582000" data-df="ll" > Jun 13, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>반복자 패턴</h3><div class="text-muted small"><p> 반복자 패턴 컬렉션(배열, 리스트, 트리 등)의 내부 구조를 외부에 노출하지 않으면서, 그 요소들을 순차적으로 접근할 수 있는 방법을 제공하는 행위 디자인 패턴 for 루프를 사용해 std::vector의 모든 요소를 출력하는 것이 바로 이 패턴의 가장 흔한 예다. 반복자 패턴의 핵심은, 데이터 구조가 어떻게 생겼는지(배열...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%ED%94%84%EB%A1%9D%EC%8B%9C-%ED%8C%A8%ED%84%B4/" class="btn btn-outline-primary" prompt="Older"><p>프록시 패턴</p></a> <a href="/posts/%EC%BB%A4%EB%A7%A8%EB%93%9C-%ED%8C%A8%ED%84%B4/" class="btn btn-outline-primary" prompt="Newer"><p>커맨드 패턴</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Yang jeong hyeon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
