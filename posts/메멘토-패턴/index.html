<!DOCTYPE html><html lang="ko" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="메멘토 패턴" /><meta property="og:locale" content="ko" /><meta name="description" content="메멘토 패턴" /><meta property="og:description" content="메멘토 패턴" /><link rel="canonical" href="https://yjh9317.github.io/posts/%EB%A9%94%EB%A9%98%ED%86%A0-%ED%8C%A8%ED%84%B4/" /><meta property="og:url" content="https://yjh9317.github.io/posts/%EB%A9%94%EB%A9%98%ED%86%A0-%ED%8C%A8%ED%84%B4/" /><meta property="og:site_name" content="yjh9317" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-06-19T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="메멘토 패턴" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-06-17T15:34:32+09:00","datePublished":"2023-06-19T00:00:00+09:00","description":"메멘토 패턴","headline":"메멘토 패턴","mainEntityOfPage":{"@type":"WebPage","@id":"https://yjh9317.github.io/posts/%EB%A9%94%EB%A9%98%ED%86%A0-%ED%8C%A8%ED%84%B4/"},"url":"https://yjh9317.github.io/posts/%EB%A9%94%EB%A9%98%ED%86%A0-%ED%8C%A8%ED%84%B4/"}</script><title>메멘토 패턴 | yjh9317</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="yjh9317"><meta name="application-name" content="yjh9317"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> </a></div><div class="site-title mt-3"> <a href="/">yjh9317</a></div><div class="site-subtitle font-italic">코딩열심히하려는사람</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/yjh9317" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>메멘토 패턴</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>메멘토 패턴</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1687100400" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 19, 2023 </em> </span> <span> Updated <em class="" data-ts="1750142072" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 17, 2025 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">Yang jeong hyeon</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1888 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><h1 id="메멘토-패턴">메멘토 패턴</h1><ul><li><p>객체의 <strong>캡슐화(Encapsulation)</strong>를 깨뜨리지 않으면서, 그 객체의 내부 상태를 스냅샷처럼 저장하여 나중에 이 상태로 복원할 수 있게 만드는 행위 디자인 패턴</p><li>‘메멘토’는 ‘기억해야 할 것’ 또는 ‘기념품’을 뜻하는 라틴어다.<li><p>이름처럼, 이 패턴은 특정 시점의 상태를 ‘메멘토’라는 객체에 담아 보관해두었다가, 필요할 때 그 ‘기념품’을 이용해 과거의 상태로 되돌아가는 기능을 구현하는 데 사용된다.</p><li>게임에서 흔히 볼 수 있는 ‘저장/불러오기’, ‘체크포인트’, ‘실행 취소(Undo)’ 기능이 바로 이 메멘토 패턴의 대표적인 활용 사례다.</ul><h2 id="시나리오-턴제-전략-게임의-한-수-무르기"><span class="mr-2">시나리오: 턴제 전략 게임의 ‘한 수 무르기’</span><a href="#시나리오-턴제-전략-게임의-한-수-무르기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>턴제 전략 게임에서 플레이어가 유닛을 움직인 후, 그 수를 무르고 싶을 때 사용하는 ‘한 수 무르기(Undo)’ 기능을 구현해야 한다고 가정하자.</ul><h3 id="1-상태를-가진-원본-객체-originator-정의"><span class="mr-2">1. 상태를 가진 원본 객체 (Originator) 정의</span><a href="#1-상태를-가진-원본-객체-originator-정의" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>먼저, 게임 보드의 상태를 관리하는 GameBoard 클래스를 정의한다.<li>이 클래스는 모든 유닛의 위치와 같은 게임의 현재 상태를 가지고 있다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;map&gt;</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="c1">// 유닛의 상태 (간단하게 위치만 저장)</span>
<span class="k">struct</span> <span class="nc">UnitState</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">// 원본 객체: 게임 보드의 상태를 책임진다.</span>
<span class="k">class</span> <span class="nc">GameBoard</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="n">UnitState</span><span class="o">&gt;</span> <span class="n">unit_positions</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">SetUnitPosition</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">unitId</span><span class="p">,</span> <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">unit_positions</span><span class="p">[</span><span class="n">unitId</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">};</span>
    <span class="p">}</span>
    <span class="c1">// ...</span>
<span class="p">};</span>
</pre></table></code></div></div><ul><li>플레이어가 유닛을 움직이면 unit_positions 맵의 데이터가 변경된다.<li>이 변경을 어떻게 기록하고 이전 상태로 되돌릴 수 있을까? GameBoard의 private 멤버인 unit_positions를 외부에 노출하지 않으면서 말이다.</ul><h2 id="메멘토-패턴-구현"><span class="mr-2">메멘토 패턴 구현</span><a href="#메멘토-패턴-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p>이 패턴은 세 가지 핵심 역할로 구성된다.</p><ul><li><code class="language-plaintext highlighter-rouge">오리지네이터 (Originator)</code>: 상태를 저장하고 복원할 원본 객체 (GameBoard).<li><code class="language-plaintext highlighter-rouge">메멘토 (Memento)</code>: 오리지네이터의 내부 상태 스냅샷을 저장하는 객체. 오리지네이터 외에는 그 내용을 알 수 없다.<li><code class="language-plaintext highlighter-rouge">커맨더 (Caretaker)</code>: 메멘토 객체를 보관하고 관리하지만, 그 내용은 들여다보지 않는다.</ul></ul><h3 id="1-메멘토-memento-클래스-정의"><span class="mr-2">1. 메멘토 (Memento) 클래스 정의</span><a href="#1-메멘토-memento-클래스-정의" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>메멘토는 GameBoard의 상태(unit_positions)를 저장한다.<li>중요한 점은, 모든 멤버가 private이고 GameBoard를 friend로 선언하여 오직 GameBoard만이 메멘토의 내부 상태에 접근할 수 있도록 하는 것이다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1">// 메멘토: GameBoard의 상태 스냅샷을 저장한다.</span>
<span class="k">class</span> <span class="nc">BoardMemento</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="c1">// 생성자도 private으로 만들어 GameBoard만 생성할 수 있게 한다.</span>
    <span class="n">BoardMemento</span><span class="p">(</span><span class="k">const</span> <span class="n">map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="n">UnitState</span><span class="o">&gt;&amp;</span> <span class="n">state</span><span class="p">)</span> <span class="o">:</span> <span class="n">saved_state</span><span class="p">(</span><span class="n">state</span><span class="p">)</span> <span class="p">{}</span>
    
    <span class="n">map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="n">UnitState</span><span class="o">&gt;</span> <span class="n">saved_state</span><span class="p">;</span>

    <span class="c1">// GameBoard 클래스에게만 내부 접근을 허용한다.</span>
    <span class="k">friend</span> <span class="k">class</span> <span class="nc">GameBoard</span><span class="p">;</span>
<span class="p">};</span>
</pre></table></code></div></div><ul><li>이 구조 덕분에 GameBoard의 캡슐화가 완벽하게 유지된다.</ul><h3 id="2-오리지네이터-originator-수정"><span class="mr-2">2. 오리지네이터 (Originator) 수정</span><a href="#2-오리지네이터-originator-수정" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>GameBoard에 상태를 저장하고 복원하는 메서드를 추가한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span>
<span class="k">class</span> <span class="nc">GameBoard</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">map</span><span class="o">&lt;</span><span class="n">string</span><span class="p">,</span> <span class="n">UnitState</span><span class="o">&gt;</span> <span class="n">unit_positions</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="c1">// ... SetUnitPosition 등 기존 메서드 ...</span>

    <span class="c1">// 현재 상태를 메멘토 객체로 만들어 반환한다.</span>
    <span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BoardMemento</span><span class="o">&gt;</span> <span class="n">CreateMemento</span><span class="p">()</span> <span class="k">const</span> <span class="p">{</span>
        <span class="c1">// new를 직접 호출하는 대신, private 생성자를 호출할 수 있다.</span>
        <span class="k">return</span> <span class="n">make_unique</span><span class="o">&lt;</span><span class="n">BoardMemento</span><span class="o">&gt;</span><span class="p">(</span><span class="n">unit_positions</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="c1">// 메멘토로부터 상태를 복원한다.</span>
    <span class="kt">void</span> <span class="n">Restore</span><span class="p">(</span><span class="k">const</span> <span class="n">BoardMemento</span><span class="o">&amp;</span> <span class="n">memento</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="o">-&gt;</span><span class="n">unit_positions</span> <span class="o">=</span> <span class="n">memento</span><span class="p">.</span><span class="n">saved_state</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="3-커맨더-caretaker-구현"><span class="mr-2">3. 커맨더 (Caretaker) 구현</span><a href="#3-커맨더-caretaker-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>커맨더는 메멘토들을 저장하고 관리하는 역할을 한다.<li>여기서는 TurnHistory 클래스가 그 역할을 맡는다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span>
<span class="c1">// 커맨더: 메멘토들을 보관하고 관리한다.</span>
<span class="k">class</span> <span class="nc">TurnHistory</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">BoardMemento</span><span class="o">&gt;&gt;</span> <span class="n">history</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">Save</span><span class="p">(</span><span class="n">GameBoard</span><span class="o">&amp;</span> <span class="n">board</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 보드로부터 메멘토를 받아 히스토리에 저장한다.</span>
        <span class="n">history</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">board</span><span class="p">.</span><span class="n">CreateMemento</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">Undo</span><span class="p">(</span><span class="n">GameBoard</span><span class="o">&amp;</span> <span class="n">board</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">history</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span> <span class="p">{</span>
            <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"더 이상 되돌릴 수 없습니다."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// 가장 마지막 메멘토를 꺼내서 보드 상태를 복원한다.</span>
        <span class="n">board</span><span class="p">.</span><span class="n">Restore</span><span class="p">(</span><span class="o">*</span><span class="n">history</span><span class="p">.</span><span class="n">back</span><span class="p">());</span>
        <span class="n">history</span><span class="p">.</span><span class="n">pop_back</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><ul><li>TurnHistory는 BoardMemento의 내용이 무엇인지 전혀 알지 못한다. 그저 ‘보관’했다가 ‘전달’할 뿐이다.</ul><h3 id="4-전체적인-흐름"><span class="mr-2">4. 전체적인 흐름</span><a href="#4-전체적인-흐름" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>이제 이들을 조합하여 ‘한 수 무르기’ 기능을 완성할 수 있다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">GameBoard</span> <span class="n">board</span><span class="p">;</span>
    <span class="n">TurnHistory</span> <span class="n">history</span><span class="p">;</span>

    <span class="c1">// 턴 시작: 초기 상태 설정 및 저장</span>
    <span class="n">board</span><span class="p">.</span><span class="n">SetUnitPosition</span><span class="p">(</span><span class="s">"Player1"</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
    <span class="n">history</span><span class="p">.</span><span class="n">Save</span><span class="p">(</span><span class="n">board</span><span class="p">);</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"턴 시작. Player1 위치: (10, 10)"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="c1">// 플레이어가 유닛을 이동시킨다.</span>
    <span class="n">board</span><span class="p">.</span><span class="n">SetUnitPosition</span><span class="p">(</span><span class="s">"Player1"</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">15</span><span class="p">);</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Player1 이동. 현재 위치: (12, 15)"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>

    <span class="c1">// 플레이어가 '한 수 무르기'를 선택한다.</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">'한 수 무르기' 실행..."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">history</span><span class="p">.</span><span class="n">Undo</span><span class="p">(</span><span class="n">board</span><span class="p">);</span>

    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"복원된 Player1 위치: (10, 10)"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><h2 id="undoredo-확장"><span class="mr-2">Undo/Redo 확장</span><a href="#undoredo-확장" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>메멘토 패턴을 이용하면 완전한 Undo/Redo 시스템도 쉽게 구현할 수 있다.<li>이때는 오리지네이터가 직접 커맨더의 역할을 겸하는 경우가 많다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre><span class="c1">// 오리지네이터가 커맨더 역할을 겸하는 예</span>
<span class="k">class</span> <span class="nc">GameBoardWithUndo</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="kt">int</span> <span class="n">balance</span><span class="p">;</span> <span class="c1">// 간단한 상태 예시</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">Memento</span><span class="o">&gt;&gt;</span> <span class="n">changes</span><span class="p">;</span> <span class="c1">// 메멘토 히스토리</span>
    <span class="kt">int</span> <span class="n">current_state_index</span><span class="p">;</span> <span class="c1">// 현재 상태를 가리키는 인덱스</span>

<span class="nl">public:</span>
    <span class="c1">// ... 생성자에서 초기 상태를 changes에 추가 ...</span>

    <span class="kt">void</span> <span class="n">Deposit</span><span class="p">(</span><span class="kt">int</span> <span class="n">amount</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">balance</span> <span class="o">+=</span> <span class="n">amount</span><span class="p">;</span>
        <span class="k">auto</span> <span class="n">m</span> <span class="o">=</span> <span class="n">make_shared</span><span class="o">&lt;</span><span class="n">Memento</span><span class="o">&gt;</span><span class="p">(</span><span class="n">balance</span><span class="p">);</span>
        <span class="n">changes</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">m</span><span class="p">);</span>
        <span class="n">current_state_index</span> <span class="o">=</span> <span class="n">changes</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">Undo</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">current_state_index</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="o">--</span><span class="n">current_state_index</span><span class="p">;</span>
            <span class="n">balance</span> <span class="o">=</span> <span class="n">changes</span><span class="p">[</span><span class="n">current_state_index</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">balance</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">Redo</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">current_state_index</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">changes</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="p">{</span>
            <span class="o">++</span><span class="n">current_state_index</span><span class="p">;</span>
            <span class="n">balance</span> <span class="o">=</span> <span class="n">changes</span><span class="p">[</span><span class="n">current_state_index</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">balance</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><ul><li>이 방식은 current_state_index를 앞뒤로 움직이며 상태를 되돌리거나 다시 실행한다.</ul><h1 id="요약">요약</h1><ul><li><p>메멘토 패턴은 객체의 내부 상태를 외부로 캡슐화하여, 나중에 해당 상태로 쉽게 복원할 수 있도록 하는 패턴이다.</p><li><p>구성 요소:</p><ul><li><p>오리지네이터 (Originator): 상태를 가진 원본 객체. 메멘토를 생성하고, 메멘토로부터 상태를 복원할 책임이 있다.</p><li><p>메멘토 (Memento): 오리지네이터의 상태 스냅샷. 오리지네이터 외에는 누구도 그 내용을 들여다볼 수 없어야 한다(캡슐화).</p><li><p>커맨더 (Caretaker): 메멘토를 보관하고 관리하지만, 그 내용을 알지 못한다.</p></ul><li><p>이 패턴은 객체의 캡슐화를 훼손하지 않으면서 상태 저장/복원 기능을 구현하는 가장 좋은 방법이다.</p><li><p>게임 개발에서는 저장/불러오기, 체크포인트 시스템, 그리고 특히 강력한 Undo/Redo 기능을 구현할 때 메멘토 패턴이 핵심적인 역할을 한다.</p></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4/'>디자인 패턴</a>, <a href='/categories/%ED%96%89%ED%83%9C-%ED%8C%A8%ED%84%B4/'>행태 패턴</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/design-pattern/" class="post-tag no-text-decoration" >design pattern</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%EB%A9%94%EB%A9%98%ED%86%A0+%ED%8C%A8%ED%84%B4+-+yjh9317&url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EB%25A9%2594%25EB%25A9%2598%25ED%2586%25A0-%25ED%258C%25A8%25ED%2584%25B4%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%EB%A9%94%EB%A9%98%ED%86%A0+%ED%8C%A8%ED%84%B4+-+yjh9317&u=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EB%25A9%2594%25EB%25A9%2598%25ED%2586%25A0-%25ED%258C%25A8%25ED%2584%25B4%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EB%25A9%2594%25EB%25A9%2598%25ED%2586%25A0-%25ED%258C%25A8%25ED%2584%25B4%2F&text=%EB%A9%94%EB%A9%98%ED%86%A0+%ED%8C%A8%ED%84%B4+-+yjh9317" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Gameplay-Param/">GameplayTag Param</a><li><a href="/posts/Device/">Device</a><li><a href="/posts/SwapChain/">SwapChain</a><li><a href="/posts/VertexBuffer/">VertexBuffer</a><li><a href="/posts/IndexBuffer/">IndexBuffer</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%EC%B1%85%EC%9E%84-%EC%82%AC%EC%8A%AC-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1685631600" data-df="ll" > Jun 2, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>책임 사슬 패턴</h3><div class="text-muted small"><p> 책임 사슬 패턴 요청을 처리할 수 있는 객체들의 사슬(chain)을 만들어, 요청이 처리될 때까지 이 사슬을 따라 객체들이 차례대로 요청을 확인하게 만드는 행위 디자인 패턴이다. 요청을 보낸 객체(Sender)는 어떤 객체가 그 요청을 처리할지 알 필요가 없다. 요청은 사슬의 첫 번째 객체에게 전달되고, 해당 객체는 요청을 처...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%BB%A4%EB%A7%A8%EB%93%9C-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1685890800" data-df="ll" > Jun 5, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>커맨드 패턴</h3><div class="text-muted small"><p> 커맨드 패턴 player.Jump()처럼 객체의 메서드를 직접 호출하는 대신, ‘점프하라’는 요청(request) 또는 명령(command) 자체를 하나의 객체로 캡슐화하는 것이 커맨드 패턴(Command Pattern)의 핵심이다. 이렇게 요청을 객체로 만들면 어떤 장점이 있을까? 명령을 변수처럼 저장하거나, 큐에 ...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%9D%B8%ED%84%B0%ED%94%84%EB%A6%AC%ED%84%B0-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1686150000" data-df="ll" > Jun 8, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>인터프리터 패턴</h3><div class="text-muted small"><p> 인터프리터 패턴 특정 ‘언어’에 대한 문법을 정의하고, 그 언어로 작성된 문장을 해석(interpret)하는 해석기를 제공하는 행위 디자인 패턴 쉽게 말해, 우리가 직접 정의한 간단한 규칙이나 언어를 이해하고 실행하는 엔진을 만드는 방법이다. 게임 개발에서는 NPC의 행동을 정의하는 간단한 스크립트, 퀘스트의 완료...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EB%A7%A4%EA%B0%9C%EC%9E%90-%ED%8C%A8%ED%84%B4/" class="btn btn-outline-primary" prompt="Older"><p>매개자 패턴</p></a> <a href="/posts/Null-%EA%B0%9D%EC%B2%B4/" class="btn btn-outline-primary" prompt="Newer"><p>Null 객체</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Yang jeong hyeon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
