<!DOCTYPE html><html lang="ko" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="객체 생성 시 괄호 (()) 와 중괄호 ({})를 구분해라" /><meta property="og:locale" content="ko" /><meta name="description" content="초기화 구문들" /><meta property="og:description" content="초기화 구문들" /><link rel="canonical" href="https://yjh9317.github.io/posts/7.Distinguish-between-()-and-when-creating-objects/" /><meta property="og:url" content="https://yjh9317.github.io/posts/7.Distinguish-between-()-and-when-creating-objects/" /><meta property="og:site_name" content="yjh9317" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-02-03T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="객체 생성 시 괄호 (()) 와 중괄호 ({})를 구분해라" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-02-03T00:00:00+09:00","datePublished":"2024-02-03T00:00:00+09:00","description":"초기화 구문들","headline":"객체 생성 시 괄호 (()) 와 중괄호 ({})를 구분해라","mainEntityOfPage":{"@type":"WebPage","@id":"https://yjh9317.github.io/posts/7.Distinguish-between-()-and-when-creating-objects/"},"url":"https://yjh9317.github.io/posts/7.Distinguish-between-()-and-when-creating-objects/"}</script><title>객체 생성 시 괄호 (()) 와 중괄호 ({})를 구분해라 | yjh9317</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="yjh9317"><meta name="application-name" content="yjh9317"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> </a></div><div class="site-title mt-3"> <a href="/">yjh9317</a></div><div class="site-subtitle font-italic">코딩열심히하려는사람</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/yjh9317" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>객체 생성 시 괄호 (()) 와 중괄호 ({})를 구분해라</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>객체 생성 시 괄호 (()) 와 중괄호 ({})를 구분해라</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1706886000" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Feb 3, 2024 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">Yang jeong hyeon</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2266 words"> <em>12 min</em> read</span></div></div></div><div class="post-content"><h1 id="초기화-구문들">초기화 구문들</h1><ul><li><p>C++11에서 초기화값을 괄호,등호,중괄호로 사용할 수 있다.</p><li><p>등호와 중괄호로 같이 사용할 수도 있다.</p></ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="nf">x</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>   <span class="c1">// 괄호</span>

<span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">// 등호</span>

<span class="kt">int</span> <span class="n">z</span><span class="p">{</span> <span class="mi">0</span> <span class="p">};</span> <span class="c1">// 중괄호</span>

<span class="kt">int</span> <span class="n">z</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">};</span> <span class="c1">// 등호와 중괄호</span>
</pre></table></code></div></div><ul><li><p>초기화 구문에 있는 등호를 보고 C++ 초보자는 등호가 꼭 대입이 일어난다고 착각한다.</p><li><p>일반적으로 등호는 대입 형식이지만, 사용자 정의 형식에서는 초기화 or 대입이 각각 다른 함수로 호출ㄷ된다.</p></ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">Widget</span> <span class="n">w1</span><span class="p">;</span>      <span class="c1">// 기본 생성자</span>

<span class="n">Widget</span> <span class="n">w2</span> <span class="o">=</span> <span class="n">w1</span><span class="p">;</span> <span class="c1">// 복사 생성자</span>

<span class="n">w1</span> <span class="o">=</span> <span class="n">w2</span><span class="p">;</span>        <span class="c1">// 복사 대입 연산자</span>
</pre></table></code></div></div><p><br /></p><h1 id="균일-초기화uniform-initialization">균일 초기화(uniform initialization)</h1><ul><li><p>초기화 구문이 주는 혼동을 막기 위해, C++11에서 균일 초기화를 도입했다</p><li><p>어디서나 사용할 수 있고 개념상 모든 것을 표현할 수 있는 단 한 종류의 초기화다.</p><li><p>균일 초기화는 중괄호를 사용하며 이를 중괄호 초기화라 부른다</p></ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">};</span> <span class="c1">// 벡터 안에 1,3,5 요소로 초기화</span>
</pre></table></code></div></div><p><br /></p><h3 id="클래스-non-static-멤버-초기화"><span class="mr-2">클래스 non-static 멤버 초기화</span><a href="#클래스-non-static-멤버-초기화" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p>중괄호 구문은 non-static 멤버의 기본 초기화 값을 지정하는데 사용할 수도 있다.</p><ul><li>C++ 11에서는 등호 역시 초기화에 사용할 수 있다.</ul></ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Widget</span>
<span class="p">{</span>
<span class="nl">private:</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">{</span> <span class="mi">0</span> <span class="p">};</span> <span class="c1">// 가능</span>
    <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>  <span class="c1">// 가능</span>
    <span class="kt">int</span> <span class="n">z</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>   <span class="c1">// 오류! 괄호는 초기화에 사용X</span>
<span class="p">};</span>
</pre></table></code></div></div><p><br /></p><h3 id="복사할-수-없는-객체"><span class="mr-2">복사할 수 없는 객체</span><a href="#복사할-수-없는-객체" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>반면, 복사할 수 없는 객체(예를 들어 std::atomic)는 중괄호나 괄호로는 초기화가 되지만, 등호로는 초기화되지 않는다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">atomic</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ai1</span><span class="p">{</span> <span class="mi">0</span> <span class="p">};</span>   <span class="c1">// 가능</span>

<span class="n">atomic</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ai2</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>     <span class="c1">// 가능</span>

<span class="n">atomic</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ai3</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>    <span class="c1">// 오류</span>
</pre></table></code></div></div><ul><li>이렇게 중괄호 초기화는 C++이 지원하는 3가지 초기화 표현식 지정 방법 중 어디서나 사용할 수 있는 구문이다.</ul><p><br /></p><p><br /></p><h1 id="암묵적-좁히기-변환narrow-conversion-방지">암묵적 좁히기 변환(narrow conversion) 방지</h1><ul><li><p>중괄호 초기화의 혁신적인 기능 하나는, 내장 기능들 사이의 암묵적 좁히기 변환(narrow conversion)을 방지해 준다는 것이다.</p><li><p>중괄호 초기치에 있는 어떤 표현식 값을 초기화하려는 객체의 형식으로 온전하게 표현할 수 있도록 보장되지 않는다면, 컴파일러는 반드시 보고해야 한다.</p></ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kt">double</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">z</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">sum1</span> <span class="p">{</span> <span class="n">x</span> <span class="o">+</span> <span class="n">y</span> <span class="o">+</span> <span class="n">z</span> <span class="p">};</span> <span class="c1">// double합을 int로 표현하지 못할 수 있어 보고</span>
</pre></table></code></div></div><ul><li>괄호나 등호는 이러한 좁히기 변환을 점검하지 않는다</ul><p><br /></p><h1 id="가장-성가신-구문-해석most-vexing-parse">가장 성가신 구문 해석(most vexing parse)</h1><ul><li><p>중괄호 초기화의 또 다른 특징은 가장 성가신 구문 해석(most vexing parse)에 자유롭다는 것이다.</p><li><p><code class="language-plaintext highlighter-rouge">가장 성가신 구문 해석(most vexing parse)은 "선언으로 해석할 수 있는 것은 항상 선언으로 해석해야 한다"</code>라는 C++의 규칙에서 비롯된 하나의 부작용이다.</p><li><p>만약 기본 생성자로 객체를 생성하려 했지만 의도와 달리 함수로 선언하게 됐다면 이 부작용에 의해 나타난 현상이다.</p></ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c1">// Widget 생성자 호출</span>
<span class="n">Widget</span> <span class="nf">w1</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>


<span class="c1">// 생성자가 아닌 Widget을 반환 타입으로 가지는 w2라는 이름의 함수를 선언</span>
<span class="n">Widget</span> <span class="nf">w2</span><span class="p">();</span>    
</pre></table></code></div></div><ul><li>하지만 매개변수 목록을 중괄호로 감싸면 함수를 선언할 수 없으므로 중괄호를 사용하면 된다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="c1">// 인수 없이 Widget의 생성자 호출</span>
<span class="n">Widget</span> <span class="n">w3</span><span class="p">{};</span>
</pre></table></code></div></div><p><br /></p><h1 id="중괄호-초기화의-단점">중괄호 초기화의 단점</h1><ul><li><p>중괄호 초기화의 단점은 종종 예상치 못한 행동을 보여준다.</p><li><p>그러한 단점들은 중괄호와 std::initializer_list, 생성자 오버로딩 사이 뒤얽힌 관계에서 비롯된다.</p></ul><p><br /></p><h2 id="stdinitializer_list"><span class="mr-2">std::initializer_list</span><a href="#stdinitializer_list" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p>std::initializer_list가 들어있지 않는 생성자 호출이라면 괄호와 중괄호의 의미는 같다.</p><li><p>하지만 std::initializer_list가 들어있는 생성자가 있을 경우 그 버전을 강하게 선호하는 경향이 있다.</p></ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c1">// std::initializer_list 생성자 추가 전</span>
<span class="k">class</span> <span class="nc">Widget</span><span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Widget</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">Widget</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">);</span>
<span class="p">};</span>

<span class="n">Widget</span> <span class="n">w1</span><span class="p">{</span><span class="mi">10</span><span class="p">,</span><span class="nb">true</span><span class="p">};</span> <span class="c1">// int, bool</span>
<span class="n">Widget</span> <span class="n">w2</span><span class="p">{</span><span class="mi">10</span><span class="p">,</span><span class="mf">5.0</span><span class="p">};</span>  <span class="c1">// int, double</span>
</pre></table></code></div></div><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c1">// std::initializer_list 생성자 추가 후</span>
<span class="k">class</span> <span class="nc">Widget</span><span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Widget</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">Widget</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">Widget</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="kt">long</span> <span class="kt">double</span><span class="o">&gt;</span> <span class="n">il</span><span class="p">);</span> <span class="c1">// 추가</span>
<span class="p">};</span>

<span class="n">Widget</span> <span class="n">w3</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="nb">true</span><span class="p">);</span> <span class="c1">// int,bool</span>
<span class="n">Widget</span> <span class="n">w4</span><span class="p">{</span><span class="mi">10</span><span class="p">,</span><span class="nb">true</span><span class="p">};</span> <span class="c1">// initializer_list 버전 호출 </span>
</pre></table></code></div></div><p><br /></p><h3 id="복사-이동생성자와-initializer_list"><span class="mr-2">복사, 이동생성자와 initializer_list</span><a href="#복사-이동생성자와-initializer_list" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>복사 생성이나 이동 생성이 일어났을 상황에서도 initializer_list 생성자 버전이 기회를 가로치는 경우도 있다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="c1">// 연산자 추가</span>
<span class="k">class</span> <span class="nc">Widget</span><span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Widget</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">Widget</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">Widget</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="kt">long</span> <span class="kt">double</span><span class="o">&gt;</span> <span class="n">il</span><span class="p">);</span>
    <span class="k">operator</span> <span class="kt">float</span><span class="p">()</span> <span class="k">const</span><span class="p">;</span> <span class="c1">// 추가</span>
<span class="p">};</span>

<span class="n">Widget</span> <span class="n">w1</span><span class="p">;</span>      <span class="c1">// 기본 추가</span>

<span class="n">Widget</span> <span class="n">w2</span><span class="p">(</span><span class="n">w1</span><span class="p">);</span>  <span class="c1">// 복사 생성자 호출</span>
<span class="n">Widget</span> <span class="n">w3</span><span class="p">{</span><span class="n">w1</span><span class="p">};</span>  <span class="c1">// initializer_list 생성자 버전 호출</span>

<span class="n">Widget</span> <span class="n">w4</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">w1</span><span class="p">));</span> <span class="c1">// 이동 생성자 호출</span>
<span class="n">Widget</span> <span class="n">w5</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">w1</span><span class="p">)};</span> <span class="c1">// initializer_list 생성자 버전 호출</span>
</pre></table></code></div></div><p><br /></p><h2 id="initializer_list-생성자-에러"><span class="mr-2">initializer_list 생성자 에러</span><a href="#initializer_list-생성자-에러" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>심지어 initializer_list 생성자 버전이 최선이여도,그 생성자를 호출할 수 없는 기이한 현상이 생기기도 한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Widget</span>
<span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Widget</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">Widget</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="kt">double</span> <span class="n">b</span><span class="p">);</span>
    <span class="n">Widget</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span> <span class="n">il</span><span class="p">);</span>
<span class="p">};</span>

<span class="n">Widget</span> <span class="n">w</span><span class="p">{</span><span class="mi">10</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">};</span>  <span class="c1">// 오류! 좁히기 변환이 필요</span>
</pre></table></code></div></div><ul><li><p>위와 같은 경우, int와 double을 각각 bool로 변환해야 하는데 좁히기 변환은 중괄호 초기화에서 허용되지 않아 컴파일이 되지 않는다.</p><li><p>컴파일러가 initializer_list가 아닌 오버로딩 함수를 고를 때에는 중괄호 초기치의 인수 형식들을 initializer_list 안의 형식으로 변환이 아예 없을 경우뿐이다.</p></ul><p><br /></p><h2 id="괄호와-중괄호-경우의-수"><span class="mr-2">괄호와 중괄호 경우의 수</span><a href="#괄호와-중괄호-경우의-수" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p>마지막으로, 생성자의 오버로딩 중 initializer_list 버전이 있는 경우에서 괄호와 중괄호같은 경우 다음과 같다.</p><li><p>중괄호는 기본 생성자 호출, 괄호는 함수 선언이 되어버린다.</p><li><p>initializer_list가 비어있는 생성자 버전을 호출하고 싶을 경우 괄호와 중괄호를 같이 사용해야 한다.</p></ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Widget</span>
<span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">Widget</span><span class="p">();</span>
    <span class="n">Widget</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">initializer_list</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">il</span><span class="p">);</span>
<span class="p">};</span>

<span class="n">Widget</span> <span class="n">w1</span><span class="p">;</span>      <span class="c1">// 기본 생성자</span>

<span class="n">Widget</span> <span class="n">w2</span><span class="p">{};</span>    <span class="c1">// 기본 생성자 호출</span>

<span class="n">Widget</span> <span class="n">w3</span><span class="p">();</span>    <span class="c1">// 함수 선언이라 오류</span>

<span class="n">Widget</span> <span class="n">w4</span><span class="p">({});</span>  <span class="c1">// 빈 initializer_list 생성자 호출</span>

<span class="n">Widget</span> <span class="n">w5</span><span class="p">;</span>  <span class="c1">// 빈 initializer_list 생성자 호출</span>
</pre></table></code></div></div><p><br /></p><h1 id="vector에서의-괄호와-중괄호">vector에서의 괄호와 중괄호</h1><ul><li>vector안에도 initializer_list 생성자 버전이 있는데 이 생성자 때문에 괄호와 중괄호의 의미가 달라진다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v1</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span> <span class="c1">// 값이 20인 원소 10개 생성</span>

<span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v2</span><span class="p">{</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">};</span> <span class="c1">// 값이 10인 원소와 값이 20인 원소, 총 2개 원소</span>
</pre></table></code></div></div><p><br /></p><h1 id="템플릿에서의-괄호와-중괄호">템플릿에서의 괄호와 중괄호</h1><ul><li>템플릿을 작성하는 프로그래머에겐 객체 생성 시 괄호와 중괄호 중 어떤 것을 사용해야 하는지 모르는 경우가 생긴다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="nc">T</span><span class="p">,</span> <span class="n">typenames</span><span class="p">...</span> <span class="n">Ts</span><span class="p">&gt;</span>
<span class="kt">void</span> <span class="nf">doSomeWork</span><span class="p">(</span><span class="n">Ts</span><span class="o">&amp;&amp;</span><span class="p">...</span> <span class="n">params</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// params...으로부터 지역 T 객체 생성</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li>함수 본문에 지역 T객체를 생성하는 코드를 다음과 같이 바꿀 수 있다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">T</span> <span class="nf">localObject</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Ts</span><span class="o">&gt;</span><span class="p">(</span><span class="n">params</span><span class="p">)...);</span> <span class="c1">// 괄호</span>

<span class="n">T</span> <span class="n">localObject</span><span class="p">{</span><span class="n">std</span><span class="o">::</span><span class="n">forward</span><span class="o">&lt;</span><span class="n">Ts</span><span class="o">&gt;</span><span class="p">(</span><span class="n">params</span><span class="p">)...};</span> <span class="c1">// 중괄호</span>
</pre></table></code></div></div><ul><li>그리고 다음과 같은 호출 코드를 생각해보자</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">v</span><span class="p">;</span>

<span class="n">doSomework</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
</pre></table></code></div></div><ul><li><p>이렇게 되면 괄호를 사용하면 요소가 10개인 vector, 중괄호를 사용하면 요소가 2개인 vector가 생긴다.</p><li><p>어느 쪽이 옳은지는 doSomeWork 작성자가 알수 없고 호출자만이 알 수 있다.</p><li><p>이는 표준 라이브러리 함수 <code class="language-plaintext highlighter-rouge">std::make_unique</code>와 <code class="language-plaintext highlighter-rouge">std::make_shared</code>가 해결해야 했던 문제와 동일하다.</p><ul><li>두 함수는 내부적으로 괄호를 사용하고,그러한 결정을 인터페이스의 일부에 문서화함으로써 문제를 해결한다.</ul></ul><p><br /></p><h1 id="결론"><strong>결론</strong></h1><blockquote><p>이것만은 잊지 말자!</p><ul class="prompt-tip"><li><p>중괄호 초기화는 가장 광범위하게 적용할 수 있는 초기화 구문이며, 좁히기 변환을 방지하고, C++의 가장 성가신 구문 해석에 자유롭다</p><li><p>생성자 오버로딩에서 중괄호 초기화는 가능한 initialize_list 매개변수가 있는 생성자를 우선적으로 선택한다</p><li><p>괄호와 중괄호의 선택이 의미 있는 차이를 만드는 예는 인수 두개로 vector&lt;T&gt;을 생성하는 것이다.</p><li><p>템플릿 안에서 객체를 생성할 때 중괄호인지 괄호인지 선택하기 어려울 수 있다.</p></ul></blockquote></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/modern-effective-c/'>Modern Effective C++</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/modern-effective-c/" class="post-tag no-text-decoration" >modern effective c++</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%EA%B0%9D%EC%B2%B4+%EC%83%9D%EC%84%B1+%EC%8B%9C+%EA%B4%84%ED%98%B8+%28%28%29%29+%EC%99%80+%EC%A4%91%EA%B4%84%ED%98%B8+%28%7B%7D%29%EB%A5%BC+%EA%B5%AC%EB%B6%84%ED%95%B4%EB%9D%BC+-+yjh9317&url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F7.Distinguish-between-%28%29-and-when-creating-objects%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%EA%B0%9D%EC%B2%B4+%EC%83%9D%EC%84%B1+%EC%8B%9C+%EA%B4%84%ED%98%B8+%28%28%29%29+%EC%99%80+%EC%A4%91%EA%B4%84%ED%98%B8+%28%7B%7D%29%EB%A5%BC+%EA%B5%AC%EB%B6%84%ED%95%B4%EB%9D%BC+-+yjh9317&u=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F7.Distinguish-between-%28%29-and-when-creating-objects%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F7.Distinguish-between-%28%29-and-when-creating-objects%2F&text=%EA%B0%9D%EC%B2%B4+%EC%83%9D%EC%84%B1+%EC%8B%9C+%EA%B4%84%ED%98%B8+%28%28%29%29+%EC%99%80+%EC%A4%91%EA%B4%84%ED%98%B8+%28%7B%7D%29%EB%A5%BC+%EA%B5%AC%EB%B6%84%ED%95%B4%EB%9D%BC+-+yjh9317" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Gameplay-Param/">GameplayTag Param</a><li><a href="/posts/Device/">Device</a><li><a href="/posts/SwapChain/">SwapChain</a><li><a href="/posts/VertexBuffer/">VertexBuffer</a><li><a href="/posts/IndexBuffer/">IndexBuffer</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/2.Understand-auto-type-deduction/"><div class="card-body"> <em class="small" data-ts="1705503600" data-df="ll" > Jan 18, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>auto의 형식 연역 규칙을 숙지하라</h3><div class="text-muted small"><p> auto와 템플릿 auto 형식은 한가지 예외만 빼면 템플릿과 똑같이 작동한다. auto 형식 연역과 템플릿 형식 연역 사이에는 직접적인 대응 관계가 존재한다. // 템플릿 template&amp;lt;typename T&amp;gt; void f(ParamType param); f(expr); auto를 이용한...</p></div></div></a></div><div class="card"> <a href="/posts/3.Understand-decltype/"><div class="card-body"> <em class="small" data-ts="1705762800" data-df="ll" > Jan 21, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>decltype의 작동 방식을 숙지하라</h3><div class="text-muted small"><p> decltype은 주어진 이름이나 표현식의 형식을 알려주는 키워드 하지만 가끔 예상밖의 결과를 제공 대부분의 경우 템플릿과 auto와 달리 decltype은 그대로의 결과를 도출한다. const int i = 0; // decltype(i)는 const int bool f(c...</p></div></div></a></div><div class="card"> <a href="/posts/4.Know-how-to-view-deduced-types/"><div class="card-body"> <em class="small" data-ts="1706022000" data-df="ll" > Jan 24, 2024 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>연역된 형식을 파악하는 방법을 알아두라.</h3><div class="text-muted small"><p> 형식 연역 결과를 직접 확인하는 수단은 필요한 시점에 따라 다르다. 이번 항목에선 3가지 시점으로 살펴본다. IDE 편집기 IDE 코드 편집기는 프로그램 개체(변수,매개변수,함수 등)을 마우스 커서에 올리면 개채 형식을 표현해준다. 이런 일이 가능하려면 코드가 어느정도 컴파일 ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/6.Use-the-explicitly-typed-initializer-idiom-when-auto-deduces-undesired-types/" class="btn btn-outline-primary" prompt="Older"><p>auto가 원치 않은 형식으로 연역될 때에는 명시적 형식의 초기치를 사용하라</p></a> <a href="/posts/8.Prefer-nullptr-to-0-and-NULL/" class="btn btn-outline-primary" prompt="Newer"><p>0과 NULL보다 nullptr를 선호하라</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Yang jeong hyeon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
