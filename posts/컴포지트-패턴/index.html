<!DOCTYPE html><html lang="ko" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="컴포지트 패턴" /><meta property="og:locale" content="ko" /><meta name="description" content="컴포지트 패턴" /><meta property="og:description" content="컴포지트 패턴" /><link rel="canonical" href="https://yjh9317.github.io/posts/%EC%BB%B4%ED%8F%AC%EC%A7%80%ED%8A%B8-%ED%8C%A8%ED%84%B4/" /><meta property="og:url" content="https://yjh9317.github.io/posts/%EC%BB%B4%ED%8F%AC%EC%A7%80%ED%8A%B8-%ED%8C%A8%ED%84%B4/" /><meta property="og:site_name" content="yjh9317" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-05-09T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="컴포지트 패턴" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-06-17T15:34:32+09:00","datePublished":"2023-05-09T00:00:00+09:00","description":"컴포지트 패턴","headline":"컴포지트 패턴","mainEntityOfPage":{"@type":"WebPage","@id":"https://yjh9317.github.io/posts/%EC%BB%B4%ED%8F%AC%EC%A7%80%ED%8A%B8-%ED%8C%A8%ED%84%B4/"},"url":"https://yjh9317.github.io/posts/%EC%BB%B4%ED%8F%AC%EC%A7%80%ED%8A%B8-%ED%8C%A8%ED%84%B4/"}</script><title>컴포지트 패턴 | yjh9317</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="yjh9317"><meta name="application-name" content="yjh9317"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> </a></div><div class="site-title mt-3"> <a href="/">yjh9317</a></div><div class="site-subtitle font-italic">코딩열심히하려는사람</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/yjh9317" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>컴포지트 패턴</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>컴포지트 패턴</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1683558000" data-df="ll" data-toggle="tooltip" data-placement="bottom"> May 9, 2023 </em> </span> <span> Updated <em class="" data-ts="1750142072" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 17, 2025 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">Yang jeong hyeon</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1800 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><h1 id="컴포지트-패턴">컴포지트 패턴</h1><ul><li><p><code class="language-plaintext highlighter-rouge">객체들을 트리 구조로 구성하여 부분-전체 계층(part-whole hierarchy)을 표현하는 구조 패턴</code></p><li><p>이 패턴의 핵심은 클라이언트가 <strong>개별 객체(leaf)</strong>와 <strong>복합 객체(composite)</strong>를 동일한 방식으로 다룰 수 있도록 하는 것이다.</p><li>간단히 말해, ‘단일 객체’와 ‘객체들의 그룹’을 구분하지 않고 똑같이 취급할 수 있게 만드는 패턴이다.<li>게임 개발에서 이 패턴은 거의 모든 게임 엔진의 핵심 구조인 <strong>씬 그래프(Scene Graph)</strong>나 UI 시스템을 구축하는 데 근간이 된다.</ul><h2 id="문제-상황-개별-객체와-그룹의-분리"><span class="mr-2">문제 상황: 개별 객체와 그룹의 분리</span><a href="#문제-상황-개별-객체와-그룹의-분리" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>게임 화면에 여러 그래픽 객체를 렌더링해야 한다고 가정해보자.<li><p>개별적으로 움직이는 Sprite 객체가 있고, 여러 Sprite가 모여 하나의 단위처럼 움직이는 Player 그룹이 있다.</p><li>가장 단순한 접근법은 각 타입을 위한 별개의 클래스를 만드는 것이다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="c1">// 개별 스프라이트 객체</span>
<span class="k">class</span> <span class="nc">Sprite</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">Render</span><span class="p">()</span> <span class="p">{</span> <span class="cm">/* 스프라이트 하나를 화면에 그린다 */</span> <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 스프라이트 그룹 객체</span>
<span class="k">class</span> <span class="nc">SpriteGroup</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">Sprite</span><span class="o">*&gt;</span> <span class="n">sprites</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="kt">void</span> <span class="n">RenderGroup</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">sprite</span> <span class="o">:</span> <span class="n">sprites</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">sprite</span><span class="o">-&gt;</span><span class="n">Render</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><ul><li>이 방식은 클라이언트 코드(예: 메인 렌더링 루프)를 매우 번거롭게 만든다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c1">// 클라이언트 코드</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">any</span><span class="o">&gt;</span> <span class="n">sceneObjects</span><span class="p">;</span> <span class="c1">// Sprite와 SpriteGroup을 함께 담기 위해 any 사용</span>

<span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">obj</span> <span class="o">:</span> <span class="n">sceneObjects</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 렌더링을 위해 매번 타입을 확인해야 한다.</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="k">typeid</span><span class="p">(</span><span class="n">Sprite</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">any_cast</span><span class="o">&lt;</span><span class="n">Sprite</span><span class="o">&amp;&gt;</span><span class="p">(</span><span class="n">obj</span><span class="p">).</span><span class="n">Render</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">obj</span><span class="p">.</span><span class="n">type</span><span class="p">()</span> <span class="o">==</span> <span class="k">typeid</span><span class="p">(</span><span class="n">SpriteGroup</span><span class="p">))</span> <span class="p">{</span>
        <span class="c1">// 메서드 이름도 다르다!</span>
        <span class="n">any_cast</span><span class="o">&lt;</span><span class="n">SpriteGroup</span><span class="o">&amp;&gt;</span><span class="p">(</span><span class="n">obj</span><span class="p">).</span><span class="n">RenderGroup</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li>이런 코드는 새로운 객체 타입이 추가될 때마다 if-else 분기문이 계속 늘어나고, 그룹 안에 또 다른 그룹을 넣는 중첩 구조를 만들기도 어렵다.<li>이는 확장성이 매우 떨어지는 나쁜 설계다.</ul><h2 id="해결책-컴포지트-패턴으로-인터페이스-통일"><span class="mr-2">해결책: 컴포지트 패턴으로 인터페이스 통일</span><a href="#해결책-컴포지트-패턴으로-인터페이스-통일" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>컴포지트 패턴은 이 문제를 공통 인터페이스를 통해 해결한다.</ul><h3 id="1공통-컴포넌트-인터페이스component-interface-정의"><span class="mr-2">1.공통 컴포넌트 인터페이스(Component Interface) 정의</span><a href="#1공통-컴포넌트-인터페이스component-interface-정의" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>먼저, 개별 객체와 복합 객체가 모두 구현해야 할 공통 인터페이스를 정의한다. * 게임 객체의 가장 기본적인 행위인 Update와 Render를 포함하는 ISceneNode 인터페이스를 만들어 보자.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="c1">// 모든 씬 객체(노드)를 위한 공통 인터페이스</span>
<span class="k">class</span> <span class="nc">ISceneNode</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">ISceneNode</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Update</span><span class="p">(</span><span class="kt">float</span> <span class="n">deltaTime</span><span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Render</span><span class="p">()</span> <span class="k">const</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="2-잎leaf-클래스-구현"><span class="mr-2">2. 잎(Leaf) 클래스 구현</span><a href="#2-잎leaf-클래스-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>트리 구조의 가장 말단에 위치하는 개별 객체, 즉 ‘잎’을 구현한다.<li>잎 노드는 자식 노드를 가질 수 없다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="c1">// 개별 스프라이트를 나타내는 '잎' 노드</span>
<span class="k">class</span> <span class="nc">SpriteNode</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ISceneNode</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">string</span> <span class="n">spritePath</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">SpriteNode</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">path</span><span class="p">)</span> <span class="o">:</span> <span class="n">spritePath</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="p">{}</span>

    <span class="kt">void</span> <span class="n">Update</span><span class="p">(</span><span class="kt">float</span> <span class="n">deltaTime</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
        <span class="c1">// 이 스프라이트만의 위치 업데이트 등...</span>
    <span class="p">}</span>
    <span class="kt">void</span> <span class="n">Render</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"Rendering sprite: "</span> <span class="o">&lt;&lt;</span> <span class="n">spritePath</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="3-복합composite-클래스-구현"><span class="mr-2">3. 복합(Composite) 클래스 구현</span><a href="#3-복합composite-클래스-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p>다른 ISceneNode 객체들을 자식으로 가질 수 있는 ‘복합’ 객체를 구현한다.</p><li><p>이 복합 객체는 자신에게 요청된 작업을 자식들에게 재귀적으로 전파하는 역할을 한다.</p></ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;algorithm&gt;</span><span class="cp">
</span>
<span class="c1">// 다른 노드들을 자식으로 가질 수 있는 '복합' 노드</span>
<span class="k">class</span> <span class="nc">GroupNode</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ISceneNode</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ISceneNode</span><span class="o">&gt;&gt;</span> <span class="n">children</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">name</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">GroupNode</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">name</span><span class="p">)</span> <span class="o">:</span> <span class="n">name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="p">{}</span>

    <span class="kt">void</span> <span class="n">Add</span><span class="p">(</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ISceneNode</span><span class="o">&gt;</span> <span class="n">child</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">children</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">child</span><span class="p">));</span>
    <span class="p">}</span>

    <span class="c1">// Update 요청이 오면, 모든 자식에게 Update를 전파한다.</span>
    <span class="kt">void</span> <span class="n">Update</span><span class="p">(</span><span class="kt">float</span> <span class="n">deltaTime</span><span class="p">)</span> <span class="k">override</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="n">child</span> <span class="o">:</span> <span class="n">children</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">child</span><span class="o">-&gt;</span><span class="n">Update</span><span class="p">(</span><span class="n">deltaTime</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// Render 요청이 오면, 모든 자식에게 Render를 전파한다.</span>
    <span class="kt">void</span> <span class="n">Render</span><span class="p">()</span> <span class="k">const</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"--- Start Group: "</span> <span class="o">&lt;&lt;</span> <span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">" ---"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="n">child</span> <span class="o">:</span> <span class="n">children</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">child</span><span class="o">-&gt;</span><span class="n">Render</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"--- End Group: "</span> <span class="o">&lt;&lt;</span> <span class="n">name</span> <span class="o">&lt;&lt;</span> <span class="s">" ---"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><h3 id="4-씬-그래프scene-graph-구축-및-사용"><span class="mr-2">4. 씬 그래프(Scene Graph) 구축 및 사용</span><a href="#4-씬-그래프scene-graph-구축-및-사용" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li>이제 이 노드들을 조합하여 트리 구조(씬 그래프)를 만들 수 있다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="c1">// 씬 그래프 구축</span>
<span class="k">auto</span> <span class="n">root</span> <span class="o">=</span> <span class="n">make_unique</span><span class="o">&lt;</span><span class="n">GroupNode</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"Root"</span><span class="p">);</span>
<span class="n">root</span><span class="o">-&gt;</span><span class="n">Add</span><span class="p">(</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">SpriteNode</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"background.png"</span><span class="p">));</span>

<span class="c1">// 플레이어 그룹 생성 (그룹 안에 다른 노드들을 포함)</span>
<span class="k">auto</span> <span class="n">playerGroup</span> <span class="o">=</span> <span class="n">make_unique</span><span class="o">&lt;</span><span class="n">GroupNode</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"Player"</span><span class="p">);</span>
<span class="n">playerGroup</span><span class="o">-&gt;</span><span class="n">Add</span><span class="p">(</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">SpriteNode</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"player_body.png"</span><span class="p">));</span>
<span class="n">playerGroup</span><span class="o">-&gt;</span><span class="n">Add</span><span class="p">(</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">SpriteNode</span><span class="o">&gt;</span><span class="p">(</span><span class="s">"player_weapon.png"</span><span class="p">));</span>

<span class="c1">// 루트에 플레이어 그룹 추가 (그룹 안에 그룹이 중첩됨)</span>
<span class="n">root</span><span class="o">-&gt;</span><span class="n">Add</span><span class="p">(</span><span class="n">move</span><span class="p">(</span><span class="n">playerGroup</span><span class="p">));</span>

<span class="c1">// 메인 게임 루프</span>
<span class="kt">float</span> <span class="n">deltaTime</span> <span class="o">=</span> <span class="mf">0.016</span><span class="n">f</span><span class="p">;</span>
<span class="c1">// 루트 노드에 한 번만 Update와 Render를 호출한다.</span>
<span class="n">root</span><span class="o">-&gt;</span><span class="n">Update</span><span class="p">(</span><span class="n">deltaTime</span><span class="p">);</span>
<span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"</span><span class="se">\n</span><span class="s">--- Rendering Frame ---"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="n">root</span><span class="o">-&gt;</span><span class="n">Render</span><span class="p">();</span>
</pre></table></code></div></div><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="c1">//결과</span>
<span class="o">---</span> <span class="n">Rendering</span> <span class="n">Frame</span> <span class="o">---</span>
<span class="o">---</span> <span class="n">Start</span> <span class="n">Group</span><span class="o">:</span> <span class="n">Root</span> <span class="o">---</span>
<span class="n">Rendering</span> <span class="n">sprite</span><span class="o">:</span> <span class="n">background</span><span class="p">.</span><span class="n">png</span>
<span class="o">---</span> <span class="n">Start</span> <span class="n">Group</span><span class="o">:</span> <span class="n">Player</span> <span class="o">---</span>
<span class="n">Rendering</span> <span class="n">sprite</span><span class="o">:</span> <span class="n">player_body</span><span class="p">.</span><span class="n">png</span>
<span class="n">Rendering</span> <span class="n">sprite</span><span class="o">:</span> <span class="n">player_weapon</span><span class="p">.</span><span class="n">png</span>
<span class="o">---</span> <span class="n">End</span> <span class="n">Group</span><span class="o">:</span> <span class="n">Player</span> <span class="o">---</span>
<span class="o">---</span> <span class="n">End</span> <span class="n">Group</span><span class="o">:</span> <span class="n">Root</span> <span class="o">---</span>
</pre></table></code></div></div><ul><li>게임의 메인 루프는 이제 root가 단일 스프라이트인지, 수천 개의 객체가 중첩된 복잡한 그룹인지 전혀 신경 쓸 필요가 없다.<li>그저 root의 Update와 Render를 호출하면, 패턴에 의해 모든 작업이 재귀적으로 올바르게 처리된다. 이것이 컴포지트 패턴의 힘이다.</ul><h1 id="요약">요약</h1><ul><li><p>컴포지트 패턴은 객체들을 트리 구조로 구성하여, 부분과 전체를 같은 방식으로 다룰 수 있게 한다.</p><li><p>클라이언트는 <strong>개별 객체(Leaf)</strong>와 <strong>객체 그룹(Composite)</strong>을 구분하지 않고 <strong>공통 인터페이스(Component)</strong>를 통해 상호작용할 수 있다.</p></ul><h2 id="장점"><span class="mr-2">장점</span><a href="#장점" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li><p><code class="language-plaintext highlighter-rouge">단순화된 클라이언트 코드</code>: 클라이언트는 객체의 복잡한 구조를 알 필요 없이 단일 인터페이스만 사용하면 되므로 코드가 단순해진다.</p><li><p><code class="language-plaintext highlighter-rouge">계층 구조의 유연한 관리</code>: 객체의 추가, 삭제 등 트리 구조를 동적으로 쉽게 관리할 수 있다.</p><li><p><code class="language-plaintext highlighter-rouge">높은 확장성</code>: 새로운 종류의 잎(Leaf)이나 복합(Composite) 객체를 추가해도 클라이언트 코드는 전혀 영향을 받지 않는다.</p><li><p><code class="language-plaintext highlighter-rouge">재귀적 구조의 자연스러운 처리</code>: 트리 구조를 순회하는 로직을 매우 간결하고 자연스럽게 구현할 수 있다.</p><li><p>게임의 씬 그래프, UI 계층 구조, 복잡한 캐릭터의 파츠 관리 등, 부분과 전체를 동일하게 다뤄야 하는 거의 모든 문제에 컴포지트 패턴은 효과적이고 우아한 해결책을 제공한다.</p></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4/'>디자인 패턴</a>, <a href='/categories/%EA%B5%AC%EC%A1%B0-%ED%8C%A8%ED%84%B4/'>구조 패턴</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/design-pattern/" class="post-tag no-text-decoration" >design pattern</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%EC%BB%B4%ED%8F%AC%EC%A7%80%ED%8A%B8+%ED%8C%A8%ED%84%B4+-+yjh9317&url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EC%25BB%25B4%25ED%258F%25AC%25EC%25A7%2580%25ED%258A%25B8-%25ED%258C%25A8%25ED%2584%25B4%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%EC%BB%B4%ED%8F%AC%EC%A7%80%ED%8A%B8+%ED%8C%A8%ED%84%B4+-+yjh9317&u=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EC%25BB%25B4%25ED%258F%25AC%25EC%25A7%2580%25ED%258A%25B8-%25ED%258C%25A8%25ED%2584%25B4%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EC%25BB%25B4%25ED%258F%25AC%25EC%25A7%2580%25ED%258A%25B8-%25ED%258C%25A8%25ED%2584%25B4%2F&text=%EC%BB%B4%ED%8F%AC%EC%A7%80%ED%8A%B8+%ED%8C%A8%ED%84%B4+-+yjh9317" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Gameplay-Param/">GameplayTag Param</a><li><a href="/posts/Device/">Device</a><li><a href="/posts/SwapChain/">SwapChain</a><li><a href="/posts/VertexBuffer/">VertexBuffer</a><li><a href="/posts/IndexBuffer/">IndexBuffer</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%EC%96%B4%EB%8C%91%ED%84%B0-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1682866800" data-df="ll" > May 1, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>어댑터 패턴</h3><div class="text-muted small"><p> 어댑터 특정 클래스의 인터페이스를 클라이언트가 기대하는 다른 인터페이스로 변환하는 구조 패턴 서로 호환되지 않는 인터페이스를 가진 클래스들이 함께 작동할 수 있도록, 중간에서 번역기나 변환기 역할을 하는 클래스를 두는 방식 가장 흔한 비유는 해외여행 시 사용하는 ‘전원 어댑터’다. 한국의 220V 플러그를...</p></div></div></a></div><div class="card"> <a href="/posts/%EB%B8%8C%EB%A6%BF%EC%A7%80-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1683126000" data-df="ll" > May 4, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>브릿지 패턴</h3><div class="text-muted small"><p> 프롤로그 브릿지 패턴을 이해하기 전에, C++ 개발자들이 컴파일 시간을 줄이기 위해 오랫동안 사용해 온 Pimpl(Pointer to implementation) 관례를 먼저 살펴보는 것이 도움이 된다. 이는 브릿지 패턴의 매우 구체적이고 실용적인 예시이기 때문이다. Pimpl의 핵심은 클래스의 구현부를 헤더 파일(.h)에...</p></div></div></a></div><div class="card"> <a href="/posts/%EB%8D%B0%EC%BD%94%EB%A0%88%EC%9D%B4%ED%84%B0-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1683817200" data-df="ll" > May 12, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>데코레이터 패턴</h3><div class="text-muted small"><p> 데코레이터 패턴 다른 사람이 작성한 클래스나 외부 라이브러리에 새로운 기능을 추가해야 하는 상황을 생각해보자. 원본 코드를 직접 수정하는 것은 불가능하거나 바람직하지 않다. 가장 먼저 떠오르는 방법은 상속이지만, 상속은 항상 최선의 선택이 아니다. 특히 추가하려는 기능이 여러 종류일 때, 상속은 클래스의 폭발적인 증가를 야...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EB%B8%8C%EB%A6%BF%EC%A7%80-%ED%8C%A8%ED%84%B4/" class="btn btn-outline-primary" prompt="Older"><p>브릿지 패턴</p></a> <a href="/posts/UPROPERTY/" class="btn btn-outline-primary" prompt="Newer"><p>UPROPERTY</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Yang jeong hyeon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
