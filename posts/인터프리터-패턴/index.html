<!DOCTYPE html><html lang="ko" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="인터프리터 패턴" /><meta property="og:locale" content="ko" /><meta name="description" content="인터프리터 패턴" /><meta property="og:description" content="인터프리터 패턴" /><link rel="canonical" href="https://yjh9317.github.io/posts/%EC%9D%B8%ED%84%B0%ED%94%84%EB%A6%AC%ED%84%B0-%ED%8C%A8%ED%84%B4/" /><meta property="og:url" content="https://yjh9317.github.io/posts/%EC%9D%B8%ED%84%B0%ED%94%84%EB%A6%AC%ED%84%B0-%ED%8C%A8%ED%84%B4/" /><meta property="og:site_name" content="yjh9317" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-06-08T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="인터프리터 패턴" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-06-17T15:34:32+09:00","datePublished":"2023-06-08T00:00:00+09:00","description":"인터프리터 패턴","headline":"인터프리터 패턴","mainEntityOfPage":{"@type":"WebPage","@id":"https://yjh9317.github.io/posts/%EC%9D%B8%ED%84%B0%ED%94%84%EB%A6%AC%ED%84%B0-%ED%8C%A8%ED%84%B4/"},"url":"https://yjh9317.github.io/posts/%EC%9D%B8%ED%84%B0%ED%94%84%EB%A6%AC%ED%84%B0-%ED%8C%A8%ED%84%B4/"}</script><title>인터프리터 패턴 | yjh9317</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="yjh9317"><meta name="application-name" content="yjh9317"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> </a></div><div class="site-title mt-3"> <a href="/">yjh9317</a></div><div class="site-subtitle font-italic">코딩열심히하려는사람</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/yjh9317" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>인터프리터 패턴</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>인터프리터 패턴</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1686150000" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 8, 2023 </em> </span> <span> Updated <em class="" data-ts="1750142072" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 17, 2025 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">Yang jeong hyeon</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2065 words"> <em>11 min</em> read</span></div></div></div><div class="post-content"><h1 id="인터프리터-패턴">인터프리터 패턴</h1><ul><li><p>특정 ‘언어’에 대한 문법을 정의하고, 그 언어로 작성된 문장을 해석(interpret)하는 해석기를 제공하는 행위 디자인 패턴</p><li>쉽게 말해, 우리가 직접 정의한 간단한 규칙이나 언어를 이해하고 실행하는 엔진을 만드는 방법이다.<li><p>게임 개발에서는 NPC의 행동을 정의하는 간단한 스크립트, 퀘스트의 완료 조건, 아이템의 효과 설명 등을 파싱하고 실행하는 데 이 패턴을 활용할 수 있다.</p><li><p>이 패턴은 보통 다음의 두 단계를 거쳐 구현된다.</p><ul><li>1.렉싱(Lexing): 입력된 텍스트를 의미 있는 최소 단위인 ‘토큰(Token)’으로 분해한다.<li>2.파싱(Parsing): 토큰들의 나열을 분석하여, 실행 가능한 구조(보통 트리 형태)로 변환한다.</ul></ul><h2 id="시나리오--간단한-npc-행동-스크립트-만들기"><span class="mr-2">시나리오 : 간단한 NPC 행동 스크립트 만들기</span><a href="#시나리오--간단한-npc-행동-스크립트-만들기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>게임 디자이너나 기획자가 코드를 직접 수정하지 않고, 간단한 텍스트 스크립트로 NPC의 행동을 제어하게 하고 싶다고 가정하자. 우리가 만들 ‘언어’는 다음과 같다.</ul><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre># NPC 'Guard'를 (100, 50) 좌표로 이동시킨다.
MOVE Guard 100 50

# 'Guard'가 "멈춰!" 라고 말하게 한다.
SAY Guard "멈춰!"

# 2.5초간 기다린다.
WAIT 2.5
</pre></table></code></div></div><ul><li>이 스크립트를 읽고, 해석하고, 실제 게임 상에서 NPC를 움직이게 하는 인터프리터를 만들어 보자.</ul><h3 id="1단계-렉싱---스크립트를-토큰으로-분해하기"><span class="mr-2">1단계: 렉싱 - 스크립트를 토큰으로 분해하기</span><a href="#1단계-렉싱---스크립트를-토큰으로-분해하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><p><strong>렉싱(Lexing)</strong>은 날것의 문자열을 문법적으로 의미 있는 조각들, 즉 <strong>토큰(Token)</strong>으로 나누는 과정이다.</p><li><p>먼저 우리 언어에 필요한 토큰의 종류를 정의한다.</p></ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;string&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp">
</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="k">struct</span> <span class="nc">Token</span> <span class="p">{</span>
    <span class="c1">// 우리 언어의 토큰 타입 정의</span>
    <span class="k">enum</span> <span class="n">Type</span> <span class="p">{</span>
        <span class="n">KEYWORD</span><span class="p">,</span>    <span class="c1">// MOVE, SAY, WAIT 같은 명령어 키워드</span>
        <span class="n">IDENTIFIER</span><span class="p">,</span> <span class="c1">// Guard 같은 NPC 이름</span>
        <span class="n">NUMBER</span><span class="p">,</span>     <span class="c1">// 100, 50, 2.5 같은 숫자</span>
        <span class="n">STRING</span><span class="p">,</span>     <span class="c1">// "멈춰!" 같은 문자열</span>
        <span class="n">UNKNOWN</span>     <span class="c1">// 알 수 없는 토큰</span>
    <span class="p">}</span> <span class="n">type</span><span class="p">;</span>

    <span class="n">string</span> <span class="n">text</span><span class="p">;</span> <span class="c1">// 토큰의 원본 텍스트</span>

    <span class="n">Token</span><span class="p">(</span><span class="n">Type</span> <span class="n">type</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">text</span><span class="p">)</span> <span class="o">:</span> <span class="n">type</span><span class="p">(</span><span class="n">type</span><span class="p">),</span> <span class="n">text</span><span class="p">(</span><span class="n">text</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">};</span>
</pre></table></code></div></div><ul><li>이제 문자열을 입력받아 <code class="language-plaintext highlighter-rouge">vector&lt;Token&gt;</code>을 반환하는 간단한 Lexer 함수를 만든다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1">// 간단한 렉서 함수</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">Token</span><span class="o">&gt;</span> <span class="n">Lex</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">input</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">Token</span><span class="o">&gt;</span> <span class="n">tokens</span><span class="p">;</span>
    <span class="c1">// ... 실제 렉서는 공백, 따옴표 등을 정교하게 처리해야 하지만 여기서는 개념만 표현한다.</span>
    <span class="c1">// 예: "MOVE Guard 100 50" -&gt; {KEYWORD, "MOVE"}, {IDENTIFIER, "Guard"}, {NUMBER, "100"}, {NUMBER, "50"}</span>
    <span class="c1">// ...</span>
    <span class="k">return</span> <span class="n">tokens</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li>렉싱이 완료되면, <code class="language-plaintext highlighter-rouge">MOVE Guard 100 50</code> 이라는 문자열은 <code class="language-plaintext highlighter-rouge">[{KEYWORD, "MOVE"}, {IDENTIFIER, "Guard"}, {NUMBER, "100"}, {NUMBER, "50"}]</code> 와 같은 토큰의 스트림으로 변환된다.</ul><h3 id="2단계-파싱---토큰을-실행-가능한-구조로-변환하기"><span class="mr-2">2단계: 파싱 - 토큰을 실행 가능한 구조로 변환하기</span><a href="#2단계-파싱---토큰을-실행-가능한-구조로-변환하기" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><ul><li><strong>파싱(Parsing)</strong>은 렉서가 생성한 토큰 스트림을 읽어, 문법 규칙에 따라 의미 있는 구조로 만드는 과정이다.<li>여기서는 각 스크립트 명령어를 실행 가능한 커맨드(Command) 객체로 변환한다.</ul><h4 id="1-모든-커맨드가-따를-공통-인터페이스abstract-expression-정의"><span class="mr-2">1. 모든 커맨드가 따를 공통 인터페이스(Abstract Expression) 정의</span><a href="#1-모든-커맨드가-따를-공통-인터페이스abstract-expression-정의" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>이는 인터프리터 패턴의 ‘추상 표현식’에 해당하며, 여기서는 커맨드 패턴을 함께 활용한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="c1">// 모든 스크립트 커맨드의 기본 인터페이스</span>
<span class="k">class</span> <span class="nc">ICommand</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="k">virtual</span> <span class="o">~</span><span class="n">ICommand</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
    <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Execute</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>
</pre></table></code></div></div><h4 id="2-구체적인-커맨드concrete-expression-구현"><span class="mr-2">2. 구체적인 커맨드(Concrete Expression) 구현</span><a href="#2-구체적인-커맨드concrete-expression-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>각각의 스크립트 명령어에 해당하는 구체적인 커맨드 클래스를 만든다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre><td class="rouge-code"><pre><span class="cp">#include</span> <span class="cpf">&lt;memory&gt;</span><span class="cp">
</span>
<span class="c1">// MOVE 커맨드</span>
<span class="k">class</span> <span class="nc">MoveCommand</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ICommand</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">string</span> <span class="n">targetNpc</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">MoveCommand</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">target</span><span class="p">,</span> <span class="kt">float</span> <span class="n">x</span><span class="p">,</span> <span class="kt">float</span> <span class="n">y</span><span class="p">)</span> <span class="o">:</span> <span class="n">targetNpc</span><span class="p">(</span><span class="n">target</span><span class="p">),</span> <span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">y</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="p">{}</span>
    <span class="kt">void</span> <span class="n">Execute</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">targetNpc</span> <span class="o">&lt;&lt;</span> <span class="s">"를 좌표 ("</span> <span class="o">&lt;&lt;</span> <span class="n">x</span> <span class="o">&lt;&lt;</span> <span class="s">", "</span> <span class="o">&lt;&lt;</span> <span class="n">y</span> <span class="o">&lt;&lt;</span> <span class="s">")로 이동시킵니다."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// SAY 커맨드</span>
<span class="k">class</span> <span class="nc">SayCommand</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ICommand</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="n">string</span> <span class="n">targetNpc</span><span class="p">;</span>
    <span class="n">string</span> <span class="n">message</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">SayCommand</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">target</span><span class="p">,</span> <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">msg</span><span class="p">)</span> <span class="o">:</span> <span class="n">targetNpc</span><span class="p">(</span><span class="n">target</span><span class="p">),</span> <span class="n">message</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span> <span class="p">{}</span>
    <span class="kt">void</span> <span class="n">Execute</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">targetNpc</span> <span class="o">&lt;&lt;</span> <span class="s">"가 말합니다: "</span> <span class="o">&lt;&lt;</span> <span class="n">message</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// WAIT 커맨드</span>
<span class="k">class</span> <span class="nc">WaitCommand</span> <span class="o">:</span> <span class="k">public</span> <span class="n">ICommand</span> <span class="p">{</span>
<span class="nl">private:</span>
    <span class="kt">float</span> <span class="n">duration</span><span class="p">;</span>
<span class="nl">public:</span>
    <span class="n">WaitCommand</span><span class="p">(</span><span class="kt">float</span> <span class="n">seconds</span><span class="p">)</span> <span class="o">:</span> <span class="n">duration</span><span class="p">(</span><span class="n">seconds</span><span class="p">)</span> <span class="p">{}</span>
    <span class="kt">void</span> <span class="n">Execute</span><span class="p">()</span> <span class="k">override</span> <span class="p">{</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">duration</span> <span class="o">&lt;&lt;</span> <span class="s">"초 동안 기다립니다..."</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><h4 id="3-파서parser-구현"><span class="mr-2">3. 파서(Parser) 구현</span><a href="#3-파서parser-구현" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ul><li>파서는 토큰 리스트를 받아, 이를 분석하여 ICommand 객체의 리스트로 변환한다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="c1">// 간단한 파서 클래스</span>
<span class="k">class</span> <span class="nc">Parser</span> <span class="p">{</span>
<span class="nl">public:</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ICommand</span><span class="o">&gt;&gt;</span> <span class="n">Parse</span><span class="p">(</span><span class="k">const</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">Token</span><span class="o">&gt;&amp;</span> <span class="n">tokens</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">vector</span><span class="o">&lt;</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ICommand</span><span class="o">&gt;&gt;</span> <span class="n">commands</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">tokens</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">const</span> <span class="n">Token</span><span class="o">&amp;</span> <span class="n">current</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">current</span><span class="p">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">Token</span><span class="o">::</span><span class="n">KEYWORD</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">current</span><span class="p">.</span><span class="n">text</span> <span class="o">==</span> <span class="s">"MOVE"</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tokens</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="p">{</span>
                    <span class="c1">// MOVE 키워드를 만나면, 뒤따르는 토큰 3개를 이용해 MoveCommand를 생성</span>
                    <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">target</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">].</span><span class="n">text</span><span class="p">;</span>
                    <span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="n">stof</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">].</span><span class="n">text</span><span class="p">);</span>
                    <span class="kt">float</span> <span class="n">y</span> <span class="o">=</span> <span class="n">stof</span><span class="p">(</span><span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">3</span><span class="p">].</span><span class="n">text</span><span class="p">);</span>
                    <span class="n">commands</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">MoveCommand</span><span class="o">&gt;</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">));</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">// 토큰 4개를 소비했으므로 인덱스 점프</span>
                <span class="p">}</span>
                <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">current</span><span class="p">.</span><span class="n">text</span> <span class="o">==</span> <span class="s">"SAY"</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">tokens</span><span class="p">.</span><span class="n">size</span><span class="p">())</span> <span class="p">{</span>
                    <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">target</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">].</span><span class="n">text</span><span class="p">;</span>
                    <span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">message</span> <span class="o">=</span> <span class="n">tokens</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">2</span><span class="p">].</span><span class="n">text</span><span class="p">;</span>
                    <span class="n">commands</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">make_unique</span><span class="o">&lt;</span><span class="n">SayCommand</span><span class="o">&gt;</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">message</span><span class="p">));</span>
                    <span class="n">i</span> <span class="o">+=</span> <span class="mi">3</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="c1">// ... WAIT 등 다른 명령어에 대한 파싱 로직 ...</span>
                <span class="k">else</span> <span class="p">{</span>
                    <span class="c1">// 잘못된 문법</span>
                    <span class="n">i</span><span class="o">++</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">i</span><span class="o">++</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">commands</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></table></code></div></div><h2 id="3단계-해석-및-실행-interpretation--execution"><span class="mr-2">3단계: 해석 및 실행 (Interpretation &amp; Execution)</span><a href="#3단계-해석-및-실행-interpretation--execution" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ul><li>이제 모든 조각이 모였다. 스크립트를 렉싱하고, 파싱하여, 최종적으로 실행하는 클라이언트 코드를 작성할 수 있다.</ul><div class="language-c++ highlighter-rouge"><div class="code-header"> <span data-label-text="C++"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="c1">// 클라이언트 코드 (예: ScriptRunner)</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">string</span> <span class="n">script</span> <span class="o">=</span> <span class="s">"MOVE Guard 100 50 SAY Guard </span><span class="se">\"</span><span class="s">멈춰!</span><span class="se">\"</span><span class="s">"</span><span class="p">;</span>

    <span class="c1">// 1. 렉싱 (문자열 -&gt; 토큰 리스트)</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">Token</span><span class="o">&gt;</span> <span class="n">tokens</span> <span class="o">=</span> <span class="n">Lex</span><span class="p">(</span><span class="n">script</span><span class="p">);</span> <span class="c1">// 실제 Lex 함수는 구현 필요</span>

    <span class="c1">// 2. 파싱 (토큰 리스트 -&gt; 커맨드 리스트)</span>
    <span class="n">Parser</span> <span class="n">parser</span><span class="p">;</span>
    <span class="n">vector</span><span class="o">&lt;</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ICommand</span><span class="o">&gt;&gt;</span> <span class="n">commands</span> <span class="o">=</span> <span class="n">parser</span><span class="p">.</span><span class="n">Parse</span><span class="p">(</span><span class="n">tokens</span><span class="p">);</span>

    <span class="c1">// 3. 해석 및 실행 (커맨드 실행)</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"--- 스크립트 실행 시작 ---"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="n">command</span> <span class="o">:</span> <span class="n">commands</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">command</span><span class="o">-&gt;</span><span class="n">Execute</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"--- 스크립트 실행 완료 ---"</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</pre></table></code></div></div><ul><li>이 과정을 통해, 우리는 텍스트 스크립트를 ‘해석’하여 실제 게임 내 동작으로 변환하는 간단한 인터프리터를 완성했다.<li>새로운 명령어(예: ATTACK)를 추가하고 싶다면, Token enum, ICommand 구현체, 그리고 Parser의 로직에 해당 규칙만 추가하면 된다.</ul><h1 id="요약">요약</h1><ul><li><p>인터프리터 패턴은 텍스트 기반의 언어나 규칙을 해석하고 실행하는 방법을 제공한다.</p><li><p>일반적으로 렉싱(문자열을 토큰으로 분해)과 파싱(토큰을 실행 가능한 구조로 변환)의 단계를 거친다.</p><li><p>파싱된 결과는 종종 <strong>추상 구문 트리(AST)</strong>나, 위 예제처럼 커맨드 객체의 리스트 형태로 표현된다.</p><li><p>이 패턴은 언어가 비교적 단순하고, 문법을 쉽게 확장할 수 있어야 할 때 유용하다.</p><li>복잡한 언어(C++, Python 등)를 위한 인터프리터나 컴파일러를 직접 만드는 것은 매우 어려운 일이며, 보통 ANTLR이나 Bison/Flex 같은 전문적인 파서 생성 도구를 사용한다.<li>하지만 게임 내에서 간단한 스크립팅, 룰 엔진, 데이터 정의 언어 등을 구현할 때 인터프리터 패턴의 기본 원리를 이해하고 적용하면 매우 유연하고 강력한 시스템을 구축할 수 있다.</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4/'>디자인 패턴</a>, <a href='/categories/%ED%96%89%ED%83%9C-%ED%8C%A8%ED%84%B4/'>행태 패턴</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/design-pattern/" class="post-tag no-text-decoration" >design pattern</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=%EC%9D%B8%ED%84%B0%ED%94%84%EB%A6%AC%ED%84%B0+%ED%8C%A8%ED%84%B4+-+yjh9317&url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EC%259D%25B8%25ED%2584%25B0%25ED%2594%2584%25EB%25A6%25AC%25ED%2584%25B0-%25ED%258C%25A8%25ED%2584%25B4%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=%EC%9D%B8%ED%84%B0%ED%94%84%EB%A6%AC%ED%84%B0+%ED%8C%A8%ED%84%B4+-+yjh9317&u=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EC%259D%25B8%25ED%2584%25B0%25ED%2594%2584%25EB%25A6%25AC%25ED%2584%25B0-%25ED%258C%25A8%25ED%2584%25B4%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fyjh9317.github.io%2Fposts%2F%25EC%259D%25B8%25ED%2584%25B0%25ED%2594%2584%25EB%25A6%25AC%25ED%2584%25B0-%25ED%258C%25A8%25ED%2584%25B4%2F&text=%EC%9D%B8%ED%84%B0%ED%94%84%EB%A6%AC%ED%84%B0+%ED%8C%A8%ED%84%B4+-+yjh9317" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Gameplay-Param/">GameplayTag Param</a><li><a href="/posts/Device/">Device</a><li><a href="/posts/SwapChain/">SwapChain</a><li><a href="/posts/VertexBuffer/">VertexBuffer</a><li><a href="/posts/IndexBuffer/">IndexBuffer</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/%EC%B1%85%EC%9E%84-%EC%82%AC%EC%8A%AC-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1685631600" data-df="ll" > Jun 2, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>책임 사슬 패턴</h3><div class="text-muted small"><p> 책임 사슬 패턴 요청을 처리할 수 있는 객체들의 사슬(chain)을 만들어, 요청이 처리될 때까지 이 사슬을 따라 객체들이 차례대로 요청을 확인하게 만드는 행위 디자인 패턴이다. 요청을 보낸 객체(Sender)는 어떤 객체가 그 요청을 처리할지 알 필요가 없다. 요청은 사슬의 첫 번째 객체에게 전달되고, 해당 객체는 요청을 처...</p></div></div></a></div><div class="card"> <a href="/posts/%EC%BB%A4%EB%A7%A8%EB%93%9C-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1685890800" data-df="ll" > Jun 5, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>커맨드 패턴</h3><div class="text-muted small"><p> 커맨드 패턴 player.Jump()처럼 객체의 메서드를 직접 호출하는 대신, ‘점프하라’는 요청(request) 또는 명령(command) 자체를 하나의 객체로 캡슐화하는 것이 커맨드 패턴(Command Pattern)의 핵심이다. 이렇게 요청을 객체로 만들면 어떤 장점이 있을까? 명령을 변수처럼 저장하거나, 큐에 ...</p></div></div></a></div><div class="card"> <a href="/posts/%EB%B0%98%EB%B3%B5%EC%9E%90-%ED%8C%A8%ED%84%B4/"><div class="card-body"> <em class="small" data-ts="1686582000" data-df="ll" > Jun 13, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>반복자 패턴</h3><div class="text-muted small"><p> 반복자 패턴 컬렉션(배열, 리스트, 트리 등)의 내부 구조를 외부에 노출하지 않으면서, 그 요소들을 순차적으로 접근할 수 있는 방법을 제공하는 행위 디자인 패턴 for 루프를 사용해 std::vector의 모든 요소를 출력하는 것이 바로 이 패턴의 가장 흔한 예다. 반복자 패턴의 핵심은, 데이터 구조가 어떻게 생겼는지(배열...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EC%BB%A4%EB%A7%A8%EB%93%9C-%ED%8C%A8%ED%84%B4/" class="btn btn-outline-primary" prompt="Older"><p>커맨드 패턴</p></a> <a href="/posts/%EB%B0%98%EB%B3%B5%EC%9E%90-%ED%8C%A8%ED%84%B4/" class="btn btn-outline-primary" prompt="Newer"><p>반복자 패턴</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2025 <a href="https://twitter.com/username">Yang jeong hyeon</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div></p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/unreal/">unreal</a> <a class="post-tag" href="/tags/c/">C++</a> <a class="post-tag" href="/tags/design-pattern/">design pattern</a> <a class="post-tag" href="/tags/coding-test/">coding test</a> <a class="post-tag" href="/tags/directx/">directx</a> <a class="post-tag" href="/tags/windows/">windows</a> <a class="post-tag" href="/tags/data-structure/">data_structure</a> <a class="post-tag" href="/tags/modern-effective-c/">modern effective c++</a> <a class="post-tag" href="/tags/directx3d/">directx3d</a> <a class="post-tag" href="/tags/python/">python</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
