---
title: Online Subsystem
date: 2023-07-09
categories: [unreal,multiplayer project]
tags: [unreal]		# TAG는 반드시 소문자로 이루어져야함!
---

로컬(Local) IP와 공개(Public) Ip
=============

* 동일한 로컬 네트워크에 연결된 컴퓨터의 게임 인스턴스에 연결했었지만, 로컬 네트워크에 없는 플레이어와 연결하려 한다.

* `로컬 IP 주소`는 `Internal IP 주소`라고도 불리며, `로컬 네트워크 라우터`에 의해 컴퓨터에 할당된다.

    * `192.168`로 시작하는 IP 주소면, `192.168.1.1` , `192.168.1.2` 이런식으로 할당된다.
* 대부분의 네트워크 라우터는 기기들에게 다른 IP 주소를 할당하며 어떤 기기에 연결되었는지에 따라 IP 주소가 바뀔 수 있다.

  * 이 IP 주소들은 네트워크 안에 있는 다른 컴퓨터에게만 보인다.

  * 이 로컬 네트워크는 외부로부터 연결할 수 없다

  * 로컬 컴퓨터는 이더넷 케이블이나 와이파이로 라우터와 연결되어 있다.


* 라우터는 `ISP(Internet Service Provider)`와 연결되어 있다.

* ISP는 라우터에 `External Public IP 주소`를 할당한다.

  * External Public IP 주소는 인터넷의 다른 IP에게 노출된다.


* 인터넷에 들어오는 모든 정보는 Public IP 주소나 External IP 주소로 이동한 다음 Local 혹은 Internal IP 주소로 들어온다

<br>

----------

* 결국 같은 로컬 네트워크를 사용하는 컴퓨터끼리는 연결이 쉽지만 아닌 컴퓨터들은 Public IP 주소를 이용하여 접속해야 한다.

* 그런데 알려주지 않는 한 Public IP 주소를 알 수 없기 때문에 이상적이지 않다.

* `보통 비디오게임에 로그인하면 게임 자체가 다른 플레이어와 매칭시켜준다.`

<br>

**게임이 IP 주소를 찾는 방법**
-------------

* `Dedicated-Server`


  * 서버가 Dedicated-Server인 경우, 로그인하면 IP 주소 목록을 갖고 있는 서버 중 하나에 접속하여 매칭한다.

  * 그러나 Dedicated-Server은 돈과 시간이 많이 든다.



* `Listen-Server`

  * 한 유저가 Server 역할로 시작한다면, 다른 유저들은 이 Server에 접속한다.

  * 다른 유저들이 이 Server의 IP 주소를 알아내서 접속해야 한다.

  * `게임 로그인은 특정 서버에 신호를 전송하여 로그인한 다른 플레이어와 연결해 주는데, 이러한 서버를 호스팅하는 서비스를 이용하여 다른 플레이어와 연결된다. `

<br>

**Online-SubSystem**
=============

* 언리얼 엔진은 `Online-Subsystem`이라는 기능을 제공하는데 다른 유저들의 IP 주소 없이도 로그인할 수 있게 도와준다.

* 멀티 플레이어 게임을 언리얼 엔진으로 만들면 게임 세션을 관리하고 유저들을 연결하는 `온라인 서비스`에 접속해서 함께 플레이할 수 있다.
  
  * 온라인 서비스에는 스팀, XBox Live, 페이스북 등 있다


* 게임이 이러한 온라인 서비스중 하나에 연결되고 온라인 서비스은 유저간의 연결을 처리하기 위한 고유한 코드가 설정되어 있다.

  * 스팀에는 유저를 연결하고 친구 목록을 작성하는 고유 코드가 있다.

* `언리얼에서는 온라인 서비스마다 다르게 작성될 수 있는 코드인 Single Code Base 를 제시한다.`

  * Code Base를 이용하여 어떤 온라인 서비스에 연결되었냐에 따라 알맞게 세부사항을 처리한다.

* `Single Code Base로 크로스 서비스의 모든 기능을 담당하는 것을 ABSTRACTION LAYER(추상 계층)이라고 한다.`


* `즉, Online-SubSystem은 온라인 서비스 기능을 공통된 방식으로 액세스할 수 있는 방법을 제공한다.`

  * 어떤 서비스를 선택하든 추상 계층으로만 작업하기에 상관없다.
