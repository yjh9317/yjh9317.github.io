---
title: 가비지 컬렉터
date: 2023-05-19
categories: [unreal, 용어]
tags: [unreal]		# TAG는 반드시 소문자로 이루어져야함!
---

# 가비지 컬렉터

* 언리얼 엔진의 가비지 컬렉터는 메모리 관리를 자동화하는 시스템으로, 사용되지 않는 객체들을 자동으로 식별하고 제거하여 메모리 누수를 방지

* UObject 기반의 객체들을 관리

## 기능

* `자동 메모리 관리:` 언리얼 엔진의 가비지 컬렉터는 객체가 더 이상 참조되지 않으면 이를 자동으로 감지하고, 메모리에서 해제. 
  * 이를 통해 개발자는 객체 생명주기를 수동으로 관리할 필요 없이 안전하게 메모리를 관리

* `루트 세트 관리`: 가비지 컬렉터는 '루트 세트'로 불리는 참조 집합을 기반으로 객체를 추적합니다. 
  * 루트 세트에 포함된 객체는 수동으로 관리되며, 이들로부터 연결된 객체들이 메모리에 유지됩니다.

* `주기적 실행`: 가비지 컬렉터는 주기적으로 실행되며, 각 실행 시 사용되지 않는 객체들을 수집하여 메모리를 해제합니다.

## 작동방식

* 가비지 컬렉터는 `Mark and Sweep` 방식으로 동작

* `마크 단계`: 루트 세트에서 시작하여 모든 참조된 객체들을 탐색하고, 사용 중인 객체를 '마크'

* `스윕 단계`: 마크되지 않은 객체들은 메모리에서 제거. 
  * 이 과정에서, 객체가 가비지 컬렉션에 포함되면 해당 객체에 대한 포인터는 null로 설정되며, 이후에 이를 사용하려고 하면 오류가 발생


## 장점 

* `메모리 누수 방지`: 가비지 컬렉터는 사용되지 않는 객체를 자동으로 제거하여 메모리 누수를 방지합니다. 이는 특히 대규모 프로젝트에서 중요한 기능입니다.

* `개발 효율성 향상`: 가비지 컬렉터 덕분에 개발자는 객체의 생명주기를 일일이 관리하지 않아도 되므로, 코드 유지보수가 용이해지고 개발 효율성이 높아집니다.

* `안전성`: 메모리 관리를 자동화하여 수동 메모리 관리로 인한 잠재적인 오류를 줄입니다.


## 알면 좋은점

* `UPROPERTY 사용`: 가비지 컬렉터는 UPROPERTY 매크로를 통해 객체를 추적합니다. 객체를 안전하게 관리하려면, 클래스 멤버 변수에 UPROPERTY를 사용하여 가비지 컬렉터가 해당 객체를 추적할 수 있도록 해야 합니다.

* `TWeakObjectPtr 사용`: 객체의 생존 여부를 확인해야 하지만 가비지 컬렉터에 의해 제거되지 않도록 하려면, TWeakObjectPtr을 사용하는 것이 좋습니다.

* `수동 가비지 컬렉션`: 특정 상황에서 필요할 때, `ForceGarbageCollection()` 함수를 사용하여 가비지 컬렉션을 강제로 실행할 수 있습니다.