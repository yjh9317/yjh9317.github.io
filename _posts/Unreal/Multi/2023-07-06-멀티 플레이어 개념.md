---
title: 멀티 플레이어 개념
date: 2023-07-06
categories: [unreal,multi]
tags: [unreal]		# TAG는 반드시 소문자로 이루어져야함!
---

**싱글 플레이어**
==============

* 싱글 플레이어 게임은 `한 컴퓨터에서 실행되는 하나의 게임 세션으로 구성된다.`

* 한 컴퓨터에서 여러 입력 장치와 화면 분할로 게임을 구성할 순 있지만 이 유형에는 인터넷이 필요치 않다.

* 그리고 네트워크를 통해 다른 컴퓨터에서 실행되는 게임의 다른 인스턴스에게 정보를 전달할 필요가 없다.

* 이러한 유형을 `로컬 멀티플레이어`라고 한다.

<br>

**멀티 플레이어**
============

* 멀티 플레이어 게임은 `두 개 이상의 인스턴스가 서로 다른 컴퓨터에서 실행된다.`

* 두 플레이어가 게임 내 상황을 변경하기 위한 입력을 사용하기 때문에 최소 두 개의 게임 인스턴스가 별도의 컴퓨터에서 실행된다.

  * 간단히 말해, 서로 다른 컴퓨터로 각자의 캐릭터를 조종하기 위한 입력을 의미

* 이때, 입력에 의해 변경된 정보는 게임 내의 다른 인스턴스(다른 컴퓨터)에게 전송되어야 한다.

  * 1번 캐릭터가 움직이면 2번 컴퓨터에서 1번 캐릭터가 움직여야 한다.

<br>


게임 세션의 시스템 종류
==========

* 게임 세션 간 정보 공유 시스템을 구축하는 방법은 여러가지가 있다.

  * `Peer-To-Peer`

  * `Client-Server`

<br>

**Peer-To-Peer**
-------------

* `중앙 서버 없이 플레이어들 사이에 직접 통신을 수행하는 방식`

* `가장 간단한 방법이면서 가장 구현하기 쉬운 시스템이다.`


* 다른 인스턴스에게 정보를 보내주는 방식이다.

  * 1번 플레이어가 움직이면 그 외 나머지 플레이어에게 1번 플레이어의 움직임 데이터를 전송

* `그런데 이러한 방식은 플레이어가 많으면 많을수록 효율이 떨어진다.`

  * 예를 들어 n명의 플레이어가 있다면, 한 플레이어가 나머지 n-1명의 플레이어에게 전송하는데 나머지도 이 행위를 반복하므로 총 (n-1)*n번 전송한다.

* `Peer-To-Peer의 또 다른 문제점은 게임의 공식 버전(authoritative version)이 없다.`

  * 플레이어가 캐릭터를 움직이면, 해당 플레이어의 기기 버전은 다른 기기에서 실행중인 게임의 버전과 달라지며, 그 정보가 네트워크를 통해 다른 기기에서 실행 중인 게임을 업데이트하는데 시간이 걸리낟.

  * 그러다 보니 어떤 게임 인스턴스을 기준으로 하는지 알 수 없게 된다.


<br>

**Client-Server**
============

* `서버는 하나의 기기로만 설정되고, 나머지 기기는 클라이언트로 설정된다.`

* 그리고 `클라이언트는 서버와만 대화한다`

  * `즉, 클라이언트끼리는 정보를 주고 받을 수 없고 서버와만 정보를 송수신할 만큼 정도의 대역폭이 필요하다.`

* 서버는 권위적인(authoritative) 역할이지만, 항상 그런 것은 아니다.

  * 위의 말뜻은 서버는 권한은 많지만 서버의 버전을 올바른 버전으로 기준을 잡는다.

  * 클라이언트가 서버에게 데이터를 보내면, 서버는 데이터가 올바른지 확인 후, 모든 클라이언트에게 데이터를 보내 업데이트를 한다.

  * 이때 서버에서 클라이언트들에게 데이터를 보내는 것을 복제(replication)이라고 한다.

<br>


**클라이언트 서버 모델 구현하는 방법**
----------------

* 클라이언트 서버 모델을 구현하는 방법은 아래와 같이 있다.

  * Listen-Server

  * Dedicated-Server

  * Authoritative Client-Server

<br>

**Listen-Server**
-----------

* `클라이언트 중 하나가 서버 역할`

* `서버 역할을 하는 플레이어가 게임을 하면,그래픽을 렌더링 하면서 기기들은 서버 역할을 하는 플레이어를 기준으로 업데이트를 진행한다.`

* 서버 역할을 하는 플레이어는 서버에 요청할 필요가 없어 이점이 있다.

* 클라이언트 플레이어들은 서버에 요청을 보내고 데이터가 복제되기를 기다려야 한다.

  * 소규모 게임에서는 미미하지만, 규모가 커질수록 데이터 복제에 시간과 비용이 커져 Dedicated-Server가 필요하게 됐다.

<br>

**Dedicated-Server**
------------

* `렌더링과 사용자 입력 처리를 전혀 하지 않고, 순전히 클라이언트의 연결을 받는 세션을 처리만 하는 역할`

* `Dedicated-Server에서는 서버 기기의 버전을 기준으로 시뮬레이션을 처리하며 대규모 멀티플레이어 클라이언트를 복제할 수 있다.`


<br>

**Authoritative Client-Server**
--------

* 언리얼 엔진은 Authoritative Client-Server를 사용한다

* `한 컴퓨터는 서버로 동작하고 다른 컴퓨터들은 클라이언트로 연결된다.`

* `서버 버전은 권위적인 역할을 하며 항상 올바른 버전으로 여겨진다.
`
* 싱글 플레이어 게임에서 언리얼 엔진은 클라이언트와 서버가 같은 Client-Server 모델을 사용한다