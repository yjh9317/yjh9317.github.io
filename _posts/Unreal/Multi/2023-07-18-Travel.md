---
title: Travel
date: 2023-07-18
categories: [unreal, multi]
tags: [unreal]		# TAG는 반드시 소문자로 이루어져야함!
---

<br>

**TRAVEL 방식**
===========

* `게임 내에서 여러 개의 레벨 또는 맵을 연결하는 방법`

* `Non-Seamless Travel`와 `Seamless Travel` 두 가지 버전이 있다.

* GameMode 클래스에서 `bUseSeamlessTravel`이란 값으로 선택할 수 있다.

<br>

### Non-Seamless Travel
-----------

* `게임 플레이 중에 현재 레벨을 완전히 언로드한 후, 다른 레벨을 로드하여 이동하는 방식`

* 클라이언트가 서버 연결을 끊고 같은 서버에 다시 재연결한다

* 맵을 로딩할 때, 서버와 처음 연결할 때, 게임이 끝나고 새롭게 시작할 때 모든 클라이언트한테 발생한다

* Non-Seamless Travel은 주로 큰 규모의 레벨 간 전환이 필요한 경우나, 다른 맵으로의 이동이 필요한 경우에 사용된다

<br>

### Seamless Travel
-----------

* `레벨 간 전환 시 로딩 화면 없이 자연스럽게 이동하는 방식`

* 클라이언트가 서버와 연결을 끊을 필요가 없어 부드러운 환경이 제공된다

* 재연결 이슈도 피할 수 있다
  - 서버를 찾지 못하거나 서버에 갑자기 유저가 많아져 유저가 재연결되지 않는것 등



* `변환 지도(Transition Map)`를 사용한다

  * Transition Map은 플레이어가 한 장소에서 다른 장소로 이동할 때의 경로와 관련된 정보를 담고 있는 지도

  - 맵이 언제든 로딩이 되어야 하기 때문에 다른 맵으로 이동할 때의 경로를 담고 있는 변환 지도를 이용한다.

  - 만약 현재 맵에서 다른 맵으로 이동할 때 변환맵이 없다면 많은 비용이 소모된다

* Seamless Travel은 주로 작은 규모의 레벨 간 전환, 다양한 지역 간의 이동 또는 게임 내의 퀘스트 진행을 위해 사용된다.


<br>

**멀티플레이어에서 Travel 호출**
===============

* `UWorld::ServerTravel`과 `APlayerController::ClientTravel`이 있다.



### UWorld::ServerTravel
------------

* 게임 서버에서 사용되는 메서드

* ServerTravel을 호출하면 현재 게임 세션에서 다른 맵(레벨)으로 이동할 수 있다.

  * 맵 전환: 서버가 다른 맵으로 이동하여 새로운 게임 세션을 시작하는 경우 사용
  * 게임 모드 변경: 서버에서 특정 게임 모드로 전환하는 경우 사용


* 서버에서만 호출할 수 있으며, 클라이언트 측에서 직접 호출하면 작동하지 않는다. 
  * 따라서 서버 관리자 또는 서버 측 로직에서 호출되어야 한다.

<br>

### APlayerController::ClientTravel
----------

* 게임 클라이언트에서 사용되는 메서드

* ClientTravel을 호출하면 현재 클라이언트가 서버에서 제공하는 새로운 맵으로 이동한다.

  * 로비 또는 매치메이킹: 클라이언트가 서버에서 호스팅되는 로비 또는 매치메이킹 시스템에 참가할 때 사용
  * 게임 시작 및 종료: 클라이언트가 서버에서 게임 세션을 시작하거나 종료할 때 사용

* 클라이언트에서만 호출할 수 있으며, 서버 측에서 호출해도 클라이언트의 이동에는 영향을 미치지 않는다.

  * 따라서 클라이언트 관리자 또는 클라이언트 측 로직에서 호출되어야 한다.

<br>

# 결론

* `ServerTravel은 서버에서 다른 맵으로 이동하는 데 사용되며, ClientTravel은 클라이언트에서 서버에서 제공하는 새로운 맵으로 이동하는 데 사용`