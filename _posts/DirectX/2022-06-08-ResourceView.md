---
title: ResourceView
date: 2022-06-08
categories: [DirectX, DirectX]
tags: [directx]		# TAG는 반드시 소문자로 이루어져야함!
---


# DirectX 자원 뷰 (Resource View) 핵심 정리

* DirectX에서 **자원 뷰(Resource View)**는 GPU 자원(예: 텍스처, 버퍼)을 렌더링 파이프라인의 특정 단계에 특정 용도로 연결(바인딩)하는 데 사용되는 객체

* 자원 뷰는 동일한 자원이라도 파이프라인의 어느 부분에 어떤 방식으로 접근할지를 정의하여, 자원의 다양한 활용을 가능하게 함

<br>

# 자원 뷰의 주요 종류
  
## 1. 렌더 타겟 뷰 (Render Target View - RTV)

#### 역할

* 렌더링 파이프라인의 최종 색상 출력(픽셀 셰이더의 결과)을 받을 자원(주로 2D 텍스처)을 지정

#### 특징

* 렌더 타겟으로 사용될 자원의 특정 부분(예: 밉맵 레벨, 배열 슬라이스)이나 포맷을 지정
* 예를 들어, 화면에 그려질 최종 이미지나 중간 과정의 렌더링 결과를 저장하는 데 사용

## 2. 깊이/스텐실 뷰 (Depth Stencil View - DSV)

#### 역할

* 깊이 정보와 스텐실 정보를 저장하고 테스트하는 데 사용될 자원(깊이/스텐실 버퍼)을 지정

#### 특징

* RTV와 마찬가지로 렌더링 파이프라인의 출력(깊이/스텐실 값)을 받지만, 색상이 아닌 깊이 판정과 스텐실 판정을 위해 사용

* 3D 장면에서 물체의 앞뒤 관계를 결정(오클루전 컬링)하거나, 특정 영역에만 렌더링하는 등의 고급 효과에 필수적

## 3. 셰이더 자원 뷰 (Shader Resource View - SRV)

#### 역할

* 프로그래머블 셰이더(정점 셰이더, 픽셀 셰이더 등)가 자원으로부터 데이터를 읽을 수 있도록 함

#### 특징

* 텍스처를 샘플링하거나, 버퍼에서 데이터를 읽어오는 등 셰이더 연산에 필요한 입력 데이터를 제공함

* 이 뷰를 통해 접근하는 자원은 셰이더 내에서 일반적으로 수정(쓰기)할 수 없음

## 4. 순서 없는 접근 뷰 (Unordered Access View - UAV)

#### 역할

* 셰이더(주로 픽셀 셰이더 또는 계산 셰이더)가 자원으로부터 데이터를 읽는 동시에 쓸 수 있도록 함

#### 특징

* 출력 위치가 미리 정해져 있지 않아, 셰이더 내에서 자원의 임의의 위치에 데이터를 기록하는 `스캐터(scatter)` 연산이 가능

* GPGPU(범용 GPU 프로그래밍) 작업, 고급 이미지 처리, 파티클 시뮬레이션 등 복잡한 데이터 조작에 사용

<br>

# 자원 뷰 생성 및 해제

## 생성

* 자원 뷰는 ID3D11Device 인터페이스를 사용하여 생성됨
* 각 뷰 타입별로 별도의 생성 메서드가 제공
  * (예: CreateRenderTargetView, CreateShaderResourceView).

* 이들 생성 메서드는 일반적으로 다음과 같은 세 가지 매개변수를 받음

  * 뷰를 적용할 자원을 가리키는 포인터 (예: ID3D11Texture2D*, ID3D11Buffer*).
  
  * 뷰를 상세히 서술하는 구조체를 가리키는 포인터 (예: D3D11_RENDER_TARGET_VIEW_DESC*). 이 매개변수에 nullptr을 전달하면, 자원 생성 시 정의된 타입과 포맷을 기반으로 전체 자원을 포괄하는 기본 뷰가 생성
  
  * 생성된 자원 뷰 객체를 받을 포인터의 주소 (예: ID3D11RenderTargetView**).

## 해제

* 자원 뷰는 COM(Component Object Model) 인터페이스이므로, 사용이 끝나면 참조 횟수를 관리하여 적절히 참조를 해제해야 함

* ComPtr과 같은 스마트 포인터를 사용하면 이 과정이 자동으로 관리될 수 있음