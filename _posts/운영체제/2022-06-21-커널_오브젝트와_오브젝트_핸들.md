---
title: 커널 오브젝트와 오브젝트 핸들
date: 2022-06-21
categories: [윈도우즈시스템프로그래밍, 운영체제]
tags: [windows]		# TAG는 반드시 소문자로 이루어져야함!
---

커널 오브젝트
=================================
* <span style="color:yellow">커널 오브젝트</span>
   * 커널에서 관리하는 중요한 정보를 담아둔 데이터 블록을 가리켜 커널 오브젝트라고 한다.

<br><br>

커널 오브젝트의 이해
========================

  * 프로세스를 생성하고 관리하는 실질적인 주체는 운영체제<br><br>
  * Windows 운영체제 개발자들은 운영체제가 프로세스를 관리하기 위해 프로세스에 관한 정보를 저장할 수 있는 프로세스 관리 구조체를 정의함
    * 이 구조체는 프로세스를 관리하기 위해 필요한 구조체로 프로세스의 상태 정보,우선순위 정보를 담고 있다<br><br>
  * 프로세스가 생성될 때마다 프로세스 관리 구조체가 생기고 새롭게 생성된 프로세스 정보들로 초기화되는데, 이것이 <span style="color:yellow">커널 오브젝트의 정체</span><br><br>
  * 프로세스뿐만 아니라, 쓰레드,IPC를 위한 파이프나 메일슬롯,파일을 생성할 때도 커널오브젝트가 생성된다<br><br>
  *  커널오브젝트의 종류에 따라서 서로 다른 구조체를 기반으로 생성되고 그에 따라 구조체의 멤버도 달라진다.<br><br><br>


 * 정리
   * Windows 운영체제는 프로세스, 쓰레드 혹은 파일과 같은 리소스들을 원활히 관리하기 위해 필요한 정보를 저장해야 한다. 이때 데이터를 저장하는 메모리 블록을 가리켜 커널 오브젝트라 한다.
   
<br><br><br>

오브젝트 핸들을 이용한 커널오브젝트의 조작
============================================
 * Windows는 프로그래머가 직접 커널 오브젝트를 조작할 수 없고 함수 호출에 의한 간접적인 호출로 조작이 가능하다.
 * Windows에서 관리하는 리소스의 특성을 변경시키기 위해서는 시스템 함수를 호출해야하는데 이 때 필요한 값이 핸들이다.
 * <span style="color:yellow">핸들이란 커널 오브젝트에 할당되는 숫자(아이디)</span>
 

<br><br><br><br>

커널 오브젝트와 핸들의 종속관계
============================

* 커널 오브젝트는 프로세스에 종속적인것이 아니라, 운영체제에 종속적인 관계로 커널 오브젝트의 소멸시점은 운영체제에 의해서 결정된다.<br><br>
* 커널 오브젝트는 프로세스에 종속적인 것이 아니라 운영체제에 종속적인 관계로 여러 프로세스에 의해서 접근이(공유가) 가능하다.



* 프로세스 핸들은 프로세스의 커널 오브젝트를 구분짓기 위한 것이고, 프로세스 ID는 커널 오브젝트가 아니라 프로세스 자체를 구분짓기 위한 것이다.


<br><br><br><br>

커널 오브젝트와 Usage Count
=============================
* 보통 커널 오브젝트를 생성한 주체가 커널 오브젝트를 소멸시킬 권한(소멸시킬 시점을 결정지을 권한)을 가지고 있다고 생각
