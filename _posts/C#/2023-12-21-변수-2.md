---
title: 변수-2
date: 2023-12-21
categories: [C#,c＃]
tags: [c＃]		# TAG는 반드시 소문자로 이루어져야함!
---

# 박싱과 언박싱

* object 형식은 참조 형식이므로 힙에 데이터를 할당한다.

* 그런데 값 형식의 데이터(int,char..)를 object 객체에 담으면 이 메모리는 어디에 할당이 되는걸까?

* object 형식은 값 형식의 데이터를 힙에 할당하기 위해 `박싱`기능을 제공한다.

* `object 형식에 값 형식의 데이터를 할당하려는 시도가 이뤄지면,  object 형식은 박싱을 수행해서 해당 데이터를 힙에 할당한다.`


<br>

```c#
object a = 20;
```

* 위 코드에서 20은 `박싱`해서 힙에 할당하고 a 변수 자체는 그 주소를 참조하는 형식이다.

* 이러한 힙에 있던 값 형식 데이터를 값 형식 객체에 다시 할당하기 위해서는 `언박싱`을 해야한다.

```c#
object a = 20;
int b = (int)a; // 언박싱
```

<br>

# 상수와 열거 형식


## 상수

* 상수는 값을 변하지 않게 만드는 것으로, `const`를 데이터형식 앞에 선언해서 사용한다.

```c#
const 데이터형식 변수명 = 값;
```

* 이 값을 바꾸려면 컴파일러가 에러 메세지를 보낸다.


## 열거 형식

* 같은 범주에 속하는 여러 개의 상수를 선언할 때 사용한다.

```c#
enum 열거 형식명 : 기반자료형 { 상수1, 상수2, 상수3 ...}
```

* 위 형식에서 기반 자료형은 정수계열만 가능하며 생략하면 컴파일러가 자동으로 int를 기반으로 사용한다.

```c#
enum DialogResult { YES, NO, CANCEL, CONFIRM, OK}
```

* 위와 같이 선언하면 첫 번째 열거 형식은 0, 그 다음은 1, 그 다음은 2
  식으로 1씩 증가한 값을 컴파일러가 자동으로 할당

<br>

# Nullable 형식

* 가끔 어떤 값도 가지지 않는 변수가 필요한데, 그런 경우 변수에게 할당된 메모리 공간을 비울 수 있도록 Nullable 형식을 사용하면 된다.

```c#
데이터형식? 변수이름;
```

* Nullable 형식은 값 형식에 한해서만 사용이 가능하고 참조 형식은 불가하다.

```c#
int? a = null;
float? b = null;
double? c = null;
```

* 위 변수 모두 null로 초기화 했는데 아무 값도 대입하지 않으면 C# 컴파일러는 에러를 발생시킨다.

<br>

* 그리고 모든 Nullable 형식은 HasValue와 Value 두 가지 속성을 지니고 있다.

* `HasValue`는 해당 변수가 값을 가지고 있는지 또는 그렇지 않은지를 나타낸다.

* `Value`는 변수에 담겨 있는 값을 나타낸다.

```c#
int? a = null;
Console.WriteLine(a.HasValue);  // a는 Null이므로 False 출력

a = 37;
Console.WriteLine(a.HasValue);  // a는 37을 가지므로 True 출력
Console.WriteLine(a.Value);     // 37 출력
```


<br>

# var 

* C#은 변수나 상수에 대해 형식 검사를 강력하게 하는 언어이다.

* 검사를 강력하게 하면, 의도치 않은 형식의 데이터를 읽거나 할당하는 일을 막아준다.

* 약한 형식 검사는 이러한 문제를 잡을 수 없지만, 강력한 형식 검사는 이 문제를 컴파일 타임에 찾아내 드러내 준다.

* 하지만 약한 형식 검사는 코드를 작성하는 단계에서 더 편리하다.

* 일단 변수를 선언해서 데이터를 할당하면, 컴파일러나 인터프리터가 해당 변수에 담는 데이터를 보고 자동으로 형식을 지정해준다.

* 그래서 C#에서 약한 형식 검사를 위해 `var` 키워드를 사용한다ㅏ.

* 명시적 형식 대신 var를 사용해 변수를 선언하면 컴파일러가 자동으로 해당 변수의 형식을 지정 해준다.

  * 단, var 키워드를 사용하면 선언과 동시에 초기화를 해야한다.

  * 그래야 컴파일러가 데이터를 보고 형식을 추론할 수 있다.

```c#
var a = 3;          // a는 int 형식
var b = "Hello";    // b는 string 형식
```

* 그리고 var는 지역변수로만 사용이 가능하다.

