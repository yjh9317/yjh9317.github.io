---
title: 생성자
date: 2022-08-27
categories: [C++,C++]
tags: [C++]		# TAG는 반드시 소문자로 이루어져야함!
---

생성자
=========================
* 클래스와 이름이 같고 리턴 타입이 없는 함수를 생성자라고 한다.

* 객체가 생성되는 시점에 한 번만 자동으로 실행된다.
  
* 생성자의 목적은 객체가 생성될 때 필요한 초기작업을 위함
  * 멤버변수의 값을 특정 값으로 설정
  * 메모리를 동적할당하거나 생성되면서 실행해야 할 함수
  * 네트워크를 연결

<br>

* 만약 클래스안에 생성자가 없으면 컴파일러가 자동으로 디폴트 생성자를 생성한다.

* 생성자도 접근지정자를 사용할 수 있다.
  * 대부분의 경우, 다른 파일에서 이 클래스를 사용하기 위해 public으로 생성한다.

<br>

예시
=============================

* 생성자는 오버로딩을 이용하여 여러 생성자를 생성할 수 있다.
  
<br>

        // MyClass.h
        class MyClass {
        public:
            int m_iData;

        public:
            MyClass();          // 디폴트 생성자 선언
            MyClass(int _i)     // int 인자를 받는 생성자 선언
        };

        // MyClass.cpp

        #include "MyClass.h"

        MyClass::MyClass()  // 디폴트 생성자 구현
        {
            m_iData = 1;
        }

        MyClass::MyClass(int _i)  // int 인자를 받는 생성자 구현
        {
            m_iData = _i;   // 인자값을 받아서 멤버 변수를 초기화
        }





<br><br>

생성자 이니셜라이저
==========================
* 생성자에서 콜론(:)을 이용하여 클래스의 멤버변수를 초기화한다
  * 이때 세미콜론(;)는 사용하지 않는다.<br><br>
  
* {} 또는 ()를 이용하여 배열은 모든 원소를 0(NULL)으로 초기화하고 포인터는 nullptr로 초기화할 수 있다.
  
<br>

        class MyClass {
        public:
            int m_iData;
            float m_fArr[5];
            int* m_pData;

        public:
            MyClass();      // 디폴트 생성자 선언
            // .h에서는 선언하고 .cpp에서 구현
        };

        // MyClass.cpp

        #include "MyClass.h"

        MyClass::MyClass()  // 생성자 이니셜라이저 사용
            : m_iData(1)     // m_Data를 1로 생성
            , m_fArr{}      // m_fArr 배열을 0으로 초기화
            , m_pData{}    // 포인터는 nullptr로 초기화
        {
        }


<br><br>

디폴트 생성자
================
* 디폴트 생성자란 매개 변수가 없는 생성자를 의미한다.

<br><br>

* 기본 생성자가 자동으로 생성되는 경우
  * 생성자가 하나도 없는 클래스의 경우
    * 컴파일러가 보이지 않게 자동으로 디폴트 생성자를 생성한다.
  * 디폴트 생성자를 호출할 때는 ()를 빼고 호출해야한다.
    * 만약 ()를 붙이고 호출한다면 함수의 호출로 판단함.

<br>

        // 밑의 Class는 생성자가 없지만 컴파일러가 자동으로 생성
        class MyClass { 
        public:
            int m_Data;
        };

        int main()
        {
            MyClass A;  // 디폴트 생성자 호출
            // MyClass A(); 디폴트 생성자를 호출할때는 ()를 사용하지 않는다.
        }

<br><br>

* 디폴트 생성자가 자동으로 생성되지 않을 경우
  * 생성자가 하나라도 선언된 클래스의 경우
  * 컴파일러는 생성자가 있으므로 자동으로 디폴트 생성자를 생성하지 않음.

<br>

        // 생성자가 있으므로 디폴트 생성자는 X
        class MyClass { 
        public:
            int m_Data;

            MyClass(int _i)     // 생성될 때 int인자를 받으면서 멤버변수로 초기화
            {
                m_Data = _i;
            }
        };

        int main()
        {
            // MyClass A;  디폴트 생성자가 없고 디폴트 생성자를 호출했으므로 컴파일 에러
            MyClass A(1);   //  생성될 때 int를 받는 생성자가 호출되면서 m_Data에 1를 넣는다.
        }


<br><br>

명시적으로 삭제된 생성자
=====================
* C++에서는 컴파일러가 디폴트를 생성자를 만들면 안될 경우에 명시적으로 삭제할 수 있다.

        class MyClass
        {
            public:
                MyClass() = delete;
        }

<br><br>

위임 생성자
===============
*  중복된 초기화코드를 하나의 생성자로 몰고, 생성자에서 다른 생성자를 호출하는 생성자
*  C++11부터 지원

        Circle::Circle() : Circle(1) {} // Circle(int r)의 생성자 호출

        Circle::Circle(int r){
            radius = r;
        }
        
* 객체의 초기화가 코딩된 Circle(int r)를 타겟 생성자라고 한다.
* Circle() 생성자는 객체의 초기화를 다른 생성자에 위임한다고 해서 위임 생성자라고 한다.

